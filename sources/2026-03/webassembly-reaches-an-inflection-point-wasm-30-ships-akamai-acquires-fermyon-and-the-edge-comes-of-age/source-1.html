<!DOCTYPE html><script type="module" src="/_astro/index.astro_astro_type_script_index_0_lang.CoXd8L9s.js"></script> <html lang="en-us" dir="ltr"> <head><meta charset="UTF-8"><script async src="https://ot.www.cloudflare.com/public/vendor/onetrust/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" data-domain-script="b1e05d49-f072-4bae-9116-bdb78af15448"></script><script type="text/javascript">
    window.loadScript = (url, { charset = 'UTF-8', ...attributes } = {}, location = 'head') => {
      const existingScript = document.querySelector('script[src="' + url + '"]');
      if (existingScript) {
        return;
      }

      const script = document.createElement('script');
      script.src = url;
      script.type = 'text/javascript';

      script.async = true;
      script.charset = charset;

      if (attributes) {
        Object.entries(attributes).forEach(([key, value]) => {
          script.setAttribute(key, value);
        });
      }

      if (location === 'head') {
        document.head.appendChild(script);
      } else {
        document.body.appendChild(script);
      }

      return script;
    };
  </script><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="KeThzeyMOr"><meta name="baidu-site-verification" content="code-NIlrS7gNhx"><meta name="description" content="Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare."><title>Python Workers redux: fast cold starts, packages, and a uv-first workflow</title><meta name="title" content="Python Workers redux: fast cold starts, packages, and a uv-first workflow"><meta name="msvalidate.01" content="CF295E1604697F9CAD18B5A232E871F6"><meta class="swiftype" name="language" data-type="string" content="en"><script type="text/javascript">
    function OptanonWrapper() {
      if (!window.zarazTagManager.loaded && window.OnetrustActiveGroups.includes('C0004')) {
        window.zarazTagManager.loadZaraz();
      }

      if (window.zaraz && !window.OnetrustActiveGroups.includes('C0004')) {
        window.zaraz = undefined;
        window.zarazData = undefined;
        window.zarazTagManager.loaded = false;
      }

      if (!window.isCfCookieEventAttached) {
        window.isCfCookieEventAttached = true;
        window.addEventListener('consent.onetrust', async () => {
          await fetch('/', { method: 'HEAD' });
        });
      }
    }
    window.zarazTagManager = {
      loaded: false,
      getEndPoint() {
        return '/static/z/i.js';
      },
      loadZaraz() {
        window.loadScript(window.zarazTagManager.getEndPoint());
        window.zarazTagManager.loaded = true;
      },
    };
  </script><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-32x32.png"><link rel="mask-icon" href="/images/favicon-32x32.png" color="#f78100"><link rel="stylesheet" href="/themes/ashes.min.css"><link rel="sitemap" href="/sitemap.xml"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="canonical" href="https://blog.cloudflare.com/python-workers-advancements/"><link rel="alternate" hreflang="en-us" href="https://blog.cloudflare.com/python-workers-advancements/"><link rel="alternate" hreflang="zh-cn" href="https://blog.cloudflare.com/zh-cn/python-workers-advancements/"><link rel="alternate" hreflang="zh-tw" href="https://blog.cloudflare.com/zh-tw/python-workers-advancements/"><link rel="alternate" hreflang="ja-jp" href="https://blog.cloudflare.com/ja-jp/python-workers-advancements/"><link rel="alternate" hreflang="ko-kr" href="https://blog.cloudflare.com/ko-kr/python-workers-advancements/"><!-- General Meta Tags --><meta property="article:published_time" content="2025-12-08T14:00+08:00"><meta property="article:modified_time" content="2026-01-09T03:15:56.711Z"><meta property="article:tag" content="Cloudflare Workers"><meta property="article:tag" content="Python"><meta property="article:publisher" content="https://www.facebook.com/cloudflare"><!-- Facebook Meta Tags --><meta property="og:site_name" content="The Cloudflare Blog"><meta property="og:type" content="article"><meta property="og:title" content="Python Workers redux: fast cold starts, packages, and a uv-first workflow"><meta property="og:description" content="Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare."><meta property="og:url" content="https://blog.cloudflare.com/python-workers-advancements/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="628"><!-- Twitter/X Meta Tags --><meta name="twitter:title" content="Python Workers redux: fast cold starts, packages, and a uv-first workflow"><meta name="twitter:description" content="Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare."><meta name="twitter:url" content="https://blog.cloudflare.com/python-workers-advancements/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:data1" content="Dominik Picheta"><meta name="twitter:creator" content="@d0m96"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="Cloudflare Workers,Python"><meta name="twitter:site" content="@cloudflare"><meta property="og:image" content="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5QnWOD5av7pqJN0WHRsE86/5a9a08c40e392ff1d8414c10c07b87c6/OG_Share_2024_-_2025-12-04T114957.559.png"><meta name="twitter:image" content="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5QnWOD5av7pqJN0WHRsE86/5a9a08c40e392ff1d8414c10c07b87c6/OG_Share_2024_-_2025-12-04T114957.559.png"><link rel="stylesheet" href="/_astro/index.TOLuWYrS.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media(prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><link rel="preload" as="fetch" href="/_server-islands/SocialLinks?e=default&p=&s=83FB5382665A5FB1FE0ABB73ELjeTg6lg47usY6WLlWKxIjE%2FRWoO%2BktJ0olRJ2HFzRkfQ1T3b8o0higILo081HryZCANIXy%2FBNJCg7UGSzooHRcVXics7MHs%2FdlO7UaaMRFun6T2znxAraBGl3gO%2BbY9qZ4hgceSUaLZg8XmvcjZc9JN43SdcUFT5g94%2BY90filOaHGW0GiDKT2RFOO228Yofz4EjEcTER7pXfGpyuhAZns%2FCxRP%2FJKnMJX5Yua8Koxyix2J9WzcEU7eU9HY4xJdlB%2FBlJaoe%2BAy0zMlF5P292jcyq0oFPsJFCEvh6YH0u7M4cO3FmNUFWglJH8Z%2B8wONRiw3ItblDstwXAj%2BOs1jP%2FeHW7aIrz9Fh9u3PEnbh1RxjpYlAIMpxPheveQLsJUXdmVWbAMg4%2BE21qxvHSNtAgA5TLZ2lU1MUUhUvAPlrzz0Fqw5IgQmGUi%2FOOwtbllXUsnVAbtFNMScm2TR9w9YOYljNsI7VQDkMklLgkHOBZ%2FJWtG0SZFQGe%2FMYgkeEaTTUeZCORuqEBOz%2F9qV5YKk1k6mMydR1p8YzmbZw6i8Y2Owzlu2peqRK3STTfrZ2iZmS0a8L7sW3wTBtJw%2FUm6l0It%2BGVQgzBgKHLqhdSm4YxruXTxWMVV8vgl9rumvxiQZJtWU1O9BHtdfLITak%2FSSU7kuQtCru5VuymzwpTeWAzF3A%2Fq1xzGdKWno%2F%2BGLEE2IjhYcBrvXwjVUFCbGUWV3BIqEYGhQ2DKeUfTSc%2F21tXj4CNat8L6fvAF7A4vNrMP7Q57XQ%2FIYnjnknoGLgOeysIfLoe8ufqpigrUAL8JVq8UdF19t1M4fAhYuAH2Cml87ZCkvixc3j0v1CffD%2BKh1GriGJpLYRlGV7Lup0cXNeTh8JfzeWenOiOfjNRPnWfU2dNmtD5DRojOYjFvcu4LnwdV9Jsl4p0JGMIIGxQDsoNVQXTbz8JzYuJ2Qvx5t3JL7DR8ePf3JN6%2ByzqgMKQJx7%2B0%2FaoQopa7eOnUYaIYy%2B93iTkBxtISkctZx%2Bo%2F%2BKpt1DmUGgwannQXn5GlFzXu0uL2U4%2FADcYI3xpvd%2BnzugIcvDd24tDcWPKP%2BvRni7B9W%2BTdGtm%2BSUBc5lvsh7XAZznQnx9dCoNgTxOPuKdz0Y8mUwRduTaCXmPIkmCAxfAO%2Beg57SREdLrfjprBMwJ62Ms%2BqszOh7LF1y43woSdjCC5jwGX2ZNF6j0hDKNsoNuqruTqb4vGkzuLLCVUoM21t6i%2Fgms6FDWzhHYCujYhqTM8WED4CyRKspDBo27n7oX6PUwrQ%2FggC%2FVFtF6khQu9RTMrjqmSQU9lG3KBN%2BbnemCXewGfOfvb%2F%2BTGFk%2FBBnwQPQIs7eyQSuizbVsq4bcNaBY6cYTMLOYRpngROrprGJUxRyUkQ21eGg%3D" crossorigin="anonymous"><link rel="preload" as="fetch" href="/_server-islands/SocialLinks?e=default&p=&s=FD7B2908949DA0A4ED722CF8E43h91RtSw%2FCzrHdIUlQvjzChxTiUjt5Gc7BbXPyVZEThNF9slq3V9Jvrq8z4g%2FHMRNI1VlhYAEeA%2FoLauXCAeMEiXm6dpvajjTV7%2FvrzvrMTYn5yLyyJj3NC4kOYgPZUeLOcm1ZvWQKeBbwwGOrlxyNMfaInIeba5PQi97wLMK%2BU9gCh19%2FDZ34RKnYDYkdz0KttbI85SJnxoCNW0SrtgQ0s8WzliUXokT5AnK2Lnhww091ftgKXZEy%2Fu5b47sYL6M1JX2xWX9BOLqlVkJpLysuhcUxN1EF6blMwaarzp6mONEihVnprCvzePNmLa03w%2F3qFsV17kGwj00KIgD5sFrhh5FGeeDtrYcXMnMhHW7q0rHLHGKn7Y%2BV8AWg%2Fwa%2BCWmttuzp0CYa66I3HqkfhZ9exNZ20ZIYwyqG2yOag3I3uWYJQ%2FMXBKAEAspCL8ooKTivTc%2BAmt4gtCYYxwOICc9FoGNTbHpkpuKFZ7AaKbhmDzcTrY%2BSsZenWjrcW4e4JNYSMcz038HbUF9t4NwSdWO0jCKa8DbqfNwN7PPhEzIc0Tszyd42p7tHkmYvKf7YCOqmTWQYMGsM0t0A9aG3AomNJX3LPK2rqkSIM0KZh00HFrGslHFwka6qf48xkPYqKoNKA5XZya7P9oTsWzFKLiMxGLGsB4vP0SHJ1iPNDG6hhoT%2BP%2FBGcDf1qF4VBi4wKWVRYhy4O90GIp4daTIELgqR0gnaUbo0mqlSBre7u9b6jN%2BASkAtHLO1eW1sgoy6%2FDKSXjjP39kbli5dnrTDpQeJVmJElQ5l8w2KXWtELhLbdHn1pMCSF4WZBb%2FYGYahZXQ1%2Bl0mUr68zR5p2yYWn%2FML8%2F6gtp6xMxP72Rjzhn8RzFYP00FwYSB7XS5Lw4Q%2F8LWY2CRx4utQZ9oidhNjEASTKKe%2FBarxiUA7WXsjnKQhpSLKKOA4M5llq7UNQ45bXL3SOpnLzjot%2FVY2Igm2uAIU%2FJ0a4IGfYw%2Bv8gY%2BQ5KGzugrNrqrZWjQvpIlZnFQPPsmwxVVCK8OKLQQplsW7ED29DXmdpRgqqqZs%2FwidcT89G7NBG1AcRvfANlKSOOL7Ac9JIn34FDtRwLPhZbDfkL1DF20Ljh%2BWW3SHywxLu%2FUJXGqU8fqgzzfvvDzeXVj1TbOzrlWkbeavWic2NrR94EWnd4WODegzSdvesWHAbW5P6LkiXOkhLnG65b6CNaGbJztYPa0Qf6zsRMqUAefCVxWSAdcQczi0aP7Ckhdtlt1eLWYmDlA6bS8SixDqopRjN7vyPAh2UnyTkD7kHx4rkWQWkWiPJdj9fhobCLTXIwE54LlwH2zGlW1tAZ36TOi1BNijnGGqNHRkMXOr5YnXVZwv6RrbA%2Fr1gNudkrJBqo5GtsbDrbeLX8%3D" crossorigin="anonymous"></head><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1LnWFb" component-url="/_astro/GoogleAnalytics.D0enFA2_.js" component-export="GoogleAnalytics" renderer-url="/_astro/client.BMDBmNz6.js" props="{&quot;title&quot;:[0,&quot;Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;canonical&quot;:[0,&quot;https://blog.cloudflare.com/python-workers-advancements&quot;],&quot;info&quot;:[0,{&quot;id&quot;:[0,&quot;4TlYGwUzSQPqAGP7gIEton&quot;],&quot;title&quot;:[0,&quot;Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;slug&quot;:[0,&quot;python-workers-advancements&quot;],&quot;excerpt&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;&lt;sup&gt;&lt;i&gt;Note: This post was updated with additional details regarding AWS Lambda.&lt;/i&gt;&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;Last year we announced &lt;a href=\&quot;https://blog.cloudflare.com/python-workers/\&quot;&gt;&lt;u&gt;basic support for Python Workers&lt;/u&gt;&lt;/a&gt;, allowing Python developers to ship Python to region: Earth in a single command and take advantage of the &lt;a href=\&quot;https://workers.cloudflare.com/\&quot;&gt;&lt;u&gt;Workers platform&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Since then, we’ve been hard at work making the &lt;a href=\&quot;https://developers.cloudflare.com/workers/languages/python/\&quot;&gt;&lt;u&gt;Python experience on Workers&lt;/u&gt;&lt;/a&gt; feel great. We’ve focused on bringing package support to the platform, a reality that’s now here — with exceptionally fast cold starts and a Python-native developer experience.&lt;/p&gt;&lt;p&gt;This means a change in how packages are incorporated into a Python Worker. Instead of offering a limited set of built-in packages, we now support any &lt;a href=\&quot;https://pyodide.org/en/stable/usage/packages-in-pyodide.html\&quot;&gt;&lt;u&gt;package supported by Pyodide&lt;/u&gt;&lt;/a&gt;, the WebAssembly runtime powering Python Workers. This includes all pure Python packages, as well as many packages that rely on dynamic libraries. We also built tooling around &lt;a href=\&quot;https://docs.astral.sh/uv/\&quot;&gt;&lt;u&gt;uv&lt;/u&gt;&lt;/a&gt; to make package installation easy.&lt;/p&gt;&lt;p&gt;We’ve also implemented dedicated memory snapshots to reduce cold start times. These snapshots result in serious speed improvements over other serverless Python vendors. In cold start tests using common packages, Cloudflare Workers start over &lt;b&gt;2.4x faster than AWS Lambda&lt;/b&gt; &lt;b&gt;without SnapStart &lt;/b&gt;and &lt;b&gt;3x faster than Google Cloud Run&lt;/b&gt;.&lt;/p&gt;&lt;p&gt;In this blog post, we’ll explain what makes Python Workers unique and share some of the technical details of how we’ve achieved the wins described above. But first, for those who may not be familiar with Workers or serverless platforms – and especially those coming from a Python background — let us share why you might want to use Workers at all.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;deploying-python-globally-in-2-minutes\&quot;&gt;Deploying Python globally in 2 minutes&lt;/h3&gt;\n      &lt;a href=\&quot;#deploying-python-globally-in-2-minutes\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Part of the magic of Workers is simple code and easy global deployments. Let&amp;#39;s start by showing how you can deploy a FastAPI app across the world with fast cold starts in less than two minutes.&lt;/p&gt;&lt;p&gt;A simple Worker using FastAPI can be implemented in a handful of lines:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Rust\&quot;&gt;&lt;code class=\&quot;language-Rust\&quot;&gt;from fastapi import FastAPI\nfrom workers import WorkerEntrypoint\nimport asgi\n\napp = FastAPI()\n\n@app.get(&amp;quot;/&amp;quot;)\nasync def root():\n   return {&amp;quot;message&amp;quot;: &amp;quot;This is FastAPI on Workers&amp;quot;}\n\nclass Default(WorkerEntrypoint):\n   async def fetch(self, request):\n       return await asgi.fetch(app, request.js_object, self.env)&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;To deploy something similar, just make sure you have &lt;code&gt;uv&lt;/code&gt; and &lt;code&gt;npm&lt;/code&gt; installed, then run the following:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Shell\&quot;&gt;&lt;code class=\&quot;language-Shell\&quot;&gt;$ uv tool install workers-py\n$ pywrangler init --template \\\n    https://github.com/cloudflare/python-workers-examples/03-fastapi\n$ pywrangler deploy&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;With just a little code and a &lt;code&gt;pywrangler deploy&lt;/code&gt;, you’ve now deployed your application across Cloudflare’s edge network that extends to &lt;a href=\&quot;https://www.cloudflare.com/network/\&quot;&gt;&lt;u&gt;330 locations across 125 countries&lt;/u&gt;&lt;/a&gt;. No worrying about infrastructure or scaling.&lt;/p&gt;&lt;p&gt;And for many use cases, Python Workers are completely free. Our free tier offers 100,000 requests per day and 10ms CPU time per invocation. For more information, check out the &lt;a href=\&quot;https://developers.cloudflare.com/workers/platform/pricing/\&quot;&gt;&lt;u&gt;pricing page in our documentation&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;For more examples, &lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples\&quot;&gt;&lt;u&gt;check out the repo in GitHub&lt;/u&gt;&lt;/a&gt;. And read on to find out more about Python Workers.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;so-what-can-you-do-with-python-workers\&quot;&gt;So what can you do with Python Workers?&lt;/h3&gt;\n      &lt;a href=\&quot;#so-what-can-you-do-with-python-workers\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Now that you’ve got a Worker, just about anything is possible. You write the code, so you get to decide. Your Python Worker receives HTTP requests and can make requests to any server on the public Internet.&lt;/p&gt;&lt;p&gt;You can set up cron triggers, so your Worker runs on a regular schedule. Plus, if you have more complex requirements, you can make use of &lt;a href=\&quot;https://blog.cloudflare.com/python-workflows/\&quot;&gt;&lt;u&gt;Workflows for Python Workers&lt;/u&gt;&lt;/a&gt;, or even long-running WebSocket servers and clients &lt;a href=\&quot;https://developers.cloudflare.com/durable-objects/get-started/\&quot;&gt;&lt;u&gt;using Durable Objects&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Here are more examples of the sorts of things you can do using Python Workers:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/03-fastapi\&quot;&gt;&lt;u&gt;Render HTML templates on the edge, with a library like Jinja, while fetching dynamic content directly from your server&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/11-opengraph\&quot;&gt;&lt;u&gt;Modify the response from your server — for example, you can inject opengraph tags into your HTML dynamically, based on the content requested&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/15-chatroom\&quot;&gt;&lt;u&gt;Build a chat room using Durable Objects and WebSockets&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/14-websocket-stream-consumer\&quot;&gt;&lt;u&gt;Consume data from WebSocket connections, like the Bluesky firehose&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/12-image-gen\&quot;&gt;&lt;u&gt;Generate images using the Pillow Python package&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/13-js-api-pygments\&quot;&gt;&lt;u&gt;Write a small Python Worker that exposes the API of a Python package, and then access it from your JavaScript Worker using RPC&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;faster-package-cold-starts\&quot;&gt;Faster package cold starts&lt;/h3&gt;\n      &lt;a href=\&quot;#faster-package-cold-starts\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Serverless platforms like Workers save you money by only running your code when it’s necessary to do so. This means that if your Worker isn’t receiving requests, it may be shut down and will need to be restarted once a new request comes in. This typically incurs a resource overhead we refer to as the “cold start.” It’s important to keep these as short as possible to minimize latency for end users.&lt;/p&gt;&lt;p&gt;In standard Python, booting the runtime is expensive, and our initial implementation of Python Workers focused on making the &lt;i&gt;runtime&lt;/i&gt; boot fast. However, we quickly realized that this wasn’t enough. Even if the Python runtime boots quickly, in real-world scenarios the initial startup usually includes loading modules from packages, and unfortunately, in Python many popular packages can take several seconds to load.&lt;/p&gt;&lt;p&gt;We set out to make cold starts fast, regardless of whether packages were loaded.&lt;/p&gt;&lt;p&gt;To measure realistic cold start performance, we set up a benchmark that imports common packages, as well as a benchmark running a “hello world” using a bare Python runtime. Standard Lambda is able to &lt;a href=\&quot;https://cold.picheta.me/#bare\&quot;&gt;&lt;u&gt;start just the runtime&lt;/u&gt;&lt;/a&gt; quickly, but once you need to import packages, the cold start times shoot up. In order to optimize for faster cold starts with packages, you can use SnapStart on Lambda (which we will be adding to the linked benchmarks shortly). This incurs a cost to store the snapshot and an additional cost on every restore. Python Workers will automatically apply memory snapshots for free for every Python Worker.&lt;/p&gt;&lt;p&gt;Here are the average cold start times when loading three common packages (&lt;a href=\&quot;https://www.python-httpx.org/\&quot;&gt;&lt;u&gt;httpx&lt;/u&gt;&lt;/a&gt;, &lt;a href=\&quot;https://fastapi.tiangolo.com/\&quot;&gt;&lt;u&gt;fastapi&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://docs.pydantic.dev/latest/\&quot;&gt;&lt;u&gt;pydantic&lt;/u&gt;&lt;/a&gt;):&lt;/p&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Platform&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Mean Cold Start (secs)&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Cloudflare Python Workers&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;1.027&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;AWS Lambda (without SnapStart)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;2.502&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Google Cloud Run&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;3.069&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;In this case, &lt;b&gt;Cloudflare Python Workers have 2.4x faster cold starts than AWS Lambda without SnapStart and 3x faster cold starts than Google Cloud Run&lt;/b&gt;. We achieved these low cold start numbers by using memory snapshots, and in a later section we explain how we did so.&lt;/p&gt;&lt;p&gt;We are regularly running these benchmarks. Go &lt;a href=\&quot;https://cold.picheta.me/#bare\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt; for up-to-date data and more info on our testing methodology.&lt;/p&gt;&lt;p&gt;We’re architecturally different from these other platforms — namely, &lt;a href=\&quot;https://developers.cloudflare.com/workers/reference/how-workers-works/\&quot;&gt;&lt;u&gt;Workers is isolate-based&lt;/u&gt;&lt;/a&gt;. Because of that, our aims are high, and we are planning for a zero cold start future.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;package-tooling-integrated-with-uv\&quot;&gt;Package tooling integrated with uv&lt;/h3&gt;\n      &lt;a href=\&quot;#package-tooling-integrated-with-uv\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The diverse package ecosystem is a large part of what makes Python so amazing. That’s why we’ve been hard at work ensuring that using packages in Workers is as easy as possible.&lt;/p&gt;&lt;p&gt;We realised that working with the existing Python tooling is the best path towards a great development experience. So we picked the &lt;code&gt;uv&lt;/code&gt; package and project manager, as it’s fast, mature, and gaining momentum in the Python ecosystem.&lt;/p&gt;&lt;p&gt;We built our own tooling around &lt;code&gt;uv&lt;/code&gt; called &lt;a href=\&quot;https://github.com/cloudflare/workers-py#pywrangler\&quot;&gt;&lt;u&gt;pywrangler&lt;/u&gt;&lt;/a&gt;. This tool essentially performs the following actions:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Reads your Worker’s pyproject.toml file to determine the dependencies specified in it&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Includes your dependencies in a &lt;code&gt;python_modules&lt;/code&gt; folder that lives in your Worker&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Pywrangler calls out to &lt;code&gt;uv&lt;/code&gt; to install the dependencies in a way that is compatible with Python Workers, and calls out to &lt;code&gt;wrangler&lt;/code&gt; when developing locally or deploying Workers. &lt;/p&gt;&lt;p&gt;Effectively this means that you just need to run &lt;code&gt;pywrangler dev&lt;/code&gt; and &lt;code&gt;pywrangler&lt;/code&gt; &lt;code&gt;deploy&lt;/code&gt; to test your Worker locally and deploy it. &lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;type-hints\&quot;&gt;Type hints&lt;/h3&gt;\n      &lt;a href=\&quot;#type-hints\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;You can generate type hints for all of the &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/bindings/\&quot;&gt;&lt;u&gt;bindings&lt;/u&gt;&lt;/a&gt; defined in your wrangler config using &lt;code&gt;pywrangler types&lt;/code&gt;. These type hints will work with &lt;a href=\&quot;https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance\&quot;&gt;&lt;u&gt;Pylance&lt;/u&gt;&lt;/a&gt; or with recent versions of &lt;a href=\&quot;https://mypy-lang.org/\&quot;&gt;&lt;u&gt;mypy&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;To generate the types, we use &lt;a href=\&quot;https://developers.cloudflare.com/workers/wrangler/commands/#types\&quot;&gt;&lt;u&gt;wrangler types&lt;/u&gt;&lt;/a&gt; to create typescript type hints, then we use the typescript compiler to generate an abstract syntax tree for the types. Finally, we use the TypeScript hints — such as whether a JS object has an iterator field — to generate &lt;code&gt;mypy&lt;/code&gt; type hints that work with the Pyodide foreign function interface.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;decreasing-cold-start-duration-using-snapshots\&quot;&gt;Decreasing cold start duration using snapshots&lt;/h3&gt;\n      &lt;a href=\&quot;#decreasing-cold-start-duration-using-snapshots\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Python startup is generally quite slow and importing a Python module can trigger a large amount of work. We avoid running Python startup during a cold start using memory snapshots.&lt;/p&gt;&lt;p&gt;When a Worker is deployed, we execute the Worker’s top-level scope and then take a memory snapshot and store it alongside your Worker. Whenever we are starting a new isolate for the Worker, we restore the memory snapshot and the Worker is ready to handle requests, with no need to execute any Python code in preparation. This improves cold start times considerably. For instance, starting a Worker that imports &lt;code&gt;fastapi&lt;/code&gt;, &lt;code&gt;httpx&lt;/code&gt; and &lt;code&gt;pydantic&lt;/code&gt; without snapshots takes around 10 seconds. With snapshots, it takes 1 second.&lt;/p&gt;&lt;p&gt;The fact that Pyodide is built on WebAssembly enables this. We can easily capture the full linear memory of the runtime and restore it. &lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;memory-snapshots-and-entropy\&quot;&gt;Memory snapshots and Entropy&lt;/h4&gt;\n      &lt;a href=\&quot;#memory-snapshots-and-entropy\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;WebAssembly runtimes do not require features like address space layout randomization for security, so most of the difficulties with memory snapshots on a modern operating system do not arise. Just like with native memory snapshots, we still have to carefully handle entropy at startup to avoid using the &lt;a href=\&quot;https://xkcd.com/221/\&quot;&gt;&lt;u&gt;XKCD random number generator&lt;/u&gt;&lt;/a&gt; (we’re &lt;a href=\&quot;https://www.cloudflare.com/learning/ssl/lava-lamp-encryption/\&quot;&gt;&lt;u&gt;very into actual randomness&lt;/u&gt;&lt;/a&gt;).&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2Q2LYb3LZhfC2q3vQCFr1R/ff8f229715a0d37484585664c61908dc/image1.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;400\&quot; height=\&quot;144\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;By snapshotting memory, we might inadvertently lock in a seed value for randomness. In this case, future calls for “random” numbers would consistently return the same sequence of values across many requests.&lt;/p&gt;&lt;p&gt;Avoiding this is particularly challenging because Python uses a lot of entropy at startup. These include the libc functions &lt;code&gt;getentropy()&lt;/code&gt; and &lt;code&gt;getrandom()&lt;/code&gt; and also reading from &lt;code&gt;/dev/random&lt;/code&gt; and &lt;code&gt;/dev/urandom&lt;/code&gt;. All of these functions share the same implementation in terms of the JavaScript &lt;code&gt;crypto.getRandomValues()&lt;/code&gt; function.&lt;/p&gt;&lt;p&gt;In Cloudflare Workers, &lt;code&gt;crypto.getRandomValues()&lt;/code&gt; has always been disabled at startup in order to allow us to switch to using memory snapshots in the future. Unfortunately, the Python interpreter cannot bootstrap without calling this function. And many packages also require entropy at startup time. There are essentially two purposes for this entropy:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Hash seeds for hash randomization&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Seeds for pseudorandom number generators&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Hash randomization we do at startup time and accept the cost that each specific Worker has a fixed hash seed. Python has no mechanism to allow replacing the hash seed after startup.&lt;/p&gt;&lt;p&gt;For pseudorandom number generators (PRNG), we take the following approach:&lt;/p&gt;&lt;p&gt;At deploy time:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Seed the PRNG with a fixed “poison seed”, then record the PRNG state.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Replace all APIs that call into the PRNG with an overlay that fails the deployment with a user error.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Execute the top level scope of user code.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Capture the snapshot.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;At run time:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Assert that the PRNG state is unchanged. If it changed, we forgot the overlay for some method. Fail the deployment with an internal error.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;After restoring the snapshot, reseed the random number generator before executing any handlers.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;With this, we can ensure that PRNGs can be used while the Worker is running, but stop Workers from using them during initialization and pre-snapshot.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;memory-snapshots-and-webassembly-state\&quot;&gt;Memory snapshots and WebAssembly state&lt;/h4&gt;\n      &lt;a href=\&quot;#memory-snapshots-and-webassembly-state\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;An additional difficulty arises when creating memory snapshots on WebAssembly: The memory snapshot we are saving consists only of the WebAssembly linear memory, but the full state of the Pyodide WebAssembly instance is not contained in the linear memory. &lt;/p&gt;&lt;p&gt;There are two tables outside of this memory.&lt;/p&gt;&lt;p&gt;One table holds the values of function pointers. Traditional computers use a “Von Neumann” architecture, which means that code exists in the same memory space as data, so that calling a function pointer is a jump to some memory address. WebAssembly has a “Harvard architecture” where code lives in a separate address space. This is key to most of the security guarantees of WebAssembly and in particular why WebAssembly does not need address space layout randomization. A function pointer in WebAssembly is an index into the function pointer table.&lt;/p&gt;&lt;p&gt;A second table holds all JavaScript objects referenced from Python. JavaScript objects cannot be directly stored into memory because the JavaScript virtual machine forbids directly obtaining a pointer to a JavaScript object. Instead, they are stored into a table and represented in WebAssembly as an index into the table.&lt;/p&gt;&lt;p&gt;We need to ensure that both of these tables are in exactly the same state after we restore a snapshot as they were when we captured the snapshot.&lt;/p&gt;&lt;p&gt;The function pointer table is always in the same state when the WebAssembly instance is initialized and is updated by the dynamic loader when we load dynamic libraries — native Python packages like numpy. &lt;/p&gt;&lt;p&gt;To handle dynamic loading:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;When taking the snapshot, we patch the loader to record the load order of dynamic libraries, the address in memory where the metadata for each library is allocated, and the function pointer table base address for relocations. &lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;When restoring the snapshot, we reload the dynamic libraries in the same order, and we use a patched memory allocator to place the metadata in the same locations. We assert that the current size of the function pointer table matches the function pointer table base we recorded for the dynamic library.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;All of this ensures that each function pointer has the same meaning after we’ve restored the snapshot as it had when we took the snapshot.&lt;/p&gt;&lt;p&gt;To handle the JavaScript references, we implemented a fairly limited system. If a JavaScript object is accessible from globalThis by a series of property accesses, we record those property accesses and replay them when restoring the snapshot. If any reference exists to a JavaScript object that is not accessible in this way, we fail deployment of the Worker. This is good enough to deal with all the existing Python packages with Pyodide support, which do top level imports like:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Python\&quot;&gt;&lt;code class=\&quot;language-Python\&quot;&gt;from js import fetch&lt;/pre&gt;&lt;/code&gt;\n            \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;reducing-cold-start-frequency-using-sharding\&quot;&gt;Reducing cold start frequency using sharding&lt;/h3&gt;\n      &lt;a href=\&quot;#reducing-cold-start-frequency-using-sharding\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Another important characteristic of our performance strategy for Python Workers is sharding. There is a very detailed description of what went into its implementation &lt;a href=\&quot;https://blog.cloudflare.com/eliminating-cold-starts-2-shard-and-conquer/\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt;. In short, we now route requests to existing Worker instances, whereas before we might have chosen to start a new instance.&lt;/p&gt;&lt;p&gt;Sharding was actually enabled for Python Workers first and proved to be a great test bed for it. A cold start is far more expensive in Python than in JavaScript, so ensuring requests are routed to an already-running isolate is especially important.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;where-do-we-go-from-here\&quot;&gt;Where do we go from here?&lt;/h3&gt;\n      &lt;a href=\&quot;#where-do-we-go-from-here\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;This is just the start. We have many plans to make Python Workers better:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;More developer-friendly tooling&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Even faster cold starts by utilising our isolate architecture&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Support for more packages&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Support for native TCP sockets, native WebSockets, and more bindings&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;To learn more about Python Workers, check out the documentation available &lt;a href=\&quot;https://developers.cloudflare.com/workers/languages/python/\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt;. To get help, be sure to join our &lt;a href=\&quot;https://discord.cloudflare.com/\&quot;&gt;&lt;u&gt;Discord&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2025-12-08T14:00+08:00&quot;],&quot;updated_at&quot;:[0,&quot;2026-01-09T03:15:56.711Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4Wu87IZkO6g7IBGyjMqYcQ/4658c65f65a28d9636ee0f2bdd3a433c/image3.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;bEVrfgaUfNXu577TT9qb8&quot;],&quot;name&quot;:[0,&quot;Python&quot;],&quot;slug&quot;:[0,&quot;python&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;Dominik Picheta&quot;],&quot;slug&quot;:[0,&quot;dominik&quot;],&quot;bio&quot;:[0,null],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4NQ8NXOh8kIeqTdhVt29Y0/f10eccb58f426dd53a2623dd2d290bff/dominik.jpg&quot;],&quot;location&quot;:[0,&quot;London, England&quot;],&quot;website&quot;:[0,null],&quot;twitter&quot;:[0,&quot;@d0m96&quot;],&quot;facebook&quot;:[0,null],&quot;publiclyIndex&quot;:[0,true]}],[0,{&quot;name&quot;:[0,&quot;Hood Chatham&quot;],&quot;slug&quot;:[0,&quot;hood&quot;],&quot;bio&quot;:[0,null],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5NdWrndYBFiQedDDrsFkey/1d7b25517af6f36b842ee4a94a2d4d84/hood.png&quot;],&quot;location&quot;:[0,null],&quot;website&quot;:[0,null],&quot;twitter&quot;:[0,null],&quot;facebook&quot;:[0,null],&quot;publiclyIndex&quot;:[0,true]}],[0,{&quot;name&quot;:[0,&quot;Mike Nomitch&quot;],&quot;slug&quot;:[0,&quot;mike-nomitch&quot;],&quot;bio&quot;:[0],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3Ub221L51x1p3FZJbnblyn/23b50473b99404db0baf42921edd269c/_tmp_mini_magick20240415-2-6izqhi.jpg&quot;],&quot;location&quot;:[0],&quot;website&quot;:[0],&quot;twitter&quot;:[0],&quot;facebook&quot;:[0],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;LOC: Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;Translated for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;Translated for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;Translated for Locale&quot;],&quot;koKR&quot;:[0,&quot;Translated for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/python-workers-advancements&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;description&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5QnWOD5av7pqJN0WHRsE86/5a9a08c40e392ff1d8414c10c07b87c6/OG_Share_2024_-_2025-12-04T114957.559.png&quot;]}],&quot;publicly_index&quot;:[0,true]}],&quot;tagInfo&quot;:[0],&quot;authorInfo&quot;:[0],&quot;translatedPosts&quot;:[1,[]]}" ssr client="only" opts="{&quot;name&quot;:&quot;GoogleAnalytics&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island><script>(()=>{var l=(n,t)=>{let i=async()=>{await(await n())()},e=typeof t.value=="object"?t.value:void 0,s={timeout:e==null?void 0:e.timeout};"requestIdleCallback"in window?window.requestIdleCallback(i,s):setTimeout(i,s.timeout||200)};(self.Astro||(self.Astro={})).idle=l;window.dispatchEvent(new Event("astro:idle"));})();</script><astro-island uid="2v8V1O" prefix="r7" component-url="/_astro/Navigation.DxBqlbSM.js" component-export="Navigation" renderer-url="/_astro/client.BMDBmNz6.js" props="{&quot;title&quot;:[0,&quot;The Cloudflare Blog&quot;],&quot;logo&quot;:[0,&quot;//images.ctfassets.net/zkvhlag99gkb/69RwBidpiEHCDZ9rFVVk7T/092507edbed698420b89658e5a6d5105/CF_logo_stacked_blktype.png&quot;],&quot;pagesStore&quot;:[0,{&quot;page&quot;:[0,&quot;Post&quot;],&quot;slug&quot;:[0,&quot;python-workers-advancements&quot;],&quot;translationsAvailable&quot;:[1,[[0,&quot;zh-cn&quot;],[0,&quot;zh-tw&quot;],[0,&quot;ja-jp&quot;],[0,&quot;ko-kr&quot;]]],&quot;navData&quot;:[1,[[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;6Foe3R8of95cWVnQwe5Toi&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T22:44:28.803Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-27T09:38:16.508Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,333],&quot;revision&quot;:[0,91],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;AI&quot;],&quot;name&quot;:[0,&quot;AI&quot;],&quot;slug&quot;:[0,&quot;ai&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;4HIPcb68qM0e26fIxyfzwQ&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:43:21.536Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-27T09:38:15.201Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,214],&quot;revision&quot;:[0,73],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Developers&quot;],&quot;name&quot;:[0,&quot;Developers&quot;],&quot;slug&quot;:[0,&quot;developers&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;5kZtWqjqa7aOUoZr8NFGwI&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:43:26.040Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-01-30T02:01:21.896Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,250],&quot;revision&quot;:[0,62],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Cloudflare Radar&quot;],&quot;name&quot;:[0,&quot;Radar&quot;],&quot;slug&quot;:[0,&quot;cloudflare-radar&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;6QktrXeEFcl4e2dZUTZVGl&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:43:20.198Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-27T06:29:07.414Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,87],&quot;revision&quot;:[0,29],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Product News&quot;],&quot;name&quot;:[0,&quot;Product News&quot;],&quot;slug&quot;:[0,&quot;product-news&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;6Mp7ouACN2rT3YjL1xaXJx&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:42:46.231Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-05T08:00:52.025Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,238],&quot;revision&quot;:[0,70],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Security&quot;],&quot;name&quot;:[0,&quot;Security&quot;],&quot;slug&quot;:[0,&quot;security&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;16yk8DVbNNifxov5cWvAov&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:56:23.848Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-25T08:01:18.090Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,78],&quot;revision&quot;:[0,33],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Policy &amp; Legal&quot;],&quot;name&quot;:[0,&quot;Policy &amp; Legal&quot;],&quot;slug&quot;:[0,&quot;policy&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;J61Eszqn98amrYHq4IhTx&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:43:46.068Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-27T17:01:44.480Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,157],&quot;revision&quot;:[0,50],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Zero Trust&quot;],&quot;name&quot;:[0,&quot;Zero Trust&quot;],&quot;slug&quot;:[0,&quot;zero-trust&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;48r7QV00gLMWOIcM1CSDRy&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:54:22.790Z&quot;],&quot;updatedAt&quot;:[0,&quot;2025-04-07T23:03:52.422Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,66],&quot;revision&quot;:[0,28],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Speed &amp; Reliability&quot;],&quot;name&quot;:[0,&quot;Speed &amp; Reliability&quot;],&quot;slug&quot;:[0,&quot;speed-and-reliability&quot;],&quot;featured&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;4g8tPriKOAUwdUT4jNPebe&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:46:40.927Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-25T08:01:23.942Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,81],&quot;revision&quot;:[0,31],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Life at Cloudflare&quot;],&quot;name&quot;:[0,&quot;Life at Cloudflare&quot;],&quot;slug&quot;:[0,&quot;life-at-cloudflare&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}],[0,{&quot;metadata&quot;:[0,{&quot;tags&quot;:[1,[]],&quot;concepts&quot;:[1,[]]}],&quot;sys&quot;:[0,{&quot;space&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Space&quot;],&quot;id&quot;:[0,&quot;zkvhlag99gkb&quot;]}]}],&quot;id&quot;:[0,&quot;V86khSc459Yi1AhTlvtY7&quot;],&quot;type&quot;:[0,&quot;Entry&quot;],&quot;createdAt&quot;:[0,&quot;2024-10-09T19:46:53.657Z&quot;],&quot;updatedAt&quot;:[0,&quot;2026-02-25T08:01:21.274Z&quot;],&quot;environment&quot;:[0,{&quot;sys&quot;:[0,{&quot;id&quot;:[0,&quot;master&quot;],&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;Environment&quot;]}]}],&quot;publishedVersion&quot;:[0,75],&quot;revision&quot;:[0,23],&quot;contentType&quot;:[0,{&quot;sys&quot;:[0,{&quot;type&quot;:[0,&quot;Link&quot;],&quot;linkType&quot;:[0,&quot;ContentType&quot;],&quot;id&quot;:[0,&quot;blogTag&quot;]}]}],&quot;locale&quot;:[0,&quot;en-US&quot;]}],&quot;fields&quot;:[0,{&quot;entryTitle&quot;:[0,&quot;Partners&quot;],&quot;name&quot;:[0,&quot;Partners&quot;],&quot;slug&quot;:[0,&quot;partners&quot;],&quot;featured&quot;:[0,true],&quot;publiclyIndex&quot;:[0,true]}]}]]]}],&quot;locale&quot;:[0,&quot;en-us&quot;],&quot;translations&quot;:[0,{&quot;posts.by&quot;:[0,&quot;By&quot;],&quot;footer.gdpr&quot;:[0,&quot;GDPR&quot;],&quot;lang_blurb1&quot;:[0,&quot;This post is also available in {lang1}.&quot;],&quot;lang_blurb2&quot;:[0,&quot;This post is also available in {lang1} and {lang2}.&quot;],&quot;lang_blurb3&quot;:[0,&quot;This post is also available in {lang1}, {lang2} and {lang3}.&quot;],&quot;footer.press&quot;:[0,&quot;Press&quot;],&quot;header.title&quot;:[0,&quot;The Cloudflare Blog&quot;],&quot;search.clear&quot;:[0,&quot;Clear&quot;],&quot;search.filter&quot;:[0,&quot;Filter&quot;],&quot;search.source&quot;:[0,&quot;Source&quot;],&quot;footer.careers&quot;:[0,&quot;Careers&quot;],&quot;footer.company&quot;:[0,&quot;Company&quot;],&quot;footer.support&quot;:[0,&quot;Support&quot;],&quot;footer.the_net&quot;:[0,&quot;theNet&quot;],&quot;search.filters&quot;:[0,&quot;Filters&quot;],&quot;footer.our_team&quot;:[0,&quot;Our team&quot;],&quot;footer.webinars&quot;:[0,&quot;Webinars&quot;],&quot;page.more_posts&quot;:[0,&quot;More posts&quot;],&quot;posts.time_read&quot;:[0,&quot;{time} min read&quot;],&quot;search.language&quot;:[0,&quot;Language&quot;],&quot;footer.community&quot;:[0,&quot;Community&quot;],&quot;footer.resources&quot;:[0,&quot;Resources&quot;],&quot;footer.solutions&quot;:[0,&quot;Solutions&quot;],&quot;footer.trademark&quot;:[0,&quot;Trademark&quot;],&quot;header.subscribe&quot;:[0,&quot;Subscribe&quot;],&quot;footer.compliance&quot;:[0,&quot;Compliance&quot;],&quot;footer.free_plans&quot;:[0,&quot;Free plans&quot;],&quot;footer.impact_ESG&quot;:[0,&quot;Impact/ESG&quot;],&quot;posts.follow_on_X&quot;:[0,&quot;Follow on X&quot;],&quot;footer.help_center&quot;:[0,&quot;Help center&quot;],&quot;footer.network_map&quot;:[0,&quot;Network Map&quot;],&quot;header.please_wait&quot;:[0,&quot;Please Wait&quot;],&quot;page.related_posts&quot;:[0,&quot;Related posts&quot;],&quot;search.result_stat&quot;:[0,&quot;Results &lt;strong&gt;{search_range}&lt;/strong&gt; of &lt;strong&gt;{search_total}&lt;/strong&gt; for &lt;strong&gt;{search_keyword}&lt;/strong&gt;&quot;],&quot;footer.case_studies&quot;:[0,&quot;Case Studies&quot;],&quot;footer.connect_2024&quot;:[0,&quot;Connect 2024&quot;],&quot;footer.terms_of_use&quot;:[0,&quot;Terms of Use&quot;],&quot;footer.white_papers&quot;:[0,&quot;White Papers&quot;],&quot;footer.cloudflare_tv&quot;:[0,&quot;Cloudflare TV&quot;],&quot;footer.community_hub&quot;:[0,&quot;Community Hub&quot;],&quot;footer.compare_plans&quot;:[0,&quot;Compare plans&quot;],&quot;footer.contact_sales&quot;:[0,&quot;Contact Sales&quot;],&quot;header.contact_sales&quot;:[0,&quot;Contact Sales&quot;],&quot;header.email_address&quot;:[0,&quot;Email Address&quot;],&quot;page.error.not_found&quot;:[0,&quot;Page not found&quot;],&quot;footer.developer_docs&quot;:[0,&quot;Developer docs&quot;],&quot;footer.privacy_policy&quot;:[0,&quot;Privacy Policy&quot;],&quot;footer.request_a_demo&quot;:[0,&quot;Request a demo&quot;],&quot;page.continue_reading&quot;:[0,&quot;Continue reading&quot;],&quot;footer.analysts_report&quot;:[0,&quot;Analyst reports&quot;],&quot;footer.for_enterprises&quot;:[0,&quot;For enterprises&quot;],&quot;footer.getting_started&quot;:[0,&quot;Getting Started&quot;],&quot;footer.learning_center&quot;:[0,&quot;Learning Center&quot;],&quot;footer.project_galileo&quot;:[0,&quot;Project Galileo&quot;],&quot;pagination.newer_posts&quot;:[0,&quot;Newer Posts&quot;],&quot;pagination.older_posts&quot;:[0,&quot;Older Posts&quot;],&quot;posts.social_buttons.x&quot;:[0,&quot;Discuss on X&quot;],&quot;search.icon_aria_label&quot;:[0,&quot;Search&quot;],&quot;search.source_location&quot;:[0,&quot;Source/Location&quot;],&quot;footer.about_cloudflare&quot;:[0,&quot;About Cloudflare&quot;],&quot;footer.athenian_project&quot;:[0,&quot;Athenian Project&quot;],&quot;footer.become_a_partner&quot;:[0,&quot;Become a partner&quot;],&quot;footer.cloudflare_radar&quot;:[0,&quot;Cloudflare Radar&quot;],&quot;footer.network_services&quot;:[0,&quot;Network services&quot;],&quot;footer.trust_and_safety&quot;:[0,&quot;Trust &amp; Safety&quot;],&quot;header.get_started_free&quot;:[0,&quot;Get Started Free&quot;],&quot;page.search.placeholder&quot;:[0,&quot;Search Cloudflare&quot;],&quot;footer.cloudflare_status&quot;:[0,&quot;Cloudflare Status&quot;],&quot;footer.cookie_preference&quot;:[0,&quot;Cookie Preferences&quot;],&quot;header.valid_email_error&quot;:[0,&quot;Must be valid email.&quot;],&quot;search.result_stat_empty&quot;:[0,&quot;Results &lt;strong&gt;{search_range}&lt;/strong&gt; of &lt;strong&gt;{search_total}&lt;/strong&gt;&quot;],&quot;footer.connectivity_cloud&quot;:[0,&quot;Connectivity cloud&quot;],&quot;footer.developer_services&quot;:[0,&quot;Developer services&quot;],&quot;footer.investor_relations&quot;:[0,&quot;Investor relations&quot;],&quot;page.not_found.error_code&quot;:[0,&quot;Error Code: 404&quot;],&quot;search.autocomplete_title&quot;:[0,&quot;Insert a query. Press enter to send&quot;],&quot;footer.logos_and_press_kit&quot;:[0,&quot;Logos &amp; press kit&quot;],&quot;footer.application_services&quot;:[0,&quot;Application services&quot;],&quot;footer.get_a_recommendation&quot;:[0,&quot;Get a recommendation&quot;],&quot;posts.social_buttons.reddit&quot;:[0,&quot;Discuss on Reddit&quot;],&quot;footer.sse_and_sase_services&quot;:[0,&quot;SSE and SASE services&quot;],&quot;page.not_found.outdated_link&quot;:[0,&quot;You may have used an outdated link, or you may have typed the address incorrectly.&quot;],&quot;footer.report_security_issues&quot;:[0,&quot;Report Security Issues&quot;],&quot;page.error.error_message_page&quot;:[0,&quot;Sorry, we can&#39;t find the page you are looking for.&quot;],&quot;header.subscribe_notifications&quot;:[0,&quot;Subscribe to receive notifications of new posts:&quot;],&quot;footer.cloudflare_for_campaigns&quot;:[0,&quot;Cloudflare for Campaigns&quot;],&quot;header.subscription_confimation&quot;:[0,&quot;Subscription confirmed. Thank you for subscribing!&quot;],&quot;posts.social_buttons.hackernews&quot;:[0,&quot;Discuss on Hacker News&quot;],&quot;footer.diversity_equity_inclusion&quot;:[0,&quot;Diversity, equity &amp; inclusion&quot;],&quot;footer.critical_infrastructure_defense_project&quot;:[0,&quot;Critical Infrastructure Defense Project&quot;]}]}" ssr client="idle" opts="{&quot;name&quot;:&quot;NavigationComponent&quot;,&quot;value&quot;:true}" await-children><header class="flex flex-row flex-wrap justify-between items-flex-end mw8 center mv3 pl3 pr1"><div class="w-100 flex items-flex-end justify-between justify-start-l"><div class="w-100 tr flex justify-end"><div class="flex justify-between items-center"><span class="dn di-l pr1"><a href="https://dash.cloudflare.com/sign-up" class="f1 blue1 dn di-l b no-underline underline-hover" target="_blank" rel="noreferrer">Get Started Free</a></span><span class="f1 gray4 dn di-l pr1">|</span><span class="dn di-l"><a target="_blank" href="https://www.cloudflare.com/plans/enterprise/contact/" class="f1 gray4 no-underline underline-hover pr1" rel="noreferrer">Contact Sales</a></span><span class="f1 gray4 dn di-l pr1">|</span><div class="relative flex cf-dropdown"><div class="flex items-center" dir="ltr"><button type="button" class="f1 gray4 no-underline language-picker js-language-picker" style="background:transparent;border:none;padding:0"><span class="language-picker__globe-icon"></span><span class="language-picker__caret-icon ph1">▼</span></button></div></div></div></div></div><div class="w-100 w-50-l flex items-end nb5 nb1-l"><a href="/" class="header-logo mr4 dn db-l"><img class="header-logo" src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/69RwBidpiEHCDZ9rFVVk7T/092507edbed698420b89658e5a6d5105/CF_logo_stacked_blktype.png" alt="The Cloudflare Blog" width="170" height="57"/></a><h2 class="mt0 mb1 dn di-l"><a href="/" class="fw5 f5 gray3 no-underline"><span class="dn di-l">The Cloudflare Blog</span></a></h2></div><div class="w-100 w-50-l dn db-l"><div class="w-100 tr mkto-sub-message"><p class="f2">Subscribe to receive notifications of new posts:</p></div><div class="w-100 tr"><div class="marketo-form-container"><form id="mktoForm_1653"><div class="top-subscribe-form-container"><div class="top-subscribe-form-field"><input placeholder="Email Address" class="top-subscribe-form-input" name="email" type="email" title="Must be valid email."/></div><button class="top-subscribe-form-button" type="button">Subscribe</button></div></form></div></div></div></header><nav dir="ltr" class="bb b--black-10 db dn-l w-100 ph3 "><div class=" flex justify-between items-center" style="height:44px"><a href="/search/"><img class="h-6 w-6" src="/images/magnifier.svg" alt="magnifier icon"/></a><button type="button" style="background:transparent;border:none"><img src="/images/hamburger.svg" alt="hamburger menu"/></button></div><div class="js-mobile-nav-container dn"><div class="flex flex-column flex-wrap bg-gray9 o-95 absolute ph3 z-1 left-0 right-0 mx-4"><div class="pv3 ph2 tl"><a href="/tag/ai/" class="no-underline gray1 f4 fw7">AI</a></div><div class="pv3 ph2 tl"><a href="/tag/developers/" class="no-underline gray1 f4 fw7">Developers</a></div><div class="pv3 ph2 tl"><a href="/tag/cloudflare-radar/" class="no-underline gray1 f4 fw7">Radar</a></div><div class="pv3 ph2 tl"><a href="/tag/product-news/" class="no-underline gray1 f4 fw7">Product News</a></div><div class="pv3 ph2 tl"><a href="/tag/security/" class="no-underline gray1 f4 fw7">Security</a></div><div class="pv3 ph2 tl"><a href="/tag/policy/" class="no-underline gray1 f4 fw7">Policy &amp; Legal</a></div><div class="pv3 ph2 tl"><a href="/tag/zero-trust/" class="no-underline gray1 f4 fw7">Zero Trust</a></div><div class="pv3 ph2 tl"><a href="/tag/speed-and-reliability/" class="no-underline gray1 f4 fw7">Speed &amp; Reliability</a></div><div class="pv3 ph2 tl"><a href="/tag/life-at-cloudflare/" class="no-underline gray1 f4 fw7">Life at Cloudflare</a></div><div class="pv3 ph2 tl"><a href="/tag/partners/" class="no-underline gray1 f4 fw7">Partners</a></div></div></div></nav><nav id="nav" class="w-100 bb-0 bb-l b--black-10 z-1"><div id="desktop-nav-items-container" class="flex flex-wrap justify-between items-center mw8 center mv3 mv0-l"><div data-tag="ai" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/ai/" class="no-underline gray1 f2 fw5 pv3">AI</a></div><div data-tag="developers" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/developers/" class="no-underline gray1 f2 fw5 pv3">Developers</a></div><div data-tag="cloudflare-radar" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/cloudflare-radar/" class="no-underline gray1 f2 fw5 pv3">Radar</a></div><div data-tag="product-news" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/product-news/" class="no-underline gray1 f2 fw5 pv3">Product News</a></div><div data-tag="security" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/security/" class="no-underline gray1 f2 fw5 pv3">Security</a></div><div data-tag="policy" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/policy/" class="no-underline gray1 f2 fw5 pv3">Policy &amp; Legal</a></div><div data-tag="zero-trust" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/zero-trust/" class="no-underline gray1 f2 fw5 pv3">Zero Trust</a></div><div data-tag="speed-and-reliability" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/speed-and-reliability/" class="no-underline gray1 f2 fw5 pv3">Speed &amp; Reliability</a></div><div data-tag="life-at-cloudflare" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/life-at-cloudflare/" class="no-underline gray1 f2 fw5 pv3">Life at Cloudflare</a></div><div data-tag="partners" class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3"><a href="/tag/partners/" class="no-underline gray1 f2 fw5 pv3">Partners</a></div><div class="nav-item ml2 mr3 dn db-l pv3" data-tag="search icon"><a href="/search/"><img id="search-icon" class="h-6 w-6" src="/images/magnifier.svg" alt="magnifier icon"/></a></div></div></nav><!--astro:end--></astro-island><progress class="reading-progress" value="0" max="100" aria-label="Reading progress"></progress><script>async function replaceServerIsland(id, r) { let s = document.querySelector(`script[data-island-id="${id}"]`); if (!s || r.status !== 200 || r.headers.get('content-type')?.split(';')[0].trim() !== 'text/html') return; let html = await r.text(); while (s.previousSibling && s.previousSibling.nodeType !== 8 && s.previousSibling.data !== '[if astro]>server-island-start<![endif]') s.previousSibling.remove(); s.previousSibling?.remove(); s.before(document.createRange().createContextualFragment(html)); s.remove(); }</script><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z97TC2" prefix="r3" component-url="/_astro/Post.CBpneQWr.js" component-export="Post" renderer-url="/_astro/client.BMDBmNz6.js" props="{&quot;post&quot;:[0,{&quot;id&quot;:[0,&quot;4TlYGwUzSQPqAGP7gIEton&quot;],&quot;title&quot;:[0,&quot;Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;slug&quot;:[0,&quot;python-workers-advancements&quot;],&quot;excerpt&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;&lt;sup&gt;&lt;i&gt;Note: This post was updated with additional details regarding AWS Lambda.&lt;/i&gt;&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;Last year we announced &lt;a href=\&quot;https://blog.cloudflare.com/python-workers/\&quot;&gt;&lt;u&gt;basic support for Python Workers&lt;/u&gt;&lt;/a&gt;, allowing Python developers to ship Python to region: Earth in a single command and take advantage of the &lt;a href=\&quot;https://workers.cloudflare.com/\&quot;&gt;&lt;u&gt;Workers platform&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Since then, we’ve been hard at work making the &lt;a href=\&quot;https://developers.cloudflare.com/workers/languages/python/\&quot;&gt;&lt;u&gt;Python experience on Workers&lt;/u&gt;&lt;/a&gt; feel great. We’ve focused on bringing package support to the platform, a reality that’s now here — with exceptionally fast cold starts and a Python-native developer experience.&lt;/p&gt;&lt;p&gt;This means a change in how packages are incorporated into a Python Worker. Instead of offering a limited set of built-in packages, we now support any &lt;a href=\&quot;https://pyodide.org/en/stable/usage/packages-in-pyodide.html\&quot;&gt;&lt;u&gt;package supported by Pyodide&lt;/u&gt;&lt;/a&gt;, the WebAssembly runtime powering Python Workers. This includes all pure Python packages, as well as many packages that rely on dynamic libraries. We also built tooling around &lt;a href=\&quot;https://docs.astral.sh/uv/\&quot;&gt;&lt;u&gt;uv&lt;/u&gt;&lt;/a&gt; to make package installation easy.&lt;/p&gt;&lt;p&gt;We’ve also implemented dedicated memory snapshots to reduce cold start times. These snapshots result in serious speed improvements over other serverless Python vendors. In cold start tests using common packages, Cloudflare Workers start over &lt;b&gt;2.4x faster than AWS Lambda&lt;/b&gt; &lt;b&gt;without SnapStart &lt;/b&gt;and &lt;b&gt;3x faster than Google Cloud Run&lt;/b&gt;.&lt;/p&gt;&lt;p&gt;In this blog post, we’ll explain what makes Python Workers unique and share some of the technical details of how we’ve achieved the wins described above. But first, for those who may not be familiar with Workers or serverless platforms – and especially those coming from a Python background — let us share why you might want to use Workers at all.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;deploying-python-globally-in-2-minutes\&quot;&gt;Deploying Python globally in 2 minutes&lt;/h3&gt;\n      &lt;a href=\&quot;#deploying-python-globally-in-2-minutes\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Part of the magic of Workers is simple code and easy global deployments. Let&amp;#39;s start by showing how you can deploy a FastAPI app across the world with fast cold starts in less than two minutes.&lt;/p&gt;&lt;p&gt;A simple Worker using FastAPI can be implemented in a handful of lines:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Rust\&quot;&gt;&lt;code class=\&quot;language-Rust\&quot;&gt;from fastapi import FastAPI\nfrom workers import WorkerEntrypoint\nimport asgi\n\napp = FastAPI()\n\n@app.get(&amp;quot;/&amp;quot;)\nasync def root():\n   return {&amp;quot;message&amp;quot;: &amp;quot;This is FastAPI on Workers&amp;quot;}\n\nclass Default(WorkerEntrypoint):\n   async def fetch(self, request):\n       return await asgi.fetch(app, request.js_object, self.env)&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;To deploy something similar, just make sure you have &lt;code&gt;uv&lt;/code&gt; and &lt;code&gt;npm&lt;/code&gt; installed, then run the following:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Shell\&quot;&gt;&lt;code class=\&quot;language-Shell\&quot;&gt;$ uv tool install workers-py\n$ pywrangler init --template \\\n    https://github.com/cloudflare/python-workers-examples/03-fastapi\n$ pywrangler deploy&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;With just a little code and a &lt;code&gt;pywrangler deploy&lt;/code&gt;, you’ve now deployed your application across Cloudflare’s edge network that extends to &lt;a href=\&quot;https://www.cloudflare.com/network/\&quot;&gt;&lt;u&gt;330 locations across 125 countries&lt;/u&gt;&lt;/a&gt;. No worrying about infrastructure or scaling.&lt;/p&gt;&lt;p&gt;And for many use cases, Python Workers are completely free. Our free tier offers 100,000 requests per day and 10ms CPU time per invocation. For more information, check out the &lt;a href=\&quot;https://developers.cloudflare.com/workers/platform/pricing/\&quot;&gt;&lt;u&gt;pricing page in our documentation&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;For more examples, &lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples\&quot;&gt;&lt;u&gt;check out the repo in GitHub&lt;/u&gt;&lt;/a&gt;. And read on to find out more about Python Workers.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;so-what-can-you-do-with-python-workers\&quot;&gt;So what can you do with Python Workers?&lt;/h3&gt;\n      &lt;a href=\&quot;#so-what-can-you-do-with-python-workers\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Now that you’ve got a Worker, just about anything is possible. You write the code, so you get to decide. Your Python Worker receives HTTP requests and can make requests to any server on the public Internet.&lt;/p&gt;&lt;p&gt;You can set up cron triggers, so your Worker runs on a regular schedule. Plus, if you have more complex requirements, you can make use of &lt;a href=\&quot;https://blog.cloudflare.com/python-workflows/\&quot;&gt;&lt;u&gt;Workflows for Python Workers&lt;/u&gt;&lt;/a&gt;, or even long-running WebSocket servers and clients &lt;a href=\&quot;https://developers.cloudflare.com/durable-objects/get-started/\&quot;&gt;&lt;u&gt;using Durable Objects&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Here are more examples of the sorts of things you can do using Python Workers:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/03-fastapi\&quot;&gt;&lt;u&gt;Render HTML templates on the edge, with a library like Jinja, while fetching dynamic content directly from your server&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/11-opengraph\&quot;&gt;&lt;u&gt;Modify the response from your server — for example, you can inject opengraph tags into your HTML dynamically, based on the content requested&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/15-chatroom\&quot;&gt;&lt;u&gt;Build a chat room using Durable Objects and WebSockets&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/14-websocket-stream-consumer\&quot;&gt;&lt;u&gt;Consume data from WebSocket connections, like the Bluesky firehose&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/12-image-gen\&quot;&gt;&lt;u&gt;Generate images using the Pillow Python package&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://github.com/cloudflare/python-workers-examples/tree/main/13-js-api-pygments\&quot;&gt;&lt;u&gt;Write a small Python Worker that exposes the API of a Python package, and then access it from your JavaScript Worker using RPC&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;faster-package-cold-starts\&quot;&gt;Faster package cold starts&lt;/h3&gt;\n      &lt;a href=\&quot;#faster-package-cold-starts\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Serverless platforms like Workers save you money by only running your code when it’s necessary to do so. This means that if your Worker isn’t receiving requests, it may be shut down and will need to be restarted once a new request comes in. This typically incurs a resource overhead we refer to as the “cold start.” It’s important to keep these as short as possible to minimize latency for end users.&lt;/p&gt;&lt;p&gt;In standard Python, booting the runtime is expensive, and our initial implementation of Python Workers focused on making the &lt;i&gt;runtime&lt;/i&gt; boot fast. However, we quickly realized that this wasn’t enough. Even if the Python runtime boots quickly, in real-world scenarios the initial startup usually includes loading modules from packages, and unfortunately, in Python many popular packages can take several seconds to load.&lt;/p&gt;&lt;p&gt;We set out to make cold starts fast, regardless of whether packages were loaded.&lt;/p&gt;&lt;p&gt;To measure realistic cold start performance, we set up a benchmark that imports common packages, as well as a benchmark running a “hello world” using a bare Python runtime. Standard Lambda is able to &lt;a href=\&quot;https://cold.picheta.me/#bare\&quot;&gt;&lt;u&gt;start just the runtime&lt;/u&gt;&lt;/a&gt; quickly, but once you need to import packages, the cold start times shoot up. In order to optimize for faster cold starts with packages, you can use SnapStart on Lambda (which we will be adding to the linked benchmarks shortly). This incurs a cost to store the snapshot and an additional cost on every restore. Python Workers will automatically apply memory snapshots for free for every Python Worker.&lt;/p&gt;&lt;p&gt;Here are the average cold start times when loading three common packages (&lt;a href=\&quot;https://www.python-httpx.org/\&quot;&gt;&lt;u&gt;httpx&lt;/u&gt;&lt;/a&gt;, &lt;a href=\&quot;https://fastapi.tiangolo.com/\&quot;&gt;&lt;u&gt;fastapi&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://docs.pydantic.dev/latest/\&quot;&gt;&lt;u&gt;pydantic&lt;/u&gt;&lt;/a&gt;):&lt;/p&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Platform&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Mean Cold Start (secs)&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Cloudflare Python Workers&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;1.027&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;AWS Lambda (without SnapStart)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;2.502&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Google Cloud Run&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;3.069&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;In this case, &lt;b&gt;Cloudflare Python Workers have 2.4x faster cold starts than AWS Lambda without SnapStart and 3x faster cold starts than Google Cloud Run&lt;/b&gt;. We achieved these low cold start numbers by using memory snapshots, and in a later section we explain how we did so.&lt;/p&gt;&lt;p&gt;We are regularly running these benchmarks. Go &lt;a href=\&quot;https://cold.picheta.me/#bare\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt; for up-to-date data and more info on our testing methodology.&lt;/p&gt;&lt;p&gt;We’re architecturally different from these other platforms — namely, &lt;a href=\&quot;https://developers.cloudflare.com/workers/reference/how-workers-works/\&quot;&gt;&lt;u&gt;Workers is isolate-based&lt;/u&gt;&lt;/a&gt;. Because of that, our aims are high, and we are planning for a zero cold start future.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;package-tooling-integrated-with-uv\&quot;&gt;Package tooling integrated with uv&lt;/h3&gt;\n      &lt;a href=\&quot;#package-tooling-integrated-with-uv\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The diverse package ecosystem is a large part of what makes Python so amazing. That’s why we’ve been hard at work ensuring that using packages in Workers is as easy as possible.&lt;/p&gt;&lt;p&gt;We realised that working with the existing Python tooling is the best path towards a great development experience. So we picked the &lt;code&gt;uv&lt;/code&gt; package and project manager, as it’s fast, mature, and gaining momentum in the Python ecosystem.&lt;/p&gt;&lt;p&gt;We built our own tooling around &lt;code&gt;uv&lt;/code&gt; called &lt;a href=\&quot;https://github.com/cloudflare/workers-py#pywrangler\&quot;&gt;&lt;u&gt;pywrangler&lt;/u&gt;&lt;/a&gt;. This tool essentially performs the following actions:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Reads your Worker’s pyproject.toml file to determine the dependencies specified in it&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Includes your dependencies in a &lt;code&gt;python_modules&lt;/code&gt; folder that lives in your Worker&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Pywrangler calls out to &lt;code&gt;uv&lt;/code&gt; to install the dependencies in a way that is compatible with Python Workers, and calls out to &lt;code&gt;wrangler&lt;/code&gt; when developing locally or deploying Workers. &lt;/p&gt;&lt;p&gt;Effectively this means that you just need to run &lt;code&gt;pywrangler dev&lt;/code&gt; and &lt;code&gt;pywrangler&lt;/code&gt; &lt;code&gt;deploy&lt;/code&gt; to test your Worker locally and deploy it. &lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;type-hints\&quot;&gt;Type hints&lt;/h3&gt;\n      &lt;a href=\&quot;#type-hints\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;You can generate type hints for all of the &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/bindings/\&quot;&gt;&lt;u&gt;bindings&lt;/u&gt;&lt;/a&gt; defined in your wrangler config using &lt;code&gt;pywrangler types&lt;/code&gt;. These type hints will work with &lt;a href=\&quot;https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance\&quot;&gt;&lt;u&gt;Pylance&lt;/u&gt;&lt;/a&gt; or with recent versions of &lt;a href=\&quot;https://mypy-lang.org/\&quot;&gt;&lt;u&gt;mypy&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;To generate the types, we use &lt;a href=\&quot;https://developers.cloudflare.com/workers/wrangler/commands/#types\&quot;&gt;&lt;u&gt;wrangler types&lt;/u&gt;&lt;/a&gt; to create typescript type hints, then we use the typescript compiler to generate an abstract syntax tree for the types. Finally, we use the TypeScript hints — such as whether a JS object has an iterator field — to generate &lt;code&gt;mypy&lt;/code&gt; type hints that work with the Pyodide foreign function interface.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;decreasing-cold-start-duration-using-snapshots\&quot;&gt;Decreasing cold start duration using snapshots&lt;/h3&gt;\n      &lt;a href=\&quot;#decreasing-cold-start-duration-using-snapshots\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Python startup is generally quite slow and importing a Python module can trigger a large amount of work. We avoid running Python startup during a cold start using memory snapshots.&lt;/p&gt;&lt;p&gt;When a Worker is deployed, we execute the Worker’s top-level scope and then take a memory snapshot and store it alongside your Worker. Whenever we are starting a new isolate for the Worker, we restore the memory snapshot and the Worker is ready to handle requests, with no need to execute any Python code in preparation. This improves cold start times considerably. For instance, starting a Worker that imports &lt;code&gt;fastapi&lt;/code&gt;, &lt;code&gt;httpx&lt;/code&gt; and &lt;code&gt;pydantic&lt;/code&gt; without snapshots takes around 10 seconds. With snapshots, it takes 1 second.&lt;/p&gt;&lt;p&gt;The fact that Pyodide is built on WebAssembly enables this. We can easily capture the full linear memory of the runtime and restore it. &lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;memory-snapshots-and-entropy\&quot;&gt;Memory snapshots and Entropy&lt;/h4&gt;\n      &lt;a href=\&quot;#memory-snapshots-and-entropy\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;WebAssembly runtimes do not require features like address space layout randomization for security, so most of the difficulties with memory snapshots on a modern operating system do not arise. Just like with native memory snapshots, we still have to carefully handle entropy at startup to avoid using the &lt;a href=\&quot;https://xkcd.com/221/\&quot;&gt;&lt;u&gt;XKCD random number generator&lt;/u&gt;&lt;/a&gt; (we’re &lt;a href=\&quot;https://www.cloudflare.com/learning/ssl/lava-lamp-encryption/\&quot;&gt;&lt;u&gt;very into actual randomness&lt;/u&gt;&lt;/a&gt;).&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2Q2LYb3LZhfC2q3vQCFr1R/ff8f229715a0d37484585664c61908dc/image1.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;400\&quot; height=\&quot;144\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;By snapshotting memory, we might inadvertently lock in a seed value for randomness. In this case, future calls for “random” numbers would consistently return the same sequence of values across many requests.&lt;/p&gt;&lt;p&gt;Avoiding this is particularly challenging because Python uses a lot of entropy at startup. These include the libc functions &lt;code&gt;getentropy()&lt;/code&gt; and &lt;code&gt;getrandom()&lt;/code&gt; and also reading from &lt;code&gt;/dev/random&lt;/code&gt; and &lt;code&gt;/dev/urandom&lt;/code&gt;. All of these functions share the same implementation in terms of the JavaScript &lt;code&gt;crypto.getRandomValues()&lt;/code&gt; function.&lt;/p&gt;&lt;p&gt;In Cloudflare Workers, &lt;code&gt;crypto.getRandomValues()&lt;/code&gt; has always been disabled at startup in order to allow us to switch to using memory snapshots in the future. Unfortunately, the Python interpreter cannot bootstrap without calling this function. And many packages also require entropy at startup time. There are essentially two purposes for this entropy:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Hash seeds for hash randomization&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Seeds for pseudorandom number generators&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Hash randomization we do at startup time and accept the cost that each specific Worker has a fixed hash seed. Python has no mechanism to allow replacing the hash seed after startup.&lt;/p&gt;&lt;p&gt;For pseudorandom number generators (PRNG), we take the following approach:&lt;/p&gt;&lt;p&gt;At deploy time:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Seed the PRNG with a fixed “poison seed”, then record the PRNG state.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Replace all APIs that call into the PRNG with an overlay that fails the deployment with a user error.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Execute the top level scope of user code.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Capture the snapshot.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;At run time:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Assert that the PRNG state is unchanged. If it changed, we forgot the overlay for some method. Fail the deployment with an internal error.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;After restoring the snapshot, reseed the random number generator before executing any handlers.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;With this, we can ensure that PRNGs can be used while the Worker is running, but stop Workers from using them during initialization and pre-snapshot.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;memory-snapshots-and-webassembly-state\&quot;&gt;Memory snapshots and WebAssembly state&lt;/h4&gt;\n      &lt;a href=\&quot;#memory-snapshots-and-webassembly-state\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;An additional difficulty arises when creating memory snapshots on WebAssembly: The memory snapshot we are saving consists only of the WebAssembly linear memory, but the full state of the Pyodide WebAssembly instance is not contained in the linear memory. &lt;/p&gt;&lt;p&gt;There are two tables outside of this memory.&lt;/p&gt;&lt;p&gt;One table holds the values of function pointers. Traditional computers use a “Von Neumann” architecture, which means that code exists in the same memory space as data, so that calling a function pointer is a jump to some memory address. WebAssembly has a “Harvard architecture” where code lives in a separate address space. This is key to most of the security guarantees of WebAssembly and in particular why WebAssembly does not need address space layout randomization. A function pointer in WebAssembly is an index into the function pointer table.&lt;/p&gt;&lt;p&gt;A second table holds all JavaScript objects referenced from Python. JavaScript objects cannot be directly stored into memory because the JavaScript virtual machine forbids directly obtaining a pointer to a JavaScript object. Instead, they are stored into a table and represented in WebAssembly as an index into the table.&lt;/p&gt;&lt;p&gt;We need to ensure that both of these tables are in exactly the same state after we restore a snapshot as they were when we captured the snapshot.&lt;/p&gt;&lt;p&gt;The function pointer table is always in the same state when the WebAssembly instance is initialized and is updated by the dynamic loader when we load dynamic libraries — native Python packages like numpy. &lt;/p&gt;&lt;p&gt;To handle dynamic loading:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;When taking the snapshot, we patch the loader to record the load order of dynamic libraries, the address in memory where the metadata for each library is allocated, and the function pointer table base address for relocations. &lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;When restoring the snapshot, we reload the dynamic libraries in the same order, and we use a patched memory allocator to place the metadata in the same locations. We assert that the current size of the function pointer table matches the function pointer table base we recorded for the dynamic library.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;All of this ensures that each function pointer has the same meaning after we’ve restored the snapshot as it had when we took the snapshot.&lt;/p&gt;&lt;p&gt;To handle the JavaScript references, we implemented a fairly limited system. If a JavaScript object is accessible from globalThis by a series of property accesses, we record those property accesses and replay them when restoring the snapshot. If any reference exists to a JavaScript object that is not accessible in this way, we fail deployment of the Worker. This is good enough to deal with all the existing Python packages with Pyodide support, which do top level imports like:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Python\&quot;&gt;&lt;code class=\&quot;language-Python\&quot;&gt;from js import fetch&lt;/pre&gt;&lt;/code&gt;\n            \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;reducing-cold-start-frequency-using-sharding\&quot;&gt;Reducing cold start frequency using sharding&lt;/h3&gt;\n      &lt;a href=\&quot;#reducing-cold-start-frequency-using-sharding\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Another important characteristic of our performance strategy for Python Workers is sharding. There is a very detailed description of what went into its implementation &lt;a href=\&quot;https://blog.cloudflare.com/eliminating-cold-starts-2-shard-and-conquer/\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt;. In short, we now route requests to existing Worker instances, whereas before we might have chosen to start a new instance.&lt;/p&gt;&lt;p&gt;Sharding was actually enabled for Python Workers first and proved to be a great test bed for it. A cold start is far more expensive in Python than in JavaScript, so ensuring requests are routed to an already-running isolate is especially important.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;where-do-we-go-from-here\&quot;&gt;Where do we go from here?&lt;/h3&gt;\n      &lt;a href=\&quot;#where-do-we-go-from-here\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;This is just the start. We have many plans to make Python Workers better:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;More developer-friendly tooling&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Even faster cold starts by utilising our isolate architecture&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Support for more packages&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Support for native TCP sockets, native WebSockets, and more bindings&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;To learn more about Python Workers, check out the documentation available &lt;a href=\&quot;https://developers.cloudflare.com/workers/languages/python/\&quot;&gt;&lt;u&gt;here&lt;/u&gt;&lt;/a&gt;. To get help, be sure to join our &lt;a href=\&quot;https://discord.cloudflare.com/\&quot;&gt;&lt;u&gt;Discord&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2025-12-08T14:00+08:00&quot;],&quot;updated_at&quot;:[0,&quot;2026-01-09T03:15:56.711Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4Wu87IZkO6g7IBGyjMqYcQ/4658c65f65a28d9636ee0f2bdd3a433c/image3.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;bEVrfgaUfNXu577TT9qb8&quot;],&quot;name&quot;:[0,&quot;Python&quot;],&quot;slug&quot;:[0,&quot;python&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;Dominik Picheta&quot;],&quot;slug&quot;:[0,&quot;dominik&quot;],&quot;bio&quot;:[0,null],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4NQ8NXOh8kIeqTdhVt29Y0/f10eccb58f426dd53a2623dd2d290bff/dominik.jpg&quot;],&quot;location&quot;:[0,&quot;London, England&quot;],&quot;website&quot;:[0,null],&quot;twitter&quot;:[0,&quot;@d0m96&quot;],&quot;facebook&quot;:[0,null],&quot;publiclyIndex&quot;:[0,true]}],[0,{&quot;name&quot;:[0,&quot;Hood Chatham&quot;],&quot;slug&quot;:[0,&quot;hood&quot;],&quot;bio&quot;:[0,null],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5NdWrndYBFiQedDDrsFkey/1d7b25517af6f36b842ee4a94a2d4d84/hood.png&quot;],&quot;location&quot;:[0,null],&quot;website&quot;:[0,null],&quot;twitter&quot;:[0,null],&quot;facebook&quot;:[0,null],&quot;publiclyIndex&quot;:[0,true]}],[0,{&quot;name&quot;:[0,&quot;Mike Nomitch&quot;],&quot;slug&quot;:[0,&quot;mike-nomitch&quot;],&quot;bio&quot;:[0],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3Ub221L51x1p3FZJbnblyn/23b50473b99404db0baf42921edd269c/_tmp_mini_magick20240415-2-6izqhi.jpg&quot;],&quot;location&quot;:[0],&quot;website&quot;:[0],&quot;twitter&quot;:[0],&quot;facebook&quot;:[0],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;LOC: Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;Translated for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;Translated for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;Translated for Locale&quot;],&quot;koKR&quot;:[0,&quot;Translated for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/python-workers-advancements&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;Python Workers redux: fast cold starts, packages, and a uv-first workflow&quot;],&quot;description&quot;:[0,&quot;Recent advancements in Cloudflare Python Workers means fast cold starts, comprehensive package support, and a great developer experience. We explain how they were achieved and show how Python can be used to build serverless applications on Cloudflare.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5QnWOD5av7pqJN0WHRsE86/5a9a08c40e392ff1d8414c10c07b87c6/OG_Share_2024_-_2025-12-04T114957.559.png&quot;]}],&quot;publicly_index&quot;:[0,true]}],&quot;initialReadingTime&quot;:[0,&quot;9&quot;],&quot;relatedPosts&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;37h1uszA2vuOfmXb3oAnZr&quot;],&quot;title&quot;:[0,&quot;We deserve a better streams API for JavaScript&quot;],&quot;slug&quot;:[0,&quot;a-better-web-streams-api&quot;],&quot;excerpt&quot;:[0,&quot;The Web streams API has become ubiquitous in JavaScript runtimes but was designed for a different era. Here&#39;s what a modern streaming API could (should?) look like.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;Handling data in streams is fundamental to how we build applications. To make streaming work everywhere, the &lt;a href=\&quot;https://streams.spec.whatwg.org/\&quot;&gt;&lt;u&gt;WHATWG Streams Standard&lt;/u&gt;&lt;/a&gt; (informally known as &amp;quot;Web streams&amp;quot;) was designed to establish a common API to work across browsers and servers. It shipped in browsers, was adopted by Cloudflare Workers, Node.js, Deno, and Bun, and became the foundation for APIs like &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\&quot;&gt;&lt;u&gt;fetch()&lt;/u&gt;&lt;/a&gt;. It&amp;#39;s a significant undertaking, and the people who designed it were solving hard problems with the constraints and tools they had at the time.&lt;/p&gt;&lt;p&gt;But after years of building on Web streams – implementing them in both Node.js and Cloudflare Workers, debugging production issues for customers and runtimes, and helping developers work through far too many common pitfalls – I&amp;#39;ve come to believe that the standard API has fundamental usability and performance issues that cannot be fixed easily with incremental improvements alone. The problems aren&amp;#39;t bugs; they&amp;#39;re consequences of design decisions that may have made sense a decade ago, but don&amp;#39;t align with how JavaScript developers write code today.&lt;/p&gt;&lt;p&gt;This post explores some of the fundamental issues I see with Web streams and presents an alternative approach built around JavaScript language primitives that demonstrate something better is possible. &lt;/p&gt;&lt;p&gt;In benchmarks, this alternative can run anywhere between 2x to &lt;i&gt;120x&lt;/i&gt; faster than Web streams in every runtime I&amp;#39;ve tested it on (including Cloudflare Workers, Node.js, Deno, Bun, and every major browser). The improvements are not due to clever optimizations, but fundamentally different design choices that more effectively leverage modern JavaScript language features. I&amp;#39;m not here to disparage the work that came before; I&amp;#39;m here to start a conversation about what can potentially come next.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;where-were-coming-from\&quot;&gt;Where we&amp;#39;re coming from&lt;/h2&gt;\n      &lt;a href=\&quot;#where-were-coming-from\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The Streams Standard was developed between 2014 and 2016 with an ambitious goal to provide &amp;quot;APIs for creating, composing, and consuming streams of data that map efficiently to low-level I/O primitives.&amp;quot; Before Web streams, the web platform had no standard way to work with streaming data.&lt;/p&gt;&lt;p&gt;Node.js already had its own &lt;a href=\&quot;https://nodejs.org/api/stream.html\&quot;&gt;&lt;u&gt;streaming API&lt;/u&gt;&lt;/a&gt; at the time that was ported to also work in browsers, but WHATWG chose not to use it as a starting point given that it is chartered to only consider the needs of Web browsers. Server-side runtimes only adopted Web streams later, after Cloudflare Workers and Deno each emerged with first-class Web streams support and cross-runtime compatibility became a priority.&lt;/p&gt;&lt;p&gt;The design of Web streams predates async iteration in JavaScript. The &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of\&quot;&gt;&lt;code&gt;&lt;u&gt;for await...of&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; syntax didn&amp;#39;t land until &lt;a href=\&quot;https://262.ecma-international.org/9.0/\&quot;&gt;&lt;u&gt;ES2018&lt;/u&gt;&lt;/a&gt;, two years after the Streams Standard was initially finalized. This timing meant the API couldn&amp;#39;t initially leverage what would eventually become the idiomatic way to consume asynchronous sequences in JavaScript. Instead, the spec introduced its own reader/writer acquisition model, and that decision rippled through every aspect of the API.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3X0niHShBlgF4LlpWYB7eC/f0bbf35f12ecc98a3888e6e3835acf3a/1.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;1042\&quot; height=\&quot;421\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;excessive-ceremony-for-common-operations\&quot;&gt;Excessive ceremony for common operations&lt;/h4&gt;\n      &lt;a href=\&quot;#excessive-ceremony-for-common-operations\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The most common task with streams is reading them to completion. Here&amp;#39;s what that looks like with Web streams:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// First, we acquire a reader that gives an exclusive lock\n// on the stream...\nconst reader = stream.getReader();\nconst chunks = [];\ntry {\n  // Second, we repeatedly call read and await on the returned\n  // promise to either yield a chunk of data or indicate we&amp;#039;re\n  // done.\n  while (true) {\n    const { value, done } = await reader.read();\n    if (done) break;\n    chunks.push(value);\n  }\n} finally {\n  // Finally, we release the lock on the stream\n  reader.releaseLock();\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;You might assume this pattern is inherent to streaming. It isn&amp;#39;t. The reader acquisition, the lock management, and the &lt;code&gt;{ value, done }&lt;/code&gt; protocol are all just design choices, not requirements. They are artifacts of how and when the Web streams spec was written. Async iteration exists precisely to handle sequences that arrive over time, but async iteration did not yet exist when the streams specification was written. The complexity here is pure API overhead, not fundamental necessity.&lt;/p&gt;&lt;p&gt;Consider the alternative approach now that Web streams do support &lt;code&gt;for await...of&lt;/code&gt;:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const chunks = [];\nfor await (const chunk of stream) {\n  chunks.push(chunk);\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;This is better in that there is far less boilerplate, but it doesn&amp;#39;t solve everything. Async iteration was retrofitted onto an API that wasn&amp;#39;t designed for it, and it shows. Features like &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBReader\&quot;&gt;&lt;u&gt;BYOB (bring your own buffer)&lt;/u&gt;&lt;/a&gt; reads aren&amp;#39;t accessible through iteration. The underlying complexity of readers, locks, and controllers are still there, just hidden. When something does go wrong, or when additional features of the API are needed, developers find themselves back in the weeds of the original API, trying to understand why their stream is &amp;quot;locked&amp;quot; or why &lt;code&gt;releaseLock()&lt;/code&gt; didn&amp;#39;t do what they expected or hunting down bottlenecks in code they don&amp;#39;t control.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;the-locking-problem\&quot;&gt;The locking problem&lt;/h4&gt;\n      &lt;a href=\&quot;#the-locking-problem\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Web streams use a locking model to prevent multiple consumers from interleaving reads. When you call &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/getReader\&quot;&gt;&lt;code&gt;&lt;u&gt;getReader()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;, the stream becomes locked. While locked, nothing else can read from the stream directly, pipe it, or even cancel it – only the code that is actually holding the reader can.&lt;/p&gt;&lt;p&gt;This sounds reasonable until you see how easily it goes wrong:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;async function peekFirstChunk(stream) {\n  const reader = stream.getReader();\n  const { value } = await reader.read();\n  // Oops — forgot to call reader.releaseLock()\n  // And the reader is no longer available when we return\n  return value;\n}\n\nconst first = await peekFirstChunk(stream);\n// TypeError: Cannot obtain lock — stream is permanently locked\nfor await (const chunk of stream) { /* never runs */ }&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Forgetting &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultReader/releaseLock\&quot;&gt;&lt;code&gt;&lt;u&gt;releaseLock()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; permanently breaks the stream. The &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/locked\&quot;&gt;&lt;code&gt;&lt;u&gt;locked&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;&lt;code&gt; &lt;/code&gt;property tells you that a stream is locked, but not why, by whom, or whether the lock is even still usable. &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/pipeTo\&quot;&gt;&lt;u&gt;Piping&lt;/u&gt;&lt;/a&gt; internally acquires locks, making streams unusable during pipe operations in ways that aren&amp;#39;t obvious.&lt;/p&gt;&lt;p&gt;The semantics around releasing locks with pending reads were also unclear for years. If you called read() but didn&amp;#39;t await it, then called releaseLock(), what happened? The spec was recently clarified to cancel pending reads on lock release – but implementations varied, and code that relied on the previous unspecified behavior can break.&lt;/p&gt;&lt;p&gt;That said, it&amp;#39;s important to recognize that locking in itself is not bad. It does, in fact, serve an important purpose to ensure that applications properly and orderly consume or produce data. The key challenge is with the original manual implementation of it using APIs like &lt;code&gt;getReader() &lt;/code&gt;and &lt;code&gt;releaseLock()&lt;/code&gt;. With the arrival of automatic lock and reader management with async iterables, dealing with locks from the users point of view became a lot easier.&lt;/p&gt;&lt;p&gt;For implementers, the locking model adds a fair amount of non-trivial internal bookkeeping. Every operation must check lock state, readers must be tracked, and the interplay between locks, cancellation, and error states creates a matrix of edge cases that must all be handled correctly.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;byob-complexity-without-payoff\&quot;&gt;BYOB: complexity without payoff&lt;/h4&gt;\n      &lt;a href=\&quot;#byob-complexity-without-payoff\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBReader\&quot;&gt;&lt;u&gt;BYOB (bring your own buffer)&lt;/u&gt;&lt;/a&gt; reads were designed to let developers reuse memory buffers when reading from streams, an important optimization intended for high-throughput scenarios. The idea is sound: instead of allocating new buffers for each chunk, you provide your own buffer and the stream fills it.&lt;/p&gt;&lt;p&gt;In practice, (and yes, there are always exceptions to be found) BYOB is rarely used to any measurable benefit. The API is substantially more complex than default reads, requiring a separate reader type (&lt;code&gt;ReadableStreamBYOBReader&lt;/code&gt;) and other specialized classes (e.g. &lt;code&gt;ReadableStreamBYOBRequest&lt;/code&gt;), careful buffer lifecycle management, and understanding of &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer#transferring_arraybuffers\&quot;&gt;&lt;code&gt;&lt;u&gt;ArrayBuffer&lt;/u&gt;&lt;/code&gt;&lt;u&gt; detachment&lt;/u&gt;&lt;/a&gt; semantics. When you pass a buffer to a BYOB read, the buffer becomes detached – transferred to the stream – and you get back a different view over potentially different memory. This transfer-based model is error-prone and confusing:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const reader = stream.getReader({ mode: &amp;#039;byob&amp;#039; });\nconst buffer = new ArrayBuffer(1024);\nlet view = new Uint8Array(buffer);\n\nconst result = await reader.read(view);\n// &amp;#039;view&amp;#039; should now be detached and unusable\n// (it isn&amp;#039;t always in every impl)\n// result.value is a NEW view, possibly over different memory\nview = result.value; // Must reassign&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;BYOB also can&amp;#39;t be used with async iteration or TransformStreams, so developers who want zero-copy reads are forced back into the manual reader loop.&lt;/p&gt;&lt;p&gt;For implementers, BYOB adds significant complexity. The stream must track pending BYOB requests, handle partial fills, manage buffer detachment correctly, and coordinate between the BYOB reader and the underlying source. The &lt;a href=\&quot;https://github.com/web-platform-tests/wpt/tree/master/streams/readable-byte-streams\&quot;&gt;&lt;u&gt;Web Platform Tests for readable byte streams&lt;/u&gt;&lt;/a&gt; include dedicated test files just for BYOB edge cases: detached buffers, bad views, response-after-enqueue ordering, and more.&lt;/p&gt;&lt;p&gt;BYOB ends up being complex for both users and implementers, yet sees little adoption in practice. Most developers stick with default reads and accept the allocation overhead.&lt;/p&gt;&lt;p&gt;Most userland implementations of custom ReadableStream instances do not typically bother with all the ceremony required to correctly implement both default and BYOB read support in a single stream – and for good reason. It&amp;#39;s difficult to get right and most of the time consuming code is typically going to fallback on the default read path. The example below shows what a &amp;quot;correct&amp;quot; implementation would need to do. It&amp;#39;s big, complex, and error prone, and not a level of complexity that the typical developer really wants to have to deal with:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;new ReadableStream({\n    type: &amp;#039;bytes&amp;#039;,\n    \n    async pull(controller: ReadableByteStreamController) {      \n      if (offset &amp;gt;= totalBytes) {\n        controller.close();\n        return;\n      }\n      \n      // Check for BYOB request FIRST\n      const byobRequest = controller.byobRequest;\n      \n      if (byobRequest) {\n        // === BYOB PATH ===\n        // Consumer provided a buffer - we MUST fill it (or part of it)\n        const view = byobRequest.view!;\n        const bytesAvailable = totalBytes - offset;\n        const bytesToWrite = Math.min(view.byteLength, bytesAvailable);\n        \n        // Create a view into the consumer&amp;#039;s buffer and fill it\n        // not critical but safer when bytesToWrite != view.byteLength\n        const dest = new Uint8Array(\n          view.buffer,\n          view.byteOffset,\n          bytesToWrite\n        );\n        \n        // Fill with sequential bytes (our &amp;quot;data source&amp;quot;)\n        // Can be any thing here that writes into the view\n        for (let i = 0; i &amp;lt; bytesToWrite; i++) {\n          dest[i] = (offset + i) &amp;amp; 0xFF;\n        }\n        \n        offset += bytesToWrite;\n        \n        // Signal how many bytes we wrote\n        byobRequest.respond(bytesToWrite);\n        \n      } else {\n        // === DEFAULT READER PATH ===\n        // No BYOB request - allocate and enqueue a chunk\n        const bytesAvailable = totalBytes - offset;\n        const chunkSize = Math.min(1024, bytesAvailable);\n        \n        const chunk = new Uint8Array(chunkSize);\n        for (let i = 0; i &amp;lt; chunkSize; i++) {\n          chunk[i] = (offset + i) &amp;amp; 0xFF;\n        }\n        \n        offset += chunkSize;\n        controller.enqueue(chunk);\n      }\n    },\n    \n    cancel(reason) {\n      console.log(&amp;#039;Stream canceled:&amp;#039;, reason);\n    }\n  });&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;When a host runtime provides a byte-oriented ReadableStream from the runtime itself, for instance, as the &lt;code&gt;body &lt;/code&gt;of a fetch &lt;code&gt;Response&lt;/code&gt;, it is often far easier for the runtime itself to provide an optimized implementation of BYOB reads, but those still need to be capable of handling both default and BYOB reading patterns and that requirement brings with it a fair amount of complexity.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;backpressure-good-in-theory-broken-in-practice\&quot;&gt;Backpressure: good in theory, broken in practice&lt;/h4&gt;\n      &lt;a href=\&quot;#backpressure-good-in-theory-broken-in-practice\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Backpressure – the ability for a slow consumer to signal a fast producer to slow down – is a first-class concept in Web streams. In theory. In practice, the model has some serious flaws.&lt;/p&gt;&lt;p&gt;The primary signal is &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultController/desiredSize\&quot;&gt;&lt;code&gt;&lt;u&gt;desiredSize&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; on the controller. It can be positive (wants data), zero (at capacity), negative (over capacity), or null (closed). Producers are supposed to check this value and stop enqueueing when it&amp;#39;s not positive. But there&amp;#39;s nothing enforcing this: &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultController/enqueue\&quot;&gt;&lt;code&gt;&lt;u&gt;controller.enqueue()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; always succeeds, even when desiredSize is deeply negative.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;new ReadableStream({\n  start(controller) {\n    // Nothing stops you from doing this\n    while (true) {\n      controller.enqueue(generateData()); // desiredSize: -999999\n    }\n  }\n});&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Stream implementations can and do ignore backpressure; and some spec-defined features explicitly break backpressure. &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/tee\&quot;&gt;&lt;code&gt;&lt;u&gt;tee()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;, for instance, creates two branches from a single stream. If one branch reads faster than the other, data accumulates in an internal buffer with no limit. A fast consumer can cause unbounded memory growth while the slow consumer catches up, and there&amp;#39;s no way to configure this or opt out beyond canceling the slower branch.&lt;/p&gt;&lt;p&gt;Web streams do provide clear mechanisms for tuning backpressure behavior in the form of the &lt;code&gt;highWaterMark&lt;/code&gt; option and customizable size calculations, but these are just as easy to ignore as &lt;code&gt;desiredSize&lt;/code&gt;, and many applications simply fail to pay attention to them.&lt;/p&gt;&lt;p&gt;The same issues exist on the &lt;code&gt;WritableStream&lt;/code&gt; side. A &lt;code&gt;WritableStream&lt;/code&gt; has a &lt;code&gt;highWaterMark&lt;/code&gt; and &lt;code&gt;desiredSize&lt;/code&gt;. There is a &lt;code&gt;writer.ready&lt;/code&gt; promise that producers of data are supposed to pay attention but often don&amp;#39;t.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const writable = getWritableStreamSomehow();\nconst writer = writable.getWriter();\n\n// Producers are supposed to wait for the writer.ready\n// It is a promise that, when resolves, indicates that\n// the writables internal backpressure is cleared and\n// it is ok to write more data\nawait writer.ready;\nawait writer.write(...);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;For implementers, backpressure adds complexity without providing guarantees. The machinery to track queue sizes, compute &lt;code&gt;desiredSize&lt;/code&gt;, and invoke &lt;code&gt;pull()&lt;/code&gt; at the right times must all be implemented correctly. However, since these signals are advisory, all that work doesn&amp;#39;t actually prevent the problems backpressure is supposed to solve.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;the-hidden-cost-of-promises\&quot;&gt;The hidden cost of promises&lt;/h4&gt;\n      &lt;a href=\&quot;#the-hidden-cost-of-promises\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The Web streams spec requires promise creation at numerous points, often in hot paths and often invisible to users. Each &lt;code&gt;read()&lt;/code&gt; call doesn&amp;#39;t just return a promise; internally, the implementation creates additional promises for queue management, &lt;code&gt;pull()&lt;/code&gt; coordination, and backpressure signaling.&lt;/p&gt;&lt;p&gt;This overhead is mandated by the spec&amp;#39;s reliance on promises for buffer management, completion, and backpressure signals. While some of it is implementation-specific, much of it is unavoidable if you&amp;#39;re following the spec as written. For high-frequency streaming – video frames, network packets, real-time data – this overhead is significant.&lt;/p&gt;&lt;p&gt;The problem compounds in pipelines. Each &lt;code&gt;TransformStream&lt;/code&gt; adds another layer of promise machinery between source and sink. The spec doesn&amp;#39;t define synchronous fast paths, so even when data is available immediately, the promise machinery still runs.&lt;/p&gt;&lt;p&gt;For implementers, this promise-heavy design constrains optimization opportunities. The spec mandates specific promise resolution ordering, making it difficult to batch operations or skip unnecessary async boundaries without risking subtle compliance failures. There are many hidden internal optimizations that implementers do make but these can be complicated and difficult to get right.&lt;/p&gt;&lt;p&gt;While I was writing this blog post, Vercel&amp;#39;s Malte Ubl published their own &lt;a href=\&quot;https://vercel.com/blog/we-ralph-wiggumed-webstreams-to-make-them-10x-faster\&quot;&gt;&lt;u&gt;blog post&lt;/u&gt;&lt;/a&gt; describing some research work Vercel has been doing around improving the performance of Node.js&amp;#39; Web streams implementation. In that post they discuss the same fundamental performance optimization problem that every implementation of Web streams face:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&amp;quot;Or consider pipeTo(). Each chunk passes through a full Promise chain: read, write, check backpressure, repeat. An {value, done} result object is allocated per read. Error propagation creates additional Promise branches.&lt;/p&gt;&lt;p&gt;None of this is wrong. These guarantees matter in the browser where streams cross security boundaries, where cancellation semantics need to be airtight, where you do not control both ends of a pipe. But on the server, when you are piping React Server Components through three transforms at 1KB chunks, the cost adds up.&lt;/p&gt;&lt;p&gt;We benchmarked native WebStream pipeThrough at 630 MB/s for 1KB chunks. Node.js pipeline() with the same passthrough transform: ~7,900 MB/s. That is a 12x gap, and the difference is almost entirely Promise and object allocation overhead.&amp;quot; \n- Malte Ubl, &lt;a href=\&quot;https://vercel.com/blog/we-ralph-wiggumed-webstreams-to-make-them-10x-faster\&quot;&gt;&lt;u&gt;https://vercel.com/blog/we-ralph-wiggumed-webstreams-to-make-them-10x-faster&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;As part of their research, they have put together a set of proposed improvements for Node.js&amp;#39; Web streams implementation that will eliminate promises in certain code paths which can yield a significant performance boost up to 10x faster, which only goes to prove the point: promises, while useful, add significant overhead. As one of the core maintainers of Node.js, I am looking forward to helping Malte and the folks at Vercel get their proposed improvements landed!&lt;/p&gt;&lt;p&gt;In a recent update made to Cloudflare Workers, I made similar kinds of modifications to an internal data pipeline that reduced the number of JavaScript promises created in certain application scenarios by up to 200x. The result is several orders of magnitude improvement in performance in those applications.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;real-world-failures\&quot;&gt;Real-world failures&lt;/h3&gt;\n      &lt;a href=\&quot;#real-world-failures\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;exhausting-resources-with-unconsumed-bodies\&quot;&gt;Exhausting resources with unconsumed bodies&lt;/h4&gt;\n      &lt;a href=\&quot;#exhausting-resources-with-unconsumed-bodies\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;When &lt;code&gt;fetch()&lt;/code&gt; returns a response, the body is a &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Response/body\&quot;&gt;&lt;code&gt;&lt;u&gt;ReadableStream&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;. If you only check the status and don&amp;#39;t consume or cancel the body, what happens? The answer varies by implementation, but a common outcome is resource leakage.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;async function checkEndpoint(url) {\n  const response = await fetch(url);\n  return response.ok; // Body is never consumed or cancelled\n}\n\n// In a loop, this can exhaust connection pools\nfor (const url of urls) {\n  await checkEndpoint(url);\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;This pattern has caused connection pool exhaustion in Node.js applications using &lt;a href=\&quot;https://nodejs.org/api/globals.html#fetch\&quot;&gt;&lt;u&gt;undici&lt;/u&gt;&lt;/a&gt; (the &lt;code&gt;fetch() &lt;/code&gt;implementation built into Node.js), and similar issues have appeared in other runtimes. The stream holds a reference to the underlying connection, and without explicit consumption or cancellation, the connection may linger until garbage collection – which may not happen soon enough under load.&lt;/p&gt;&lt;p&gt;The problem is compounded by APIs that implicitly create stream branches. &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Request/clone\&quot;&gt;&lt;code&gt;&lt;u&gt;Request.clone()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; and &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Response/clone\&quot;&gt;&lt;code&gt;&lt;u&gt;Response.clone()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; perform implicit &lt;code&gt;tee()&lt;/code&gt; operations on the body stream – a detail that&amp;#39;s easy to miss. Code that clones a request for logging or retry logic may unknowingly create branched streams that need independent consumption, multiplying the resource management burden.&lt;/p&gt;&lt;p&gt;Now, to be certain, these types of issues &lt;i&gt;are&lt;/i&gt; implementation bugs. The connection leak was definitely something that undici needed to fix in its own implementation, but the complexity of the specification does not make dealing with these types of issues easy.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&amp;quot;Cloning streams in Node.js&amp;#39;s fetch() implementation is harder than it looks. When you clone a request or response body, you&amp;#39;re calling tee() - which splits a single stream into two branches that both need to be consumed. If one consumer reads faster than the other, data buffers unbounded in memory waiting for the slow branch. If you don&amp;#39;t properly consume both branches, the underlying connection leaks. The coordination required between two readers sharing one source makes it easy to accidentally break the original request or exhaust connection pools. It&amp;#39;s a simple API call with complex underlying mechanics that are difficult to get right.&amp;quot; - Matteo Collina, Ph.D. - Platformatic Co-Founder &amp;amp; CTO, Node.js Technical Steering Committee Chair&lt;/p&gt;&lt;/blockquote&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;falling-headlong-off-the-tee-memory-cliff\&quot;&gt;Falling headlong off the tee() memory cliff&lt;/h4&gt;\n      &lt;a href=\&quot;#falling-headlong-off-the-tee-memory-cliff\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/tee\&quot;&gt;&lt;code&gt;&lt;u&gt;tee()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; splits a stream into two branches. It seems straightforward, but the implementation requires buffering: if one branch is read faster than the other, the data must be held somewhere until the slower branch catches up.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const [forHash, forStorage] = response.body.tee();\n\n// Hash computation is fast\nconst hash = await computeHash(forHash);\n\n// Storage write is slow — meanwhile, the entire stream\n// may be buffered in memory waiting for this branch\nawait writeToStorage(forStorage);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The spec does not mandate buffer limits for &lt;code&gt;tee()&lt;/code&gt;. And to be fair, the spec allows implementations to implement the actual internal mechanisms for &lt;code&gt;tee()&lt;/code&gt;and other APIs in any way they see fit so long as the observable normative requirements of the specification are met. But if an implementation chooses to implement &lt;code&gt;tee()&lt;/code&gt; in the specific way described by the streams specification, then &lt;code&gt;tee()&lt;/code&gt; will come with a built-in memory management issue that is difficult to work around.&lt;/p&gt;&lt;p&gt;Implementations have had to develop their own strategies for dealing with this. Firefox initially used a linked-list approach that led to O&lt;code&gt;(n)&lt;/code&gt; memory growth proportional to the consumption rate difference. In Cloudflare Workers, we opted to implement a shared buffer model where backpressure is signaled by the slowest consumer rather than the fastest.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5cl4vqYfaHaVXiHjLSXv0a/03a0b9fe4c9c0594e181ffee43b63998/2.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;782\&quot; height=\&quot;531\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;transform-backpressure-gaps\&quot;&gt;Transform backpressure gaps&lt;/h4&gt;\n      &lt;a href=\&quot;#transform-backpressure-gaps\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;code&gt;TransformStream&lt;/code&gt; creates a &lt;code&gt;readable/writable&lt;/code&gt; pair with processing logic in between. The &lt;code&gt;transform()&lt;/code&gt; function executes on &lt;i&gt;write&lt;/i&gt;, not on read. Processing of the transform happens eagerly as data arrives, regardless of whether any consumer is ready. This causes unnecessary work when consumers are slow, and the backpressure signaling between the two sides has gaps that can cause unbounded buffering under load. The expectation in the spec is that the producer of the data being transformed is paying attention to the &lt;code&gt;writer.ready&lt;/code&gt; signal on the writable side of the transform but quite often producers just simply ignore it.&lt;/p&gt;&lt;p&gt;If the transform&amp;#39;s &lt;code&gt;transform() &lt;/code&gt;operation is synchronous and always enqueues output immediately, it never signals backpressure back to the writable side even when the downstream consumer is slow. This is a consequence of the spec design that many developers completely overlook. In browsers, where there&amp;#39;s only a single user and typically only a small number of stream pipelines active at any given time, this type of foot gun is often of no consequence, but it has a major impact on server-side or edge performance in runtimes that serve thousands of concurrent requests.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const fastTransform = new TransformStream({\n  transform(chunk, controller) {\n    // Synchronously enqueue — this never applies backpressure\n    // Even if the readable side&amp;#039;s buffer is full, this succeeds\n    controller.enqueue(processChunk(chunk));\n  }\n});\n\n// Pipe a fast source through the transform to a slow sink\nfastSource\n  .pipeThrough(fastTransform)\n  .pipeTo(slowSink);  // Buffer grows without bound&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;What TransformStreams are supposed to do is check for backpressure on the controller and use promises to communicate that back to the writer:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const fastTransform = new TransformStream({\n  async transform(chunk, controller) {\n    if (controller.desiredSize &amp;lt;= 0) {\n      // Wait on the backpressure to clear somehow\n    }\n\n    controller.enqueue(processChunk(chunk));\n  }\n});&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;A difficulty here, however, is that the &lt;code&gt;TransformStreamDefaultController&lt;/code&gt; does not have a ready promise mechanism like Writers do; so the &lt;code&gt;TransformStream&lt;/code&gt; implementation would need to implement a polling mechanism to periodically check when &lt;code&gt;controller.desiredSize&lt;/code&gt; becomes positive again.&lt;/p&gt;&lt;p&gt;The problem gets worse in pipelines. When you chain multiple transforms – say, parse, transform, then serialize – each &lt;code&gt;TransformStream&lt;/code&gt; has its own internal readable and writable buffers. If implementers follow the spec strictly, data cascades through these buffers in a push-oriented fashion: the source pushes to transform A, which pushes to transform B, which pushes to transform C, each accumulating data in intermediate buffers before the final consumer has even started pulling. With three transforms, you can have six internal buffers filling up simultaneously.&lt;/p&gt;&lt;p&gt;Developers using the streams API are expected to remember to use options like &lt;code&gt;highWaterMark&lt;/code&gt; when creating their sources, transforms, and writable destinations but often they either forget or simply choose to ignore it.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;source\n  .pipeThrough(parse)      // buffers filling...\n  .pipeThrough(transform)  // more buffers filling...\n  .pipeThrough(serialize)  // even more buffers...\n  .pipeTo(destination);    // consumer hasn&amp;#039;t started yet&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Implementations have found ways to optimize transform pipelines by collapsing identity transforms, short-circuiting non-observable paths, deferring buffer allocation, or falling back to native code that does not run JavaScript at all. Deno, Bun, and Cloudflare Workers have all successfully implemented &amp;quot;native path&amp;quot; optimizations that can help eliminate much of the overhead, and Vercel&amp;#39;s recent &lt;a href=\&quot;https://vercel.com/blog/we-ralph-wiggumed-webstreams-to-make-them-10x-faster\&quot;&gt;&lt;u&gt;fast-webstreams&lt;/u&gt;&lt;/a&gt; research is working on similar optimizations for Node.js. But the optimizations themselves add significant complexity and still can&amp;#39;t fully escape the inherently push-oriented model that TransformStream uses.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/64FcAUPYrTvOSYOPoT2FkR/cc91e0d32dd47320e8ac9d6f431a2fda/3.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;922\&quot; height=\&quot;481\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;gc-thrashing-in-server-side-rendering\&quot;&gt;GC thrashing in server-side rendering&lt;/h4&gt;\n      &lt;a href=\&quot;#gc-thrashing-in-server-side-rendering\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Streaming server-side rendering (SSR) is a particularly painful case. A typical SSR stream might render thousands of small HTML fragments, each passing through the streams machinery:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Each component enqueues a small chunk\nfunction renderComponent(controller) {\n  controller.enqueue(encoder.encode(`&amp;lt;div&amp;gt;${content}&amp;lt;/div&amp;gt;`));\n}\n\n// Hundreds of components = hundreds of enqueue calls\n// Each one triggers promise machinery internally\nfor (const component of components) {\n  renderComponent(controller);  // Promises created, objects allocated\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Every fragment means promises created for &lt;code&gt;read()&lt;/code&gt; calls, promises for backpressure coordination, intermediate buffer allocations, and &lt;code&gt;{ value, done } &lt;/code&gt;result objects – most of which become garbage almost immediately.&lt;/p&gt;&lt;p&gt;Under load, this creates GC pressure that can devastate throughput. The JavaScript engine spends significant time collecting short-lived objects instead of doing useful work. Latency becomes unpredictable as GC pauses interrupt request handling. I&amp;#39;ve seen SSR workloads where garbage collection accounts for a substantial portion (up to and beyond 50%) of total CPU time per request. That&amp;#39;s time that could be spent actually rendering content.&lt;/p&gt;&lt;p&gt;The irony is that streaming SSR is supposed to improve performance by sending content incrementally. But the overhead of the streams machinery can negate those gains, especially for pages with many small components. Developers sometimes find that buffering the entire response is actually faster than streaming through Web streams, defeating the purpose entirely.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;the-optimization-treadmill\&quot;&gt;The optimization treadmill&lt;/h3&gt;\n      &lt;a href=\&quot;#the-optimization-treadmill\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;To achieve usable performance, every major runtime has resorted to non-standard internal optimizations for Web streams. Node.js, Deno, Bun, and Cloudflare Workers have all developed their own workarounds. This is particularly true for streams wired up to system-level I/O, where much of the machinery is non-observable and can be short-circuited.&lt;/p&gt;&lt;p&gt;Finding these optimization opportunities can itself be a significant undertaking. It requires end-to-end understanding of the spec to identify which behaviors are observable and which can safely be elided. Even then, whether a given optimization is actually spec-compliant is often unclear. Implementers must make judgment calls about which semantics they can relax without breaking compatibility. This puts enormous pressure on runtime teams to become spec experts just to achieve acceptable performance.&lt;/p&gt;&lt;p&gt;These optimizations are difficult to implement, frequently error-prone, and lead to inconsistent behavior across runtimes. Bun&amp;#39;s &amp;quot;&lt;a href=\&quot;https://bun.sh/docs/api/streams#direct-readablestream\&quot;&gt;&lt;u&gt;Direct Streams&lt;/u&gt;&lt;/a&gt;&amp;quot; optimization takes a deliberately and observably non-standard approach, bypassing much of the spec&amp;#39;s machinery entirely. Cloudflare Workers&amp;#39; &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/streams/transformstream/\&quot;&gt;&lt;code&gt;&lt;u&gt;IdentityTransformStream&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; provides a fast-path for pass-through transforms but is Workers-specific and implements behaviors that are not standard for a &lt;code&gt;TransformStream&lt;/code&gt;. Each runtime has its own set of tricks and the natural tendency is toward non-standard solutions, because that&amp;#39;s often the only way to make things fast.&lt;/p&gt;&lt;p&gt;This fragmentation hurts portability. Code that performs well on one runtime may behave differently (or poorly) on another, even though it&amp;#39;s using &amp;quot;standard&amp;quot; APIs. The complexity burden on runtime implementers is substantial, and the subtle behavioral differences create friction for developers trying to write cross-runtime code, particularly those maintaining frameworks that must be able to run efficiently across many runtime environments.&lt;/p&gt;&lt;p&gt;It is also necessary to emphasize that many optimizations are only possible in parts of the spec that are unobservable to user code. The alternative, like Bun &amp;quot;Direct Streams&amp;quot;, is to intentionally diverge from the spec-defined observable behaviors. This means optimizations often feel &amp;quot;incomplete&amp;quot;. They work in some scenarios but not in others, in some runtimes but not others, etc. Every such case adds to the overall unsustainable complexity of the Web streams approach which is why most runtime implementers rarely put significant effort into further improvements to their streams implementations once the conformance tests are passing.&lt;/p&gt;&lt;p&gt;Implementers shouldn&amp;#39;t need to jump through these hoops. When you find yourself needing to relax or bypass spec semantics just to achieve reasonable performance, that&amp;#39;s a sign something is wrong with the spec itself. A well-designed streaming API should be efficient by default, not require each runtime to invent its own escape hatches.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;the-compliance-burden\&quot;&gt;The compliance burden&lt;/h3&gt;\n      &lt;a href=\&quot;#the-compliance-burden\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;A complex spec creates complex edge cases. The &lt;a href=\&quot;https://github.com/web-platform-tests/wpt/tree/master/streams\&quot;&gt;&lt;u&gt;Web Platform Tests for streams&lt;/u&gt;&lt;/a&gt; span over 70 test files, and while comprehensive testing is a good thing, what&amp;#39;s telling is what needs to be tested.&lt;/p&gt;&lt;p&gt;Consider some of the more obscure tests that implementations must pass:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Prototype pollution defense: One test patches &lt;code&gt;Object.prototype.&lt;/code&gt;then to intercept promise resolutions, then verifies that &lt;code&gt;pipeTo()&lt;/code&gt; and &lt;code&gt;tee()&lt;/code&gt; operations don&amp;#39;t leak internal values through the prototype chain. This tests a security property that only exists because the spec&amp;#39;s promise-heavy internals create an attack surface.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;WebAssembly memory rejection: BYOB reads must explicitly reject ArrayBuffers backed by WebAssembly memory, which look like regular buffers but can&amp;#39;t be transferred. This edge case exists because of the spec&amp;#39;s buffer detachment model – a simpler API wouldn&amp;#39;t need to handle it.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Crash regression for state machine conflicts: A test specifically checks that calling &lt;code&gt;byobRequest.respond()&lt;/code&gt; after &lt;code&gt;enqueue()&lt;/code&gt; doesn&amp;#39;t crash the runtime. This sequence creates a conflict in the internal state machine — the &lt;code&gt;enqueue()&lt;/code&gt; fulfills the pending read and should invalidate the &lt;code&gt;byobRequest&lt;/code&gt;, but implementations must gracefully handle the subsequent &lt;code&gt;respond()&lt;/code&gt; rather than corrupting memory in order to cover the very likely possibility that developers are not using the complex API correctly.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;These aren&amp;#39;t contrived scenarios invented by test authors in total vacuum. They&amp;#39;re consequences of the spec&amp;#39;s design and reflect real world bugs.&lt;/p&gt;&lt;p&gt;For runtime implementers, passing the WPT suite means handling intricate corner cases that most application code will never encounter. The tests encode not just the happy path but the full matrix of interactions between readers, writers, controllers, queues, strategies, and the promise machinery that connects them all.&lt;/p&gt;&lt;p&gt;A simpler API would mean fewer concepts, fewer interactions between concepts, and fewer edge cases to get right resulting in more confidence that implementations actually behave consistently.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;the-takeaway\&quot;&gt;The takeaway&lt;/h3&gt;\n      &lt;a href=\&quot;#the-takeaway\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Web streams are complex for users and implementers alike. The problems with the spec aren&amp;#39;t bugs. They emerge from using the API exactly as designed. They aren&amp;#39;t issues that can be fixed solely through incremental improvements. They&amp;#39;re consequences of fundamental design choices. To improve things we need different foundations.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;a-better-streams-api-is-possible\&quot;&gt;A better streams API is possible&lt;/h2&gt;\n      &lt;a href=\&quot;#a-better-streams-api-is-possible\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;After implementing the Web streams spec multiple times across different runtimes and seeing the pain points firsthand, I decided it was time to explore what a better, alternative streaming API could look like if designed from first principles today.&lt;/p&gt;&lt;p&gt;What follows is a proof of concept: it&amp;#39;s not a finished standard, not a production-ready library, not even necessarily a concrete proposal for something new, but a starting point for discussion that demonstrates the problems with Web streams aren&amp;#39;t inherent to streaming itself; they&amp;#39;re consequences of specific design choices that could be made differently. Whether this exact API is the right answer is less important than whether it sparks a productive conversation about what we actually need from a streaming primitive.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;what-is-a-stream\&quot;&gt;What is a stream?&lt;/h3&gt;\n      &lt;a href=\&quot;#what-is-a-stream\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Before diving into API design, it&amp;#39;s worth asking: what is a stream?&lt;/p&gt;&lt;p&gt;At its core, a stream is just a sequence of data that arrives over time. You don&amp;#39;t have all of it at once. You process it incrementally as it becomes available.&lt;/p&gt;&lt;p&gt;Unix pipes are perhaps the purest expression of this idea:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Shell\&quot;&gt;&lt;code class=\&quot;language-Shell\&quot;&gt;cat access.log | grep &amp;quot;error&amp;quot; | sort | uniq -c&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;\nData flows left to right. Each stage reads input, does its work, writes output. There&amp;#39;s no pipe reader to acquire, no controller lock to manage. If a downstream stage is slow, upstream stages naturally slow down as well. Backpressure is implicit in the model, not a separate mechanism to learn (or ignore).&lt;/p&gt;&lt;p&gt;In JavaScript, the natural primitive for &amp;quot;a sequence of things that arrive over time&amp;quot; is already in the language: the async iterable. You consume it with &lt;code&gt;for await...of&lt;/code&gt;. You stop consuming by stopping iteration.&lt;/p&gt;&lt;p&gt;This is the intuition the new API tries to preserve: streams should feel like iteration, because that&amp;#39;s what they are. The complexity of Web streams – readers, writers, controllers, locks, queuing strategies – obscures this fundamental simplicity. A better API should make the simple case simple and only add complexity where it&amp;#39;s genuinely needed.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3AUAA4bitbTOVSQg7Pd7fv/0856b44d78899dcffc4493f4146fb64f/4.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;892\&quot; height=\&quot;626\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;design-principles\&quot;&gt;Design principles&lt;/h3&gt;\n      &lt;a href=\&quot;#design-principles\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;I built the proof-of-concept alternative around a different set of principles.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;streams-are-iterables\&quot;&gt;Streams are iterables.&lt;/h4&gt;\n      &lt;a href=\&quot;#streams-are-iterables\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;No custom &lt;code&gt;ReadableStream&lt;/code&gt; class with hidden internal state. A readable stream is just an &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_async_iterator_and_async_iterable_protocols\&quot;&gt;&lt;code&gt;&lt;u&gt;AsyncIterable&amp;lt;Uint8Array[]&amp;gt;&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;. You consume it with &lt;code&gt;for await...of&lt;/code&gt;. No readers to acquire, no locks to manage.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;pull-through-transforms\&quot;&gt;Pull-through transforms&lt;/h4&gt;\n      &lt;a href=\&quot;#pull-through-transforms\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Transforms don&amp;#39;t execute until the consumer pulls. There&amp;#39;s no eager evaluation, no hidden buffering. Data flows on-demand from source, through transforms, to the consumer. If you stop iterating, processing stops.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4bEXBTEOHBMnCRKGA7odt5/cf51074cce3bb8b2ec1b5158c7560b68/5.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;721\&quot; height=\&quot;546\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;explicit-backpressure\&quot;&gt;Explicit backpressure&lt;/h4&gt;\n      &lt;a href=\&quot;#explicit-backpressure\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Backpressure is strict by default. When a buffer is full, writes reject rather than silently accumulating. You can configure alternative policies – block until space is available, drop oldest, drop newest – but you have to choose explicitly. No more silent memory growth.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;batched-chunks\&quot;&gt;Batched chunks&lt;/h4&gt;\n      &lt;a href=\&quot;#batched-chunks\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Instead of yielding one chunk per iteration, streams yield &lt;code&gt;Uint8Array[]:&lt;/code&gt; arrays of chunks. This amortizes the async overhead across multiple chunks, reducing promise creation and microtask latency in hot paths.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;bytes-only\&quot;&gt;Bytes only&lt;/h4&gt;\n      &lt;a href=\&quot;#bytes-only\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The API deals exclusively with bytes (&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\&quot;&gt;&lt;code&gt;&lt;u&gt;Uint8Array&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;). Strings are UTF-8 encoded automatically. There&amp;#39;s no &amp;quot;value stream&amp;quot; vs &amp;quot;byte stream&amp;quot; dichotomy. If you want to stream arbitrary JavaScript values, use async iterables directly. While the API uses &lt;code&gt;Uint8Array&lt;/code&gt;, it treats chunks as opaque. There is no partial consumption, no BYOB patterns, no byte-level operations within the streaming machinery itself. Chunks go in, chunks come out, unchanged unless a transform explicitly modifies them.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;synchronous-fast-paths-matter\&quot;&gt;Synchronous fast paths matter&lt;/h4&gt;\n      &lt;a href=\&quot;#synchronous-fast-paths-matter\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The API recognizes that synchronous data sources are both necessary and common. The application should not be forced to always accept the performance cost of asynchronous scheduling simply because that&amp;#39;s the only option provided. At the same time, mixing sync and async processing can be dangerous. Synchronous paths should always be an option and should always be explicit.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;the-new-api-in-action\&quot;&gt;The new API in action&lt;/h3&gt;\n      &lt;a href=\&quot;#the-new-api-in-action\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;creating-and-consuming-streams\&quot;&gt;Creating and consuming streams&lt;/h4&gt;\n      &lt;a href=\&quot;#creating-and-consuming-streams\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;In Web streams, creating a simple producer/consumer pair requires &lt;code&gt;TransformStream&lt;/code&gt;, manual encoding, and careful lock management:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const { readable, writable } = new TransformStream();\nconst enc = new TextEncoder();\nconst writer = writable.getWriter();\nawait writer.write(enc.encode(&amp;quot;Hello, World!&amp;quot;));\nawait writer.close();\nwriter.releaseLock();\n\nconst dec = new TextDecoder();\nlet text = &amp;#039;&amp;#039;;\nfor await (const chunk of readable) {\n  text += dec.decode(chunk, { stream: true });\n}\ntext += dec.decode();&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Even this relatively clean version requires: a &lt;code&gt;TransformStream&lt;/code&gt;, manual &lt;code&gt;TextEncoder&lt;/code&gt; and &lt;code&gt;TextDecoder&lt;/code&gt;, and explicit lock release.&lt;/p&gt;&lt;p&gt;Here&amp;#39;s the equivalent with the new API:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;import { Stream } from &amp;#039;new-streams&amp;#039;;\n\n// Create a push stream\nconst { writer, readable } = Stream.push();\n\n// Write data — backpressure is enforced\nawait writer.write(&amp;quot;Hello, World!&amp;quot;);\nawait writer.end();\n\n// Consume as text\nconst text = await Stream.text(readable);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The readable is just an async iterable. You can pass it to any function that expects one, including &lt;code&gt;Stream.text()&lt;/code&gt; which collects and decodes the entire stream.&lt;/p&gt;&lt;p&gt;The writer has a simple interface: &lt;code&gt;write(), writev()&lt;/code&gt; for batched writes, &lt;code&gt;end()&lt;/code&gt; to signal completion, and &lt;code&gt;abort()&lt;/code&gt; for errors. That&amp;#39;s essentially it.&lt;/p&gt;&lt;p&gt;The Writer is not a concrete class. Any object that implements &lt;code&gt;write()&lt;/code&gt;, &lt;code&gt;end()&lt;/code&gt;, and &lt;code&gt;abort()&lt;/code&gt; can be a writer making it easy to adapt existing APIs or create specialized implementations without subclassing. There&amp;#39;s no complex &lt;code&gt;UnderlyingSink&lt;/code&gt; protocol with &lt;code&gt;start()&lt;/code&gt;, &lt;code&gt;write()&lt;/code&gt;, &lt;code&gt;close()&lt;/code&gt;, &lt;code&gt;and abort() &lt;/code&gt;callbacks that must coordinate through a controller whose lifecycle and state are independent of the &lt;code&gt;WritableStream&lt;/code&gt; it is bound to.&lt;/p&gt;&lt;p&gt;Here&amp;#39;s a simple in-memory writer that collects all written data:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// A minimal writer implementation — just an object with methods\nfunction createBufferWriter() {\n  const chunks = [];\n  let totalBytes = 0;\n  let closed = false;\n\n  const addChunk = (chunk) =&amp;gt; {\n    chunks.push(chunk);\n    totalBytes += chunk.byteLength;\n  };\n\n  return {\n    get desiredSize() { return closed ? null : 1; },\n\n    // Async variants\n    write(chunk) { addChunk(chunk); },\n    writev(batch) { for (const c of batch) addChunk(c); },\n    end() { closed = true; return totalBytes; },\n    abort(reason) { closed = true; chunks.length = 0; },\n\n    // Sync variants return boolean (true = accepted)\n    writeSync(chunk) { addChunk(chunk); return true; },\n    writevSync(batch) { for (const c of batch) addChunk(c); return true; },\n    endSync() { closed = true; return totalBytes; },\n    abortSync(reason) { closed = true; chunks.length = 0; return true; },\n\n    getChunks() { return chunks; }\n  };\n}\n\n// Use it\nconst writer = createBufferWriter();\nawait Stream.pipeTo(source, writer);\nconst allData = writer.getChunks();&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;No base class to extend, no abstract methods to implement, no controller to coordinate with. Just an object with the right shape.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;pull-through-transforms\&quot;&gt;Pull-through transforms&lt;/h4&gt;\n      &lt;a href=\&quot;#pull-through-transforms\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Under the new API design, transforms should not perform any work until the data is being consumed. This is a fundamental principle.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Nothing executes until iteration begins\nconst output = Stream.pull(source, compress, encrypt);\n\n// Transforms execute as we iterate\nfor await (const chunks of output) {\n  for (const chunk of chunks) {\n    process(chunk);\n  }\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;&lt;code&gt;Stream.pull()&lt;/code&gt; creates a lazy pipeline. The &lt;code&gt;compress&lt;/code&gt; and &lt;code&gt;encrypt&lt;/code&gt; transforms don&amp;#39;t run until you start iterating output. Each iteration pulls data through the pipeline on demand.&lt;/p&gt;&lt;p&gt;This is fundamentally different from Web streams&amp;#39; &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/pipeThrough\&quot;&gt;&lt;code&gt;&lt;u&gt;pipeThrough()&lt;/u&gt;&lt;/code&gt;&lt;/a&gt;, which starts actively pumping data from the source to the transform as soon as you set up the pipe. Pull semantics mean you control when processing happens, and stopping iteration stops processing.&lt;/p&gt;&lt;p&gt;Transforms can be stateless or stateful. A stateless transform is just a function that takes chunks and returns transformed chunks:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Stateless transform — a pure function\n// Receives chunks or null (flush signal)\nconst toUpperCase = (chunks) =&amp;gt; {\n  if (chunks === null) return null; // End of stream\n  return chunks.map(chunk =&amp;gt; {\n    const str = new TextDecoder().decode(chunk);\n    return new TextEncoder().encode(str.toUpperCase());\n  });\n};\n\n// Use it directly\nconst output = Stream.pull(source, toUpperCase);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Stateful transforms are simple objects with member functions that maintain state across calls:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Stateful transform — a generator that wraps the source\nfunction createLineParser() {\n  // Helper to concatenate Uint8Arrays\n  const concat = (...arrays) =&amp;gt; {\n    const result = new Uint8Array(arrays.reduce((n, a) =&amp;gt; n + a.length, 0));\n    let offset = 0;\n    for (const arr of arrays) { result.set(arr, offset); offset += arr.length; }\n    return result;\n  };\n\n  return {\n    async *transform(source) {\n      let pending = new Uint8Array(0);\n      \n      for await (const chunks of source) {\n        if (chunks === null) {\n          // Flush: yield any remaining data\n          if (pending.length &amp;gt; 0) yield [pending];\n          continue;\n        }\n        \n        // Concatenate pending data with new chunks\n        const combined = concat(pending, ...chunks);\n        const lines = [];\n        let start = 0;\n\n        for (let i = 0; i &amp;lt; combined.length; i++) {\n          if (combined[i] === 0x0a) { // newline\n            lines.push(combined.slice(start, i));\n            start = i + 1;\n          }\n        }\n\n        pending = combined.slice(start);\n        if (lines.length &amp;gt; 0) yield lines;\n      }\n    }\n  };\n}\n\nconst output = Stream.pull(source, createLineParser());&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;For transforms that need cleanup on abort, add an abort handler:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Stateful transform with resource cleanup\nfunction createGzipCompressor() {\n  // Hypothetical compression API...\n  const deflate = new Deflater({ gzip: true });\n\n  return {\n    async *transform(source) {\n      for await (const chunks of source) {\n        if (chunks === null) {\n          // Flush: finalize compression\n          deflate.push(new Uint8Array(0), true);\n          if (deflate.result) yield [deflate.result];\n        } else {\n          for (const chunk of chunks) {\n            deflate.push(chunk, false);\n            if (deflate.result) yield [deflate.result];\n          }\n        }\n      }\n    },\n    abort(reason) {\n      // Clean up compressor resources on error/cancellation\n    }\n  };\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;For implementers, there&amp;#39;s no Transformer protocol with &lt;code&gt;start()&lt;/code&gt;, &lt;code&gt;transform()&lt;/code&gt;, &lt;code&gt;flush()&lt;/code&gt; methods and controller coordination passed into a &lt;code&gt;TransformStream&lt;/code&gt; class that has its own hidden state machine and buffering mechanisms. Transforms are just functions or simple objects: far simpler to implement and test.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;explicit-backpressure-policies\&quot;&gt;Explicit backpressure policies&lt;/h4&gt;\n      &lt;a href=\&quot;#explicit-backpressure-policies\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;When a bounded buffer fills up and a producer wants to write more, there are only a few things you can do:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Reject the write: refuse to accept more data&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Wait: block until space becomes available&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Discard old data: evict what&amp;#39;s already buffered to make room&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Discard new data: drop what&amp;#39;s incoming&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;That&amp;#39;s it. Any other response is either a variation of these (like &amp;quot;resize the buffer,&amp;quot; which is really just deferring the choice) or domain-specific logic that doesn&amp;#39;t belong in a general streaming primitive. Web streams currently always choose Wait by default.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/68339c8QsvNmb7JcZ2lSDO/e52a86a9b8f52b52eb9328d5ee58f23a/6.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;621\&quot; height=\&quot;586\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;The new API makes you choose one of these four explicitly:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;strict&lt;/code&gt; (default): Rejects writes when the buffer is full and too many writes are pending. Catches &amp;quot;fire-and-forget&amp;quot; patterns where producers ignore backpressure.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;block&lt;/code&gt;: Writes wait until buffer space is available. Use when you trust the producer to await writes properly.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;drop-oldest&lt;/code&gt;: Drops the oldest buffered data to make room. Useful for live feeds where stale data loses value.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;drop-newest&lt;/code&gt;: Discards incoming data when full. Useful when you want to process what you have without being overwhelmed.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const { writer, readable } = Stream.push({\n  highWaterMark: 10,\n  backpressure: &amp;#039;strict&amp;#039; // or &amp;#039;block&amp;#039;, &amp;#039;drop-oldest&amp;#039;, &amp;#039;drop-newest&amp;#039;\n});&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;No more hoping producers cooperate. The policy you choose determines what happens when the buffer fills.&lt;/p&gt;&lt;p&gt;Here&amp;#39;s how each policy behaves when a producer writes faster than the consumer reads:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// strict: Catches fire-and-forget writes that ignore backpressure\nconst strict = Stream.push({ highWaterMark: 2, backpressure: &amp;#039;strict&amp;#039; });\nstrict.writer.write(chunk1);  // ok (not awaited)\nstrict.writer.write(chunk2);  // ok (fills slots buffer)\nstrict.writer.write(chunk3);  // ok (queued in pending)\nstrict.writer.write(chunk4);  // ok (pending buffer fills)\nstrict.writer.write(chunk5);  // throws! too many pending writes\n\n// block: Wait for space (unbounded pending queue)\nconst blocking = Stream.push({ highWaterMark: 2, backpressure: &amp;#039;block&amp;#039; });\nawait blocking.writer.write(chunk1);  // ok\nawait blocking.writer.write(chunk2);  // ok\nawait blocking.writer.write(chunk3);  // waits until consumer reads\nawait blocking.writer.write(chunk4);  // waits until consumer reads\nawait blocking.writer.write(chunk5);  // waits until consumer reads\n\n// drop-oldest: Discard old data to make room\nconst dropOld = Stream.push({ highWaterMark: 2, backpressure: &amp;#039;drop-oldest&amp;#039; });\nawait dropOld.writer.write(chunk1);  // ok\nawait dropOld.writer.write(chunk2);  // ok\nawait dropOld.writer.write(chunk3);  // ok, chunk1 discarded\n\n// drop-newest: Discard incoming data when full\nconst dropNew = Stream.push({ highWaterMark: 2, backpressure: &amp;#039;drop-newest&amp;#039; });\nawait dropNew.writer.write(chunk1);  // ok\nawait dropNew.writer.write(chunk2);  // ok\nawait dropNew.writer.write(chunk3);  // silently dropped&lt;/pre&gt;&lt;/code&gt;\n            \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;explicit-multi-consumer-patterns\&quot;&gt;Explicit Multi-consumer patterns&lt;/h4&gt;\n      &lt;a href=\&quot;#explicit-multi-consumer-patterns\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    \n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Share with explicit buffer management\nconst shared = Stream.share(source, {\n  highWaterMark: 100,\n  backpressure: &amp;#039;strict&amp;#039;\n});\n\nconst consumer1 = shared.pull();\nconst consumer2 = shared.pull(decompress);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Instead of &lt;code&gt;tee()&lt;/code&gt; with its hidden unbounded buffer, you get explicit multi-consumer primitives. &lt;code&gt;Stream.share()&lt;/code&gt; is pull-based: consumers pull from a shared source, and you configure the buffer limits and backpressure policy upfront.&lt;/p&gt;&lt;p&gt;There&amp;#39;s also &lt;code&gt;Stream.broadcast()&lt;/code&gt; for push-based multi-consumer scenarios. Both require you to think about what happens when consumers run at different speeds, because that&amp;#39;s a real concern that shouldn&amp;#39;t be hidden.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;sync-async-separation\&quot;&gt;Sync/async separation&lt;/h4&gt;\n      &lt;a href=\&quot;#sync-async-separation\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Not all streaming workloads involve I/O. When your source is in-memory and your transforms are pure functions, async machinery adds overhead without benefit. You&amp;#39;re paying for coordination of &amp;quot;waiting&amp;quot; that adds no benefit.&lt;/p&gt;&lt;p&gt;The new API has complete parallel sync versions: &lt;code&gt;Stream.pullSync()&lt;/code&gt;, &lt;code&gt;Stream.bytesSync()&lt;/code&gt;, &lt;code&gt;Stream.textSync()&lt;/code&gt;, and so on. If your source and transforms are all synchronous, you can process the entire pipeline without a single promise.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Async — when source or transforms may be asynchronous\nconst textAsync = await Stream.text(source);\n\n// Sync — when all components are synchronous\nconst textSync = Stream.textSync(source);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Here&amp;#39;s a complete synchronous pipeline – compression, transformation, and consumption with zero async overhead:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;// Synchronous source from in-memory data\nconst source = Stream.fromSync([inputBuffer]);\n\n// Synchronous transforms\nconst compressed = Stream.pullSync(source, zlibCompressSync);\nconst encrypted = Stream.pullSync(compressed, aesEncryptSync);\n\n// Synchronous consumption — no promises, no event loop trips\nconst result = Stream.bytesSync(encrypted);&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The entire pipeline executes in a single call stack. No promises are created, no microtask queue scheduling occurs, and no GC pressure from short-lived async machinery. For CPU-bound workloads like parsing, compression, or transformation of in-memory data, this can be significantly faster than the equivalent Web streams code – which would force async boundaries even when every component is synchronous.&lt;/p&gt;&lt;p&gt;Web streams has no synchronous path. Even if your source has data ready and your transform is a pure function, you still pay for promise creation and microtask scheduling on every operation. Promises are fantastic for cases in which waiting is actually necessary, but they aren&amp;#39;t always necessary. The new API lets you stay in sync-land when that&amp;#39;s what you need.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;bridging-the-gap-between-this-and-web-streams\&quot;&gt;Bridging the gap between this and web streams&lt;/h4&gt;\n      &lt;a href=\&quot;#bridging-the-gap-between-this-and-web-streams\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The async iterator based approach provides a natural bridge between this alternative approach and Web streams. When coming from a ReadableStream to this new approach, simply passing the readable in as input works as expected when the ReadableStream is set up to yield bytes:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;const readable = getWebReadableStreamSomehow();\nconst input = Stream.pull(readable, transform1, transform2);\nfor await (const chunks of input) {\n  // process chunks\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;When adapting to a ReadableStream, a bit more work is required since the alternative approach yields batches of chunks, but the adaptation layer is as easily straightforward:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;async function* adapt(input) {\n  for await (const chunks of input) {\n    for (const chunk of chunks) {\n      yield chunk;\n    }\n  }\n}\n\nconst input = Stream.pull(source, transform1, transform2);\nconst readable = ReadableStream.from(adapt(input));&lt;/pre&gt;&lt;/code&gt;\n            \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;how-this-addresses-the-real-world-failures-from-earlier\&quot;&gt;How this addresses the real-world failures from earlier&lt;/h4&gt;\n      &lt;a href=\&quot;#how-this-addresses-the-real-world-failures-from-earlier\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;ul&gt;&lt;li&gt;&lt;p&gt;Unconsumed bodies: Pull semantics mean nothing happens until you iterate. No hidden resource retention. If you don&amp;#39;t consume a stream, there&amp;#39;s no background machinery holding connections open.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;The &lt;code&gt;tee()&lt;/code&gt; memory cliff: &lt;code&gt;Stream.share()&lt;/code&gt; requires explicit buffer configuration. You choose the &lt;code&gt;highWaterMark&lt;/code&gt; and backpressure policy upfront: no more silent unbounded growth when consumers run at different speeds.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Transform backpressure gaps: Pull-through transforms execute on-demand. Data doesn&amp;#39;t cascade through intermediate buffers; it flows only when the consumer pulls. Stop iterating, stop processing.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;GC thrashing in SSR: Batched chunks (&lt;code&gt;Uint8Array[]&lt;/code&gt;) amortize async overhead. Sync pipelines via &lt;code&gt;Stream.pullSync()&lt;/code&gt; eliminate promise allocation entirely for CPU-bound workloads.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;performance\&quot;&gt;Performance&lt;/h3&gt;\n      &lt;a href=\&quot;#performance\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The design choices have performance implications. Here are benchmarks from the reference implementation of this possible alternative compared to Web streams (Node.js v24.x, Apple M1 Pro, averaged over 10 runs):&lt;/p&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Scenario&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Alternative&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Web streams&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Difference&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Small chunks (1KB × 5000)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~13 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~4 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~3× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Tiny chunks (100B × 10000)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~4 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~450 MB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~8× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Async iteration (8KB × 1000)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~530 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~35 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~15× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Chained 3× transforms (8KB × 500)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~275 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~3 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;~80–90× faster&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;High-frequency (64B × 20000)&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~7.5 GB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~280 MB/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~25× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;The chained transform result is particularly striking: pull-through semantics eliminate the intermediate buffering that plagues Web streams pipelines. Instead of each &lt;code&gt;TransformStream&lt;/code&gt; eagerly filling its internal buffers, data flows on-demand from consumer to source.&lt;/p&gt;&lt;p&gt;Now, to be fair, Node.js really has not yet put significant effort into fully optimizing the performance of its Web streams implementation. There&amp;#39;s likely significant room for improvement in Node.js&amp;#39; performance results through a bit of applied effort to optimize the hot paths there. That said, running these benchmarks in Deno and Bun also show a significant performance improvement with this alternative iterator based approach than in either of their Web streams implementations as well.&lt;/p&gt;&lt;p&gt;Browser benchmarks (Chrome/Blink, averaged over 3 runs) show consistent gains as well:&lt;/p&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Scenario&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Alternative&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Web streams&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;Difference&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Push 3KB chunks&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~135k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~24k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~5–6× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Push 100KB chunks&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~24k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~3k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~7–8× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;3 transform chain&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~4.6k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~880 ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~5× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;5 transform chain&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~2.4k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~550 ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~4× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;bytes() consumption&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~73k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~11k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~6–7× faster&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Async iteration&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~1.1M ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;~10k ops/s&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;&lt;b&gt;~40–100× faster&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;These benchmarks measure throughput in controlled scenarios; real-world performance depends on your specific use case. The difference between Node.js and browser gains reflects the distinct optimization paths each environment takes for Web streams.&lt;/p&gt;&lt;p&gt;It&amp;#39;s worth noting that these benchmarks compare a pure TypeScript/JavaScript implementation of the new API against the native (JavaScript/C++/Rust) implementations of Web streams in each runtime. The new API&amp;#39;s reference implementation has had no performance optimization work; the gains come entirely from the design. A native implementation would likely show further improvement.&lt;/p&gt;&lt;p&gt;The gains illustrate how fundamental design choices compound: batching amortizes async overhead, pull semantics eliminate intermediate buffering, and the freedom for implementations to use synchronous fast paths when data is available immediately all contribute.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&amp;quot;We’ve done a lot to improve performance and consistency in Node streams, but there’s something uniquely powerful about starting from scratch. New streams’ approach embraces modern runtime realities without legacy baggage, and that opens the door to a simpler, performant and more coherent streams model.&amp;quot; \n- Robert Nagy, Node.js TSC member and Node.js streams contributor&lt;/p&gt;&lt;/blockquote&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;whats-next\&quot;&gt;What&amp;#39;s next&lt;/h2&gt;\n      &lt;a href=\&quot;#whats-next\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;I&amp;#39;m publishing this to start a conversation. What did I get right? What did I miss? Are there use cases that don&amp;#39;t fit this model? What would a migration path for this approach look like? The goal is to gather feedback from developers who&amp;#39;ve felt the pain of Web streams and have opinions about what a better API should look like.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;try-it-yourself\&quot;&gt;Try it yourself&lt;/h3&gt;\n      &lt;a href=\&quot;#try-it-yourself\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;A reference implementation for this alternative approach is available now and can be found at &lt;a href=\&quot;https://github.com/jasnell/new-streams\&quot;&gt;&lt;u&gt;https://github.com/jasnell/new-streams&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;API Reference: See the &lt;a href=\&quot;https://github.com/jasnell/new-streams/blob/main/API.md\&quot;&gt;&lt;u&gt;API.md&lt;/u&gt;&lt;/a&gt; for complete documentation&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Examples: The &lt;a href=\&quot;https://github.com/jasnell/new-streams/tree/main/samples\&quot;&gt;&lt;u&gt;samples directory&lt;/u&gt;&lt;/a&gt; has working code for common patterns&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;I welcome issues, discussions, and pull requests. If you&amp;#39;ve run into Web streams problems I haven&amp;#39;t covered, or if you see gaps in this approach, let me know. But again, the idea here is not to say &amp;quot;Let&amp;#39;s all use this shiny new object!&amp;quot;; it is to kick off a discussion that looks beyond the current status quo of Web Streams and returns back to first principles.&lt;/p&gt;&lt;p&gt;Web streams was an ambitious project that brought streaming to the web platform when nothing else existed. The people who designed it made reasonable choices given the constraints of 2014 – before async iteration, before years of production experience revealed the edge cases.&lt;/p&gt;&lt;p&gt;But we&amp;#39;ve learned a lot since then. JavaScript has evolved. A streaming API designed today can be simpler, more aligned with the language, and more explicit about the things that matter, like backpressure and multi-consumer behavior.&lt;/p&gt;&lt;p&gt;We deserve a better stream API. So let&amp;#39;s talk about what that could look like.&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2026-02-27T14:00+08:00&quot;],&quot;updated_at&quot;:[0,&quot;2026-02-27T19:40:33.315Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5qjBI2UpJXcpCqgAY4SJkH/9e6489cd148e2c74d1bdd25dd08e6db5/image7.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;iiynSxxhE6dlxRhbsXqc4&quot;],&quot;name&quot;:[0,&quot;Standards&quot;],&quot;slug&quot;:[0,&quot;standards&quot;]}],[0,{&quot;id&quot;:[0,&quot;78aSAeMjGNmCuetQ7B4OgU&quot;],&quot;name&quot;:[0,&quot;JavaScript&quot;],&quot;slug&quot;:[0,&quot;javascript&quot;]}],[0,{&quot;id&quot;:[0,&quot;2UoKhgFDDWc38C5eQLY4EB&quot;],&quot;name&quot;:[0,&quot;TypeScript&quot;],&quot;slug&quot;:[0,&quot;typescript&quot;]}],[0,{&quot;id&quot;:[0,&quot;3txfsA7N73yBL9g3VPBLL0&quot;],&quot;name&quot;:[0,&quot;Open Source&quot;],&quot;slug&quot;:[0,&quot;open-source&quot;]}],[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;3XzVULQKajbCuWudT6JD0p&quot;],&quot;name&quot;:[0,&quot;Node.js&quot;],&quot;slug&quot;:[0,&quot;node-js&quot;]}],[0,{&quot;id&quot;:[0,&quot;4gN0ARax0fHxjtZL07THOe&quot;],&quot;name&quot;:[0,&quot;Performance&quot;],&quot;slug&quot;:[0,&quot;performance&quot;]}],[0,{&quot;id&quot;:[0,&quot;5x72ei67SoD11VQ0uqFtpF&quot;],&quot;name&quot;:[0,&quot;API&quot;],&quot;slug&quot;:[0,&quot;api&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;James M Snell&quot;],&quot;slug&quot;:[0,&quot;jasnell&quot;],&quot;bio&quot;:[0,null],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5dR6CJtYedvLrkAZ6rxv9I/0db3d5a763a8b0a350ac04ac6410da6b/jasnell.jpg&quot;],&quot;location&quot;:[0,&quot;California&quot;],&quot;website&quot;:[0,&quot;https://bsky.app/profile/jasnell.me&quot;],&quot;twitter&quot;:[0],&quot;facebook&quot;:[0,null],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;The Web streams API has become ubiquitous in JavaScript runtimes but was designed for a different era. Here&#39;s what a modern streaming API could (should?) look like.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;blog-english-only&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;No Page for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;No Page for Locale&quot;],&quot;koKR&quot;:[0,&quot;No Page for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/a-better-web-streams-api&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;We deserve a better streams API for JavaScript&quot;],&quot;description&quot;:[0,&quot;The Web streams API has become ubiquitous in JavaScript runtimes but was designed for a different era. Here&#39;s what a modern streaming API could (should?) look like.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/610CHZf0Ig8hBHyPlId5MD/b1e7752eb5dc47c4ef5aa4143770d947/OG_Share_2024-2025-2026__9_.png&quot;]}],&quot;publicly_index&quot;:[0,true]}],[0,{&quot;id&quot;:[0,&quot;2w61xT0J7H7ECzhiABytS&quot;],&quot;title&quot;:[0,&quot;How we rebuilt Next.js with AI in one week&quot;],&quot;slug&quot;:[0,&quot;vinext&quot;],&quot;excerpt&quot;:[0,&quot;One engineer used AI to rebuild Next.js on Vite in a week. vinext builds up to 4x faster, produces 57% smaller bundles, and deploys to Cloudflare Workers with a single command.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;&lt;sub&gt;&lt;i&gt;*This post was updated at 12:35 pm PT to fix a typo in the build time benchmarks.&lt;/i&gt;&lt;/sub&gt;&lt;/p&gt;&lt;p&gt;Last week, one engineer and an AI model rebuilt the most popular front-end framework from scratch. The result, &lt;a href=\&quot;https://github.com/cloudflare/vinext\&quot;&gt;&lt;u&gt;vinext&lt;/u&gt;&lt;/a&gt; (pronounced &amp;quot;vee-next&amp;quot;), is a drop-in replacement for Next.js, built on &lt;a href=\&quot;https://vite.dev/\&quot;&gt;&lt;u&gt;Vite&lt;/u&gt;&lt;/a&gt;, that deploys to Cloudflare Workers with a single command. In early benchmarks, it builds production apps up to 4x faster and produces client bundles up to 57% smaller. And we already have customers running it in production. &lt;/p&gt;&lt;p&gt;The whole thing cost about $1,100 in tokens.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;the-next-js-deployment-problem\&quot;&gt;The Next.js deployment problem&lt;/h2&gt;\n      &lt;a href=\&quot;#the-next-js-deployment-problem\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;a href=\&quot;https://nextjs.org/\&quot;&gt;&lt;u&gt;Next.js&lt;/u&gt;&lt;/a&gt; is the most popular React framework. Millions of developers use it. It powers a huge chunk of the production web, and for good reason. The developer experience is top-notch.&lt;/p&gt;&lt;p&gt;But Next.js has a deployment problem when used in the broader serverless ecosystem. The tooling is entirely bespoke: Next.js has invested heavily in Turbopack but if you want to deploy it to Cloudflare, Netlify, or AWS Lambda, you have to take that build output and reshape it into something the target platform can actually run.&lt;/p&gt;&lt;p&gt;If you’re thinking: “Isn’t that what OpenNext does?”, you are correct. &lt;/p&gt;&lt;p&gt;That is indeed the problem &lt;a href=\&quot;https://opennext.js.org/\&quot;&gt;&lt;u&gt;OpenNext&lt;/u&gt;&lt;/a&gt; was built to solve. And a lot of engineering effort has gone into OpenNext from multiple providers, including us at Cloudflare. It works, but quickly runs into limitations and becomes a game of whack-a-mole. &lt;/p&gt;&lt;p&gt;Building on top of Next.js output as a foundation has proven to be a difficult and fragile approach. Because OpenNext has to reverse-engineer Next.js&amp;#39;s build output, this results in unpredictable changes between versions that take a lot of work to correct. &lt;/p&gt;&lt;p&gt;Next.js has been working on a first-class adapters API, and we&amp;#39;ve been collaborating with them on it. It&amp;#39;s still an early effort but even with adapters, you&amp;#39;re still building on the bespoke Turbopack toolchain. And adapters only cover build and deploy. During development, next dev runs exclusively in Node.js with no way to plug in a different runtime. If your application uses platform-specific APIs like Durable Objects, KV, or AI bindings, you can&amp;#39;t test that code in dev without workarounds.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;introducing-vinext\&quot;&gt;Introducing vinext &lt;/h2&gt;\n      &lt;a href=\&quot;#introducing-vinext\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    \n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/7BCYnb6nCnc9oRBPQnuES5/d217b3582f4fe30597a3b4bf000d9bd7/BLOG-3194_2.png\&quot; alt=\&quot;BLOG-3194 2\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;412\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;What if instead of adapting Next.js output, we reimplemented the Next.js API surface on &lt;a href=\&quot;https://vite.dev/\&quot;&gt;&lt;u&gt;Vite&lt;/u&gt;&lt;/a&gt; directly? Vite is the build tool used by most of the front-end ecosystem outside of Next.js, powering frameworks like Astro, SvelteKit, Nuxt, and Remix. A clean reimplementation, not merely a wrapper or adapter. We honestly didn&amp;#39;t think it would work. But it’s 2026, and the cost of building software has completely changed.&lt;/p&gt;&lt;p&gt;We got a lot further than we expected.&lt;/p&gt;\n            &lt;pre class=\&quot;language-Typescript\&quot;&gt;&lt;code class=\&quot;language-Typescript\&quot;&gt;npm install vinext&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Replace &lt;code&gt;next&lt;/code&gt; with &lt;code&gt;vinext&lt;/code&gt; in your scripts and everything else stays the same. Your existing &lt;code&gt;app/&lt;/code&gt;, &lt;code&gt;pages/&lt;/code&gt;, and &lt;code&gt;next.config.js&lt;/code&gt; work as-is.&lt;/p&gt;\n            &lt;pre class=\&quot;language-shell\&quot;&gt;&lt;code class=\&quot;language-shell\&quot;&gt;vinext dev          # Development server with HMR\nvinext build        # Production build\nvinext deploy       # Build and deploy to Cloudflare Workers&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;This is not a wrapper around Next.js and Turbopack output. It&amp;#39;s an alternative implementation of the API surface: routing, server rendering, React Server Components, server actions, caching, middleware. All of it built on top of Vite as a plugin. Most importantly Vite output runs on any platform thanks to the &lt;a href=\&quot;https://vite.dev/guide/api-environment\&quot;&gt;&lt;u&gt;Vite Environment API&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;the-numbers\&quot;&gt;The numbers&lt;/h2&gt;\n      &lt;a href=\&quot;#the-numbers\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Early benchmarks are promising. We compared vinext against Next.js 16 using a shared 33-route App Router application.\n\nBoth frameworks are doing the same work: compiling, bundling, and preparing server-rendered routes. We disabled TypeScript type checking and ESLint in Next.js&amp;#39;s build (Vite doesn&amp;#39;t run these during builds), and used force-dynamic so Next.js doesn&amp;#39;t spend extra time pre-rendering static routes, which would unfairly slow down its numbers. The goal was to measure only bundler and compilation speed, nothing else. Benchmarks run on GitHub CI on every merge to main. &lt;/p&gt;&lt;p&gt;&lt;b&gt;Production build time:&lt;/b&gt;&lt;/p&gt;&lt;style type=\&quot;text/css\&quot;&gt;\n.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}\n.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-bn4o{font-size:18px;font-weight:bold;text-align:center;vertical-align:top}\n.tg .tg-nx8p{font-size:18px;text-align:left;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}&lt;/style&gt;\n&lt;div class=\&quot;tg-wrap\&quot;&gt;&lt;table class=\&quot;tg\&quot; style=\&quot;undefined;table-layout: fixed; width: 453px\&quot;&gt;&lt;colgroup&gt;\n&lt;col style=\&quot;width: 251px\&quot;&gt;\n&lt;col style=\&quot;width: 101px\&quot;&gt;\n&lt;col style=\&quot;width: 101px\&quot;&gt;\n&lt;/colgroup&gt;\n&lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;Framework&lt;/span&gt;&lt;/th&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;Mean&lt;/span&gt;&lt;/th&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vs Next.js&lt;/span&gt;&lt;/th&gt;\n  &lt;/tr&gt;&lt;/thead&gt;\n&lt;tbody&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none\&quot;&gt;Next.js 16.1.6 (Turbopack)&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;7.38s&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;baseline&lt;/span&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vinext (Vite 7 / Rollup)&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;4.64s&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;1.6x faster&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vinext (Vite 8 / Rolldown)&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;1.67s&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;4.4x faster&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;Client bundle size (gzipped):&lt;/b&gt;&lt;/p&gt;&lt;style type=\&quot;text/css\&quot;&gt;\n.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}\n.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-bn4o{font-size:18px;font-weight:bold;text-align:center;vertical-align:top}\n.tg .tg-nx8p{font-size:18px;text-align:left;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}&lt;/style&gt;\n&lt;div class=\&quot;tg-wrap\&quot;&gt;&lt;table class=\&quot;tg\&quot; style=\&quot;undefined;table-layout: fixed; width: 453px\&quot;&gt;&lt;colgroup&gt;\n&lt;col style=\&quot;width: 251px\&quot;&gt;\n&lt;col style=\&quot;width: 101px\&quot;&gt;\n&lt;col style=\&quot;width: 101px\&quot;&gt;\n&lt;/colgroup&gt;\n&lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;Framework&lt;/span&gt;&lt;/th&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;Gzipped&lt;/span&gt;&lt;/th&gt;\n    &lt;th class=\&quot;tg-bn4o\&quot;&gt;&lt;span style=\&quot;font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vs Next.js&lt;/span&gt;&lt;/th&gt;\n  &lt;/tr&gt;&lt;/thead&gt;\n&lt;tbody&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;Next.js 16.1.6&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;168.9 KB&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;baseline&lt;/span&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vinext (Rollup)&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;74.0 KB&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;56% smaller&lt;/span&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;vinext (Rolldown)&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;72.9 KB&lt;/span&gt;&lt;/td&gt;\n    &lt;td class=\&quot;tg-nx8p\&quot;&gt;&lt;span style=\&quot;font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\&quot;&gt;57% smaller&lt;/span&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;These benchmarks measure compilation and bundling speed, not production serving performance. The test fixture is a single 33-route app, not a representative sample of all production applications. We expect these numbers to evolve as three projects continue to develop. The &lt;a href=\&quot;https://benchmarks.vinext.workers.dev\&quot;&gt;&lt;u&gt;full methodology and historical results&lt;/u&gt;&lt;/a&gt; are public. Take them as directional, not definitive.&lt;/p&gt;&lt;p&gt;The direction is encouraging, though. Vite&amp;#39;s architecture, and especially &lt;a href=\&quot;https://rolldown.rs/\&quot;&gt;&lt;u&gt;Rolldown&lt;/u&gt;&lt;/a&gt; (the Rust-based bundler coming in Vite 8), has structural advantages for build performance that show up clearly here.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;deploying-to-cloudflare-workers\&quot;&gt;Deploying to Cloudflare Workers&lt;/h2&gt;\n      &lt;a href=\&quot;#deploying-to-cloudflare-workers\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;vinext is built with Cloudflare Workers as the first deployment target. A single command takes you from source code to a running Worker:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Shell\&quot;&gt;&lt;code class=\&quot;language-Shell\&quot;&gt;vinext deploy&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;This handles everything: builds the application, auto-generates the Worker configuration, and deploys. Both the App Router and Pages Router work on Workers, with full client-side hydration, interactive components, client-side navigation, React state.&lt;/p&gt;&lt;p&gt;For production caching, vinext includes a Cloudflare KV cache handler that gives you ISR (Incremental Static Regeneration) out of the box:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Typescript\&quot;&gt;&lt;code class=\&quot;language-Typescript\&quot;&gt;import { KVCacheHandler } from &amp;quot;vinext/cloudflare&amp;quot;;\nimport { setCacheHandler } from &amp;quot;next/cache&amp;quot;;\n\nsetCacheHandler(new KVCacheHandler(env.MY_KV_NAMESPACE));&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;&lt;a href=\&quot;https://developers.cloudflare.com/kv/\&quot;&gt;&lt;u&gt;KV&lt;/u&gt;&lt;/a&gt; is a good default for most applications, but the caching layer is designed to be pluggable. That setCacheHandler call means you can swap in whatever backend makes sense. &lt;a href=\&quot;https://developers.cloudflare.com/r2/\&quot;&gt;&lt;u&gt;R2&lt;/u&gt;&lt;/a&gt; might be a better fit for apps with large cached payloads or different access patterns. We&amp;#39;re also working on improvements to our Cache API that should provide a strong caching layer with less configuration. The goal is flexibility: pick the caching strategy that fits your app.&lt;/p&gt;&lt;p&gt;Live examples running right now:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://app-router-playground.vinext.workers.dev\&quot;&gt;&lt;u&gt;App Router Playground&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://hackernews.vinext.workers.dev\&quot;&gt;&lt;u&gt;Hacker News clone&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://app-router-cloudflare.vinext.workers.dev\&quot;&gt;&lt;u&gt;App Router minimal&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=\&quot;https://pages-router-cloudflare.vinext.workers.dev\&quot;&gt;&lt;u&gt;Pages Router minimal&lt;/u&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;We also have &lt;a href=\&quot;https://next-agents.threepointone.workers.dev/\&quot;&gt;&lt;u&gt;a live example&lt;/u&gt;&lt;/a&gt; of Cloudflare Agents running in a Next.js app, without the need for workarounds like &lt;a href=\&quot;https://developers.cloudflare.com/workers/wrangler/api/#getplatformproxy\&quot;&gt;&lt;u&gt;getPlatformProxy&lt;/u&gt;&lt;/a&gt;, since the entire app now runs in workerd, during both dev and deploy phases. This means being able to use Durable Objects, AI bindings, and every other Cloudflare-specific service without compromise. &lt;a href=\&quot;https://github.com/cloudflare/vinext-agents-example\&quot;&gt;&lt;u&gt;Have a look here.&lt;/u&gt;&lt;/a&gt;   &lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;frameworks-are-a-team-sport\&quot;&gt;Frameworks are a team sport&lt;/h2&gt;\n      &lt;a href=\&quot;#frameworks-are-a-team-sport\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The current deployment target is Cloudflare Workers, but that&amp;#39;s a small part of the picture. Something like 95% of vinext is pure Vite. The routing, the module shims, the SSR pipeline, the RSC integration: none of it is Cloudflare-specific.&lt;/p&gt;&lt;p&gt;Cloudflare is looking to work with other hosting providers about adopting this toolchain for their customers (the lift is minimal — we got a proof-of-concept working on &lt;a href=\&quot;https://vinext-on-vercel.vercel.app/\&quot;&gt;&lt;u&gt;Vercel&lt;/u&gt;&lt;/a&gt; in less than 30 minutes!). This is an open-source project, and for its long term success, we believe it’s important we work with partners across the ecosystem to ensure ongoing investment. PRs from other platforms are welcome. If you&amp;#39;re interested in adding a deployment target, &lt;a href=\&quot;https://github.com/cloudflare/vinext/issues\&quot;&gt;&lt;u&gt;open an issue&lt;/u&gt;&lt;/a&gt; or reach out.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;status-experimental\&quot;&gt;Status: Experimental&lt;/h2&gt;\n      &lt;a href=\&quot;#status-experimental\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;We want to be clear: vinext is experimental. It&amp;#39;s not even one week old, and it has not yet been battle-tested with any meaningful traffic at scale. If you&amp;#39;re evaluating it for a production application, proceed with appropriate caution.&lt;/p&gt;&lt;p&gt;That said, the test suite is extensive: over 1,700 Vitest tests and 380 Playwright E2E tests, including tests ported directly from the Next.js test suite and OpenNext&amp;#39;s Cloudflare conformance suite. We’ve verified it against the Next.js App Router Playground. Coverage sits at 94% of the Next.js 16 API surface.\n\nEarly results from real-world customers are encouraging. We&amp;#39;ve been working with &lt;a href=\&quot;https://ndstudio.gov/\&quot;&gt;&lt;u&gt;National Design Studio&lt;/u&gt;&lt;/a&gt;, a team that&amp;#39;s aiming to modernize every government interface, on one of their beta sites, &lt;a href=\&quot;https://www.cio.gov/\&quot;&gt;&lt;u&gt;CIO.gov&lt;/u&gt;&lt;/a&gt;. They&amp;#39;re already running vinext in production, with meaningful improvements in build times and bundle sizes.&lt;/p&gt;&lt;p&gt;The README is honest about &lt;a href=\&quot;https://github.com/cloudflare/vinext#whats-not-supported-and-wont-be\&quot;&gt;&lt;u&gt;what&amp;#39;s not supported and won&amp;#39;t be&lt;/u&gt;&lt;/a&gt;, and about &lt;a href=\&quot;https://github.com/cloudflare/vinext#known-limitations\&quot;&gt;&lt;u&gt;known limitations&lt;/u&gt;&lt;/a&gt;. We want to be upfront rather than overpromise.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;what-about-pre-rendering\&quot;&gt;What about pre-rendering?&lt;/h2&gt;\n      &lt;a href=\&quot;#what-about-pre-rendering\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;vinext already supports Incremental Static Regeneration (ISR) out of the box. After the first request to any page, it&amp;#39;s cached and revalidated in the background, just like Next.js. That part works today.&lt;/p&gt;&lt;p&gt;vinext does not yet support static pre-rendering at build time. In Next.js, pages without dynamic data get rendered during &lt;code&gt;next build&lt;/code&gt; and served as static HTML. If you have dynamic routes, you use &lt;code&gt;generateStaticParams()&lt;/code&gt; to enumerate which pages to build ahead of time. vinext doesn&amp;#39;t do that… yet.&lt;/p&gt;&lt;p&gt;This was an intentional design decision for launch. It&#39;s  &lt;a href=\&quot;https://github.com/cloudflare/vinext/issues/9\&quot;&gt;on the roadmap&lt;/a&gt;, but if your site is 100% prebuilt HTML with static content, you probably won&#39;t see much benefit from vinext today. That said, if one engineer can spend &lt;span&gt;&amp;#36;&lt;/span&gt;1,100 in tokens and rebuild Next.js, you can probably spend $10 and migrate to a Vite-based framework designed specifically for static content, like &lt;a href=\&quot;https://astro.build/\&quot;&gt;Astro&lt;/a&gt; (which &lt;a href=\&quot;https://blog.cloudflare.com/astro-joins-cloudflare/\&quot;&gt;also deploys to Cloudflare Workers&lt;/a&gt;).&lt;/p&gt;&lt;p&gt;For sites that aren&amp;#39;t purely static, though, we think we can do something better than pre-rendering everything at build time.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;introducing-traffic-aware-pre-rendering\&quot;&gt;Introducing Traffic-aware Pre-Rendering&lt;/h2&gt;\n      &lt;a href=\&quot;#introducing-traffic-aware-pre-rendering\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Next.js pre-renders every page listed in &lt;code&gt;generateStaticParams()&lt;/code&gt; during the build. A site with 10,000 product pages means 10,000 renders at build time, even though 99% of those pages may never receive a request. Builds scale linearly with page count. This is why large Next.js sites end up with 30-minute builds.&lt;/p&gt;&lt;p&gt;So we built &lt;b&gt;Traffic-aware Pre-Rendering&lt;/b&gt; (TPR). It&amp;#39;s experimental today, and we plan to make it the default once we have more real-world testing behind it.&lt;/p&gt;&lt;p&gt;The idea is simple. Cloudflare is already the reverse proxy for your site. We have your traffic data. We know which pages actually get visited. So instead of pre-rendering everything or pre-rendering nothing, vinext queries Cloudflare&amp;#39;s zone analytics at deploy time and pre-renders only the pages that matter.&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;vinext deploy --experimental-tpr\n\n  Building...\n  Build complete (4.2s)\n\n  TPR (experimental): Analyzing traffic for my-store.com (last 24h)\n  TPR: 12,847 unique paths — 184 pages cover 90% of traffic\n  TPR: Pre-rendering 184 pages...\n  TPR: Pre-rendered 184 pages in 8.3s → KV cache\n\n  Deploying to Cloudflare Workers...\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;For a site with 100,000 product pages, the power law means 90% of traffic usually goes to 50 to 200 pages. Those get pre-rendered in seconds. Everything else falls back to on-demand SSR and gets cached via ISR after the first request. Every new deploy refreshes the set based on current traffic patterns. Pages that go viral get picked up automatically. All of this works without &lt;code&gt;generateStaticParams()&lt;/code&gt; and without coupling your build to your production database.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;taking-on-the-next-js-challenge-but-this-time-with-ai\&quot;&gt;Taking on the Next.js challenge, but this time with AI&lt;/h2&gt;\n      &lt;a href=\&quot;#taking-on-the-next-js-challenge-but-this-time-with-ai\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;A project like this would normally take a team of engineers months, if not years. Several teams at various companies have attempted it, and the scope is just enormous. We tried once at Cloudflare! Two routers, 33+ module shims, server rendering pipelines, RSC streaming, file-system routing, middleware, caching, static export. There&amp;#39;s a reason nobody has pulled it off.&lt;/p&gt;&lt;p&gt;This time we did it in under a week. One engineer (technically engineering manager) directing AI.&lt;/p&gt;&lt;p&gt;The first commit landed on February 13. By the end of that same evening, both the Pages Router and App Router had basic SSR working, along with middleware, server actions, and streaming. By the next afternoon, &lt;a href=\&quot;https://app-router-playground.vinext.workers.dev\&quot;&gt;&lt;u&gt;App Router Playground&lt;/u&gt;&lt;/a&gt; was rendering 10 of 11 routes. By day three, &lt;code&gt;vinext deploy&lt;/code&gt; was shipping apps to Cloudflare Workers with full client hydration. The rest of the week was hardening: fixing edge cases, expanding the test suite, bringing API coverage to 94%.&lt;/p&gt;&lt;p&gt;What changed from those earlier attempts? AI got better. Way better.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;why-this-problem-is-made-for-ai\&quot;&gt;Why this problem is made for AI&lt;/h2&gt;\n      &lt;a href=\&quot;#why-this-problem-is-made-for-ai\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Not every project would go this way. This one did because a few things happened to line up at the right time.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Next.js is well-specified.&lt;/b&gt; It has extensive documentation, a massive user base, and years of Stack Overflow answers and tutorials. The API surface is all over the training data. When you ask Claude to implement &lt;code&gt;getServerSideProps&lt;/code&gt; or explain how &lt;code&gt;useRouter&lt;/code&gt; works, it doesn&amp;#39;t hallucinate. It knows how Next works.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Next.js has an elaborate test suite.&lt;/b&gt; The &lt;a href=\&quot;https://github.com/vercel/next.js\&quot;&gt;&lt;u&gt;Next.js repo&lt;/u&gt;&lt;/a&gt; contains thousands of E2E tests covering every feature and edge case. We ported tests directly from their suite (you can see the attribution in the code). This gave us a specification we could verify against mechanically.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Vite is an excellent foundation.&lt;/b&gt; &lt;a href=\&quot;https://vite.dev/\&quot;&gt;&lt;u&gt;Vite&lt;/u&gt;&lt;/a&gt; handles the hard parts of front-end tooling: fast HMR, native ESM, a clean plugin API, production bundling. We didn&amp;#39;t have to build a bundler. We just had to teach it to speak Next.js. &lt;a href=\&quot;https://github.com/vitejs/vite-plugin-rsc\&quot;&gt;&lt;code&gt;&lt;u&gt;@vitejs/plugin-rsc&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; is still early, but it gave us React Server Components support without having to build an RSC implementation from scratch.&lt;/p&gt;&lt;p&gt;&lt;b&gt;The models caught up.&lt;/b&gt; We don&amp;#39;t think this would have been possible even a few months ago. Earlier models couldn&amp;#39;t sustain coherence across a codebase this size. New models can hold the full architecture in context, reason about how modules interact, and produce correct code often enough to keep momentum going. At times, I saw it go into Next, Vite, and React internals to figure out a bug. The state-of-the-art models are impressive, and they seem to keep getting better.&lt;/p&gt;&lt;p&gt;All of those things had to be true at the same time. Well-documented target API, comprehensive test suite, solid build tool underneath, and a model that could actually handle the complexity. Take any one of them away and this doesn&amp;#39;t work nearly as well.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;how-we-actually-built-it\&quot;&gt;How we actually built it&lt;/h2&gt;\n      &lt;a href=\&quot;#how-we-actually-built-it\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Almost every line of code in vinext was written by AI. But here&amp;#39;s the thing that matters more: every line passes the same quality gates you&amp;#39;d expect from human-written code. The project has 1,700+ Vitest tests, 380 Playwright E2E tests, full TypeScript type checking via tsgo, and linting via oxlint. Continuous integration runs all of it on every pull request. Establishing a set of good guardrails is critical to making AI productive in a codebase.&lt;/p&gt;&lt;p&gt;The process started with a plan. I spent a couple of hours going back and forth with Claude in &lt;a href=\&quot;https://opencode.ai\&quot;&gt;&lt;u&gt;OpenCode&lt;/u&gt;&lt;/a&gt; to define the architecture: what to build, in what order, which abstractions to use. That plan became the north star. From there, the workflow was straightforward:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Define a task (&amp;quot;implement the &lt;code&gt;next/navigation&lt;/code&gt; shim with usePathname, &lt;code&gt;useSearchParams&lt;/code&gt;, &lt;code&gt;useRouter&lt;/code&gt;&amp;quot;).&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Let the AI write the implementation and tests.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Run the test suite.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;If tests pass, merge. If not, give the AI the error output and let it iterate.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Repeat.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;We wired up AI agents for code review too. When a PR was opened, an agent reviewed it. When review comments came back, another agent addressed them. The feedback loop was mostly automated. &lt;/p&gt;&lt;p&gt;It didn&amp;#39;t work perfectly every time. There were PRs that were just wrong. The AI would confidently implement something that seemed right but didn&amp;#39;t match actual Next.js behavior. I had to course-correct regularly. Architecture decisions, prioritization, knowing when the AI was headed down a dead end: that was all me. When you give AI good direction, good context, and good guardrails, it can be very productive. But the human still has to steer.&lt;/p&gt;&lt;p&gt;For browser-level testing, I used &lt;a href=\&quot;https://github.com/vercel-labs/agent-browser\&quot;&gt;&lt;u&gt;agent-browser&lt;/u&gt;&lt;/a&gt; to verify actual rendered output, client-side navigation, and hydration behavior. Unit tests miss a lot of subtle browser issues. This caught them.&lt;/p&gt;&lt;p&gt;Over the course of the project, we ran over 800 sessions in OpenCode. Total cost: roughly $1,100 in Claude API tokens.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;what-this-means-for-software\&quot;&gt;What this means for software&lt;/h2&gt;\n      &lt;a href=\&quot;#what-this-means-for-software\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Why do we have so many layers in the stack? This project forced me to think deeply about this question. And to consider how AI impacts the answer.&lt;/p&gt;&lt;p&gt;Most abstractions in software exist because humans need help. We couldn&amp;#39;t hold the whole system in our heads, so we built layers to manage the complexity for us. Each layer made the next person&amp;#39;s job easier. That&amp;#39;s how you end up with frameworks on top of frameworks, wrapper libraries, thousands of lines of glue code.&lt;/p&gt;&lt;p&gt;AI doesn&amp;#39;t have the same limitation. It can hold the whole system in context and just write the code. It doesn&amp;#39;t need an intermediate framework to stay organized. It just needs a spec and a foundation to build on.&lt;/p&gt;&lt;p&gt;It&amp;#39;s not clear yet which abstractions are truly foundational and which ones were just crutches for human cognition. That line is going to shift a lot over the next few years. But vinext is a data point. We took an API contract, a build tool, and an AI model, and the AI wrote everything in between. No intermediate framework needed. We think this pattern will repeat across a lot of software. The layers we&amp;#39;ve built up over the years aren&amp;#39;t all going to make it.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;acknowledgments\&quot;&gt;Acknowledgments&lt;/h2&gt;\n      &lt;a href=\&quot;#acknowledgments\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Thanks to the Vite team. &lt;a href=\&quot;https://vite.dev/\&quot;&gt;&lt;u&gt;Vite&lt;/u&gt;&lt;/a&gt; is the foundation this whole thing stands on. &lt;a href=\&quot;https://github.com/vitejs/vite-plugin-rsc\&quot;&gt;&lt;code&gt;&lt;u&gt;@vitejs/plugin-rsc&lt;/u&gt;&lt;/code&gt;&lt;/a&gt; is still early days, but it gave me RSC support without having to build that from scratch, which would have been a dealbreaker. The Vite maintainers were responsive and helpful as I pushed the plugin into territory it hadn&amp;#39;t been tested in before.&lt;/p&gt;&lt;p&gt;We also want to acknowledge the &lt;a href=\&quot;https://nextjs.org/\&quot;&gt;&lt;u&gt;Next.js&lt;/u&gt;&lt;/a&gt; team. They&amp;#39;ve spent years building a framework that raised the bar for what React development could look like. The fact that their API surface is so well-documented and their test suite so comprehensive is a big part of what made this project possible. vinext wouldn&amp;#39;t exist without the standard they set.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;try-it\&quot;&gt;Try it&lt;/h2&gt;\n      &lt;a href=\&quot;#try-it\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;vinext includes an &lt;a href=\&quot;https://agentskills.io\&quot;&gt;&lt;u&gt;Agent Skill&lt;/u&gt;&lt;/a&gt; that handles migration for you. It works with Claude Code, OpenCode, Cursor, Codex, and dozens of other AI coding tools. Install it, open your Next.js project, and tell the AI to migrate:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;npx skills add cloudflare/vinext&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Then open your Next.js project in any supported tool and say:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;migrate this project to vinext&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The skill handles compatibility checking, dependency installation, config generation, and dev server startup. It knows what vinext supports and will flag anything that needs manual attention.&lt;/p&gt;&lt;p&gt;Or if you prefer doing it by hand:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;npx vinext init    # Migrate an existing Next.js project\nnpx vinext dev     # Start the dev server\nnpx vinext deploy  # Ship to Cloudflare Workers&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The source is at &lt;a href=\&quot;https://github.com/cloudflare/vinext\&quot;&gt;&lt;u&gt;github.com/cloudflare/vinext&lt;/u&gt;&lt;/a&gt;. Issues, PRs, and feedback are welcome.&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2026-02-24T20:00:00.899Z&quot;],&quot;updated_at&quot;:[0,&quot;2026-02-27T13:30:30.142Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/64oL10LCSz30EiEHWVdJPG/aeaed48a681ec3d5bc9d8cb6e5e30a96/BLOG-3194_1.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;6Foe3R8of95cWVnQwe5Toi&quot;],&quot;name&quot;:[0,&quot;AI&quot;],&quot;slug&quot;:[0,&quot;ai&quot;]}],[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;1Wf1Dpb2AFicG44jpRT29y&quot;],&quot;name&quot;:[0,&quot;Workers AI&quot;],&quot;slug&quot;:[0,&quot;workers-ai&quot;]}],[0,{&quot;id&quot;:[0,&quot;4HIPcb68qM0e26fIxyfzwQ&quot;],&quot;name&quot;:[0,&quot;Developers&quot;],&quot;slug&quot;:[0,&quot;developers&quot;]}],[0,{&quot;id&quot;:[0,&quot;3JAY3z7p7An94s6ScuSQPf&quot;],&quot;name&quot;:[0,&quot;Developer Platform&quot;],&quot;slug&quot;:[0,&quot;developer-platform&quot;]}],[0,{&quot;id&quot;:[0,&quot;78aSAeMjGNmCuetQ7B4OgU&quot;],&quot;name&quot;:[0,&quot;JavaScript&quot;],&quot;slug&quot;:[0,&quot;javascript&quot;]}],[0,{&quot;id&quot;:[0,&quot;3txfsA7N73yBL9g3VPBLL0&quot;],&quot;name&quot;:[0,&quot;Open Source&quot;],&quot;slug&quot;:[0,&quot;open-source&quot;]}],[0,{&quot;id&quot;:[0,&quot;4gN0ARax0fHxjtZL07THOe&quot;],&quot;name&quot;:[0,&quot;Performance&quot;],&quot;slug&quot;:[0,&quot;performance&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;Steve Faulkner&quot;],&quot;slug&quot;:[0,&quot;steve-faulkner&quot;],&quot;bio&quot;:[0],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5QLe2KDuN7J0YVnb2gf743/2b6327152ff0e693cf3d142bbbefcd44/1517689834276.jpg&quot;],&quot;location&quot;:[0,&quot;Chicago, IL&quot;],&quot;website&quot;:[0],&quot;twitter&quot;:[0],&quot;facebook&quot;:[0],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;One engineer used AI to rebuild Next.js on Vite in a week. vinext builds up to 4x faster, produces 57% smaller bundles, and deploys to Cloudflare Workers with a single command.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;LOC: How we rebuilt Next.js with AI in one week&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;No Page for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;No Page for Locale&quot;],&quot;koKR&quot;:[0,&quot;Translated for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/vinext&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;How we rebuilt Next.js with AI in one week&quot;],&quot;description&quot;:[0,&quot;One engineer used AI to rebuild Next.js on Vite in a week. vinext builds up to 4x faster, produces 57% smaller bundles, and deploys to Cloudflare Workers with a single command.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/720QQcrdICiSJXrr9VoixA/4934fffd05d1ca10cc661238b381308e/BLOG-3194_OG.png&quot;]}],&quot;publicly_index&quot;:[0,true]}],[0,{&quot;id&quot;:[0,&quot;2lWwgP33VT0NJjZ3pWShsw&quot;],&quot;title&quot;:[0,&quot;Code Mode: give agents an entire API in 1,000 tokens&quot;],&quot;slug&quot;:[0,&quot;code-mode-mcp&quot;],&quot;excerpt&quot;:[0,&quot;The Cloudflare API has over 2,500 endpoints. Exposing each one as an MCP tool would consume over 2 million tokens. With Code Mode, we collapsed all of it into two tools and roughly 1,000 tokens of context.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;&lt;a href=\&quot;https://www.cloudflare.com/learning/ai/what-is-model-context-protocol-mcp/\&quot;&gt;&lt;u&gt;Model Context Protocol (MCP)&lt;/u&gt;&lt;/a&gt; has become the standard way for AI agents to use external tools. But there is a tension at its core: agents need many tools to do useful work, yet every tool added fills the model&amp;#39;s context window, leaving less room for the actual task. &lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;https://blog.cloudflare.com/code-mode/\&quot;&gt;&lt;u&gt;Code Mode&lt;/u&gt;&lt;/a&gt; is a technique we first introduced for reducing context window usage during agent tool use. Instead of describing every operation as a separate tool, let the model write code against a typed SDK and execute the code safely in a &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/bindings/worker-loader/\&quot;&gt;&lt;u&gt;Dynamic Worker Loader&lt;/u&gt;&lt;/a&gt;. The code acts as a compact plan. The model can explore tool operations, compose multiple calls, and return just the data it needs. Anthropic independently explored the same pattern in their &lt;a href=\&quot;https://www.anthropic.com/engineering/code-execution-with-mcp\&quot;&gt;&lt;u&gt;Code Execution with MCP&lt;/u&gt;&lt;/a&gt; post.&lt;/p&gt;&lt;p&gt;Today we are introducing &lt;a href=\&quot;https://github.com/cloudflare/mcp\&quot;&gt;&lt;u&gt;a new MCP server&lt;/u&gt;&lt;/a&gt; for the &lt;a href=\&quot;https://developers.cloudflare.com/api/\&quot;&gt;&lt;u&gt;entire Cloudflare API&lt;/u&gt;&lt;/a&gt; — from &lt;a href=\&quot;https://developers.cloudflare.com/dns/\&quot;&gt;&lt;u&gt;DNS&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://developers.cloudflare.com/cloudflare-one/\&quot;&gt;&lt;u&gt;Zero Trust&lt;/u&gt;&lt;/a&gt; to &lt;a href=\&quot;https://workers.cloudflare.com/product/workers/\&quot;&gt;&lt;u&gt;Workers&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://workers.cloudflare.com/product/r2/\&quot;&gt;&lt;u&gt;R2&lt;/u&gt;&lt;/a&gt; — that uses Code Mode. With just two tools, search() and execute(), the server is able to provide access to the entire Cloudflare API over MCP, while consuming only around 1,000 tokens. The footprint stays fixed, no matter how many API endpoints exist.&lt;/p&gt;&lt;p&gt;For a large API like the Cloudflare API, Code Mode reduces the number of input tokens used by 99.9%. An equivalent MCP server without Code Mode would consume 1.17 million tokens — more than the entire context window of the most advanced foundation models.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/7KqjQiI09KubtUSe9Dgf0N/6f37896084c7f34abca7dc36ab18d8e0/image2.png\&quot; alt=\&quot;images/BLOG-3184 3\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;501\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;&lt;sup&gt;&lt;i&gt;Code mode savings vs native MCP, measured with &lt;/i&gt;&lt;/sup&gt;&lt;a href=\&quot;https://github.com/openai/tiktoken\&quot;&gt;&lt;sup&gt;&lt;i&gt;&lt;u&gt;tiktoken&lt;/u&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;sup&gt;&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;You can start using this new Cloudflare MCP server today. And we are also open-sourcing a new &lt;a href=\&quot;https://github.com/cloudflare/agents/tree/main/packages/codemode\&quot;&gt;&lt;u&gt;Code Mode SDK&lt;/u&gt;&lt;/a&gt; in the &lt;a href=\&quot;https://github.com/cloudflare/agents\&quot;&gt;&lt;u&gt;Cloudflare Agents SDK&lt;/u&gt;&lt;/a&gt;, so you can use the same approach in your own MCP servers and AI Agents.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;server-side-code-mode\&quot;&gt;Server‑side Code Mode&lt;/h3&gt;\n      &lt;a href=\&quot;#server-side-code-mode\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    \n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/ir1KOZHIjVNyqdC9FSuZs/334456a711fb2b5fa612b3fc0b4adc48/images_BLOG-3184_2.png\&quot; alt=\&quot;images/BLOG-3184 2\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;1248\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;This new MCP server applies Code Mode server-side. Instead of thousands of tools, the server exports just two: &lt;code&gt;search()&lt;/code&gt; and &lt;code&gt;execute()&lt;/code&gt;. Both are powered by Code Mode. Here is the full tool surface area that gets loaded into the model context:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;[\n  {\n    &amp;quot;name&amp;quot;: &amp;quot;search&amp;quot;,\n    &amp;quot;description&amp;quot;: &amp;quot;Search the Cloudflare OpenAPI spec. All $refs are pre-resolved inline.&amp;quot;,\n    &amp;quot;inputSchema&amp;quot;: {\n      &amp;quot;type&amp;quot;: &amp;quot;object&amp;quot;,\n      &amp;quot;properties&amp;quot;: {\n        &amp;quot;code&amp;quot;: {\n          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,\n          &amp;quot;description&amp;quot;: &amp;quot;JavaScript async arrow function to search the OpenAPI spec&amp;quot;\n        }\n      },\n      &amp;quot;required&amp;quot;: [&amp;quot;code&amp;quot;]\n    }\n  },\n  {\n    &amp;quot;name&amp;quot;: &amp;quot;execute&amp;quot;,\n    &amp;quot;description&amp;quot;: &amp;quot;Execute JavaScript code against the Cloudflare API.&amp;quot;,\n    &amp;quot;inputSchema&amp;quot;: {\n      &amp;quot;type&amp;quot;: &amp;quot;object&amp;quot;,\n      &amp;quot;properties&amp;quot;: {\n        &amp;quot;code&amp;quot;: {\n          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,\n          &amp;quot;description&amp;quot;: &amp;quot;JavaScript async arrow function to execute&amp;quot;\n        }\n      },\n      &amp;quot;required&amp;quot;: [&amp;quot;code&amp;quot;]\n    }\n  }\n]\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;To discover what it can do, the agent calls &lt;code&gt;search()&lt;/code&gt;. It writes JavaScript against a typed representation of the OpenAPI spec. The agent can filter endpoints by product, path, tags, or any other metadata and narrow thousands of endpoints to the handful it needs. The full OpenAPI spec never enters the model context. The agent only interacts with it through code.&lt;/p&gt;&lt;p&gt;When the agent is ready to act, it calls &lt;code&gt;execute()&lt;/code&gt;. The agent writes code that can make Cloudflare API requests, handle pagination, check responses, and chain operations together in a single execution. &lt;/p&gt;&lt;p&gt;Both tools run the generated code inside a &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/bindings/worker-loader/\&quot;&gt;&lt;u&gt;Dynamic Worker&lt;/u&gt;&lt;/a&gt; isolate — a lightweight V8 sandbox with no file system, no environment variables to leak through prompt injection and external fetches disabled by default. Outbound requests can be explicitly controlled with outbound fetch handlers when needed.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h4 id=\&quot;example-protecting-an-origin-from-ddos-attacks\&quot;&gt;Example: Protecting an origin from DDoS attacks&lt;/h4&gt;\n      &lt;a href=\&quot;#example-protecting-an-origin-from-ddos-attacks\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Suppose a user tells their agent: &amp;quot;protect my origin from DDoS attacks.&amp;quot; The agent&amp;#39;s first step is to consult documentation. It might call the &lt;a href=\&quot;https://developers.cloudflare.com/agents/model-context-protocol/mcp-servers-for-cloudflare/\&quot;&gt;&lt;u&gt;Cloudflare Docs MCP Server&lt;/u&gt;&lt;/a&gt;, use a &lt;a href=\&quot;https://github.com/cloudflare/skills\&quot;&gt;&lt;u&gt;Cloudflare Skill&lt;/u&gt;&lt;/a&gt;, or search the web directly. From the docs it learns: put &lt;a href=\&quot;https://www.cloudflare.com/application-services/products/waf/\&quot;&gt;&lt;u&gt;Cloudflare WAF&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://www.cloudflare.com/ddos/\&quot;&gt;&lt;u&gt;DDoS protection&lt;/u&gt;&lt;/a&gt; rules in front of the origin.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Step 1: Search for the right endpoints\n&lt;/b&gt;The &lt;code&gt;search&lt;/code&gt; tool gives the model a &lt;code&gt;spec&lt;/code&gt; object: the full Cloudflare OpenAPI spec with all &lt;code&gt;$refs&lt;/code&gt; pre-resolved. The model writes JavaScript against it. Here the agent looks for WAF and ruleset endpoints on a zone:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;async () =&amp;gt; {\n  const results = [];\n  for (const [path, methods] of Object.entries(spec.paths)) {\n    if (path.includes(&amp;#039;/zones/&amp;#039;) &amp;amp;&amp;amp;\n        (path.includes(&amp;#039;firewall/waf&amp;#039;) || path.includes(&amp;#039;rulesets&amp;#039;))) {\n      for (const [method, op] of Object.entries(methods)) {\n        results.push({ method: method.toUpperCase(), path, summary: op.summary });\n      }\n    }\n  }\n  return results;\n}\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The server runs this code in a Workers isolate and returns:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;[\n  { &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;,    &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/firewall/waf/packages&amp;quot;,              &amp;quot;summary&amp;quot;: &amp;quot;List WAF packages&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;PATCH&amp;quot;,  &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/firewall/waf/packages/{package_id}&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;Update a WAF package&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;,    &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/firewall/waf/packages/{package_id}/rules&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;List WAF rules&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;PATCH&amp;quot;,  &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/firewall/waf/packages/{package_id}/rules/{rule_id}&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;Update a WAF rule&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;,    &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets&amp;quot;,                           &amp;quot;summary&amp;quot;: &amp;quot;List zone rulesets&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;POST&amp;quot;,   &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets&amp;quot;,                           &amp;quot;summary&amp;quot;: &amp;quot;Create a zone ruleset&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;,    &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets/phases/{ruleset_phase}/entrypoint&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;Get a zone entry point ruleset&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;PUT&amp;quot;,    &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets/phases/{ruleset_phase}/entrypoint&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;Update a zone entry point ruleset&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;POST&amp;quot;,   &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets/{ruleset_id}/rules&amp;quot;,        &amp;quot;summary&amp;quot;: &amp;quot;Create a zone ruleset rule&amp;quot; },\n  { &amp;quot;method&amp;quot;: &amp;quot;PATCH&amp;quot;,  &amp;quot;path&amp;quot;: &amp;quot;/zones/{zone_id}/rulesets/{ruleset_id}/rules/{rule_id}&amp;quot;, &amp;quot;summary&amp;quot;: &amp;quot;Update a zone ruleset rule&amp;quot; }\n]\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The full Cloudflare API spec has over 2,500 endpoints. The model narrowed that to the WAF and ruleset endpoints it needs, without any of the spec entering the context window. &lt;/p&gt;&lt;p&gt;The model can also drill into a specific endpoint&amp;#39;s schema before calling it. Here it inspects what phases are available on zone rulesets:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;async () =&amp;gt; {\n  const op = spec.paths[&amp;#039;/zones/{zone_id}/rulesets&amp;#039;]?.get;\n  const items = op?.responses?.[&amp;#039;200&amp;#039;]?.content?.[&amp;#039;application/json&amp;#039;]?.schema;\n  // Walk the schema to find the phase enum\n  const props = items?.allOf?.[1]?.properties?.result?.items?.allOf?.[1]?.properties;\n  return { phases: props?.phase?.enum };\n}\n\n{\n  &amp;quot;phases&amp;quot;: [\n    &amp;quot;ddos_l4&amp;quot;, &amp;quot;ddos_l7&amp;quot;,\n    &amp;quot;http_request_firewall_custom&amp;quot;, &amp;quot;http_request_firewall_managed&amp;quot;,\n    &amp;quot;http_response_firewall_managed&amp;quot;, &amp;quot;http_ratelimit&amp;quot;,\n    &amp;quot;http_request_redirect&amp;quot;, &amp;quot;http_request_transform&amp;quot;,\n    &amp;quot;magic_transit&amp;quot;, &amp;quot;magic_transit_managed&amp;quot;\n  ]\n}\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The agent now knows the exact phases it needs: &lt;code&gt;ddos_l7 &lt;/code&gt;for DDoS protection and &lt;code&gt;http_request_firewall_managed&lt;/code&gt; for WAF.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Step 2: Act on the API\n&lt;/b&gt;The agent switches to using &lt;code&gt;execute&lt;/code&gt;. The sandbox gets a &lt;code&gt;cloudflare.request()&lt;/code&gt; client that can make authenticated calls to the Cloudflare API. First the agent checks what rulesets already exist on the zone:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;async () =&amp;gt; {\n  const response = await cloudflare.request({\n    method: &amp;quot;GET&amp;quot;,\n    path: `/zones/${zoneId}/rulesets`\n  });\n  return response.result.map(rs =&amp;gt; ({\n    name: rs.name, phase: rs.phase, kind: rs.kind\n  }));\n}\n\n[\n  { &amp;quot;name&amp;quot;: &amp;quot;DDoS L7&amp;quot;,          &amp;quot;phase&amp;quot;: &amp;quot;ddos_l7&amp;quot;,                        &amp;quot;kind&amp;quot;: &amp;quot;managed&amp;quot; },\n  { &amp;quot;name&amp;quot;: &amp;quot;Cloudflare Managed&amp;quot;,&amp;quot;phase&amp;quot;: &amp;quot;http_request_firewall_managed&amp;quot;, &amp;quot;kind&amp;quot;: &amp;quot;managed&amp;quot; },\n  { &amp;quot;name&amp;quot;: &amp;quot;Custom rules&amp;quot;,     &amp;quot;phase&amp;quot;: &amp;quot;http_request_firewall_custom&amp;quot;,   &amp;quot;kind&amp;quot;: &amp;quot;zone&amp;quot; }\n]\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;The agent sees that managed DDoS and WAF rulesets already exist. It can now chain calls to inspect their rules and update sensitivity levels in a single execution:&lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;async () =&amp;gt; {\n  // Get the current DDoS L7 entrypoint ruleset\n  const ddos = await cloudflare.request({\n    method: &amp;quot;GET&amp;quot;,\n    path: `/zones/${zoneId}/rulesets/phases/ddos_l7/entrypoint`\n  });\n\n  // Get the WAF managed ruleset\n  const waf = await cloudflare.request({\n    method: &amp;quot;GET&amp;quot;,\n    path: `/zones/${zoneId}/rulesets/phases/http_request_firewall_managed/entrypoint`\n  });\n}\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;This entire operation, from searching the spec and inspecting a schema to listing rulesets and fetching DDoS and WAF configurations, took four tool calls.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;the-cloudflare-mcp-server\&quot;&gt;The Cloudflare MCP server&lt;/h3&gt;\n      &lt;a href=\&quot;#the-cloudflare-mcp-server\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;We started with MCP servers for individual products. Want an agent that manages DNS? Add the &lt;a href=\&quot;https://github.com/cloudflare/mcp-server-cloudflare/tree/main/apps/dns-analytics\&quot;&gt;&lt;u&gt;DNS MCP server&lt;/u&gt;&lt;/a&gt;. Want Workers logs? Add the &lt;a href=\&quot;https://developers.cloudflare.com/agents/model-context-protocol/mcp-servers-for-cloudflare/\&quot;&gt;&lt;u&gt;Workers Observability MCP server&lt;/u&gt;&lt;/a&gt;. Each server exported a fixed set of tools that mapped to API operations. This worked when the tool set was small, but the Cloudflare API has over 2,500 endpoints. No collection of hand-maintained servers could keep up.&lt;/p&gt;&lt;p&gt;The Cloudflare MCP server simplifies this. Two tools, roughly 1,000 tokens, and coverage of every endpoint in the API. When we add new products, the same &lt;code&gt;search()&lt;/code&gt; and &lt;code&gt;execute()&lt;/code&gt; code paths discover and call them — no new tool definitions, no new MCP servers. It even has support for the &lt;a href=\&quot;https://developers.cloudflare.com/analytics/graphql-api/\&quot;&gt;&lt;u&gt;GraphQL Analytics API&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Our MCP server is built on the latest MCP specifications. It is OAuth 2.1 compliant, using &lt;a href=\&quot;https://github.com/cloudflare/workers-oauth-provider\&quot;&gt;&lt;u&gt;Workers OAuth Provider&lt;/u&gt;&lt;/a&gt; to downscope the token to selected permissions approved by the user when connecting. The agent  only gets the capabilities the user explicitly granted. &lt;/p&gt;&lt;p&gt;For developers, this means you can use a simple agent loop and still give your agent access to the full Cloudflare API with built-in progressive capability discovery.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/60ZoSFdK6t6hR6DpAn6Bub/93b86239cedb06d7fb265859be7590e8/images_BLOG-3184_4.png\&quot; alt=\&quot;images/BLOG-3184 4\&quot; class=\&quot;kg-image\&quot; width=\&quot;1552\&quot; height=\&quot;1601\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;comparing-approaches-to-context-reduction\&quot;&gt;Comparing approaches to context reduction&lt;/h3&gt;\n      &lt;a href=\&quot;#comparing-approaches-to-context-reduction\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Several approaches have emerged to reduce how many tokens MCP tools consume:&lt;/p&gt;&lt;p&gt;&lt;b&gt;Client-side Code Mode&lt;/b&gt; was our first experiment. The model writes TypeScript against typed SDKs and runs it in a Dynamic Worker Loader on the client. The tradeoff is that it requires the agent to ship with secure sandbox access. Code Mode is implemented in &lt;a href=\&quot;https://block.github.io/goose/blog/2025/12/15/code-mode-mcp/\&quot;&gt;&lt;u&gt;Goose&lt;/u&gt;&lt;/a&gt; and Anthropics Claude SDK as &lt;a href=\&quot;https://platform.claude.com/docs/en/agents-and-tools/tool-use/programmatic-tool-calling\&quot;&gt;&lt;u&gt;Programmatic Tool Calling&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Command-line interfaces &lt;/b&gt;are another path. CLIs are self-documenting and reveal capabilities as the agent explores. Tools like &lt;a href=\&quot;https://openclaw.ai/\&quot;&gt;&lt;u&gt;OpenClaw&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://blog.cloudflare.com/moltworker-self-hosted-ai-agent/\&quot;&gt;&lt;u&gt;Moltworker&lt;/u&gt;&lt;/a&gt; convert MCP servers into CLIs using &lt;a href=\&quot;https://github.com/steipete/mcporter\&quot;&gt;&lt;u&gt;MCPorter&lt;/u&gt;&lt;/a&gt; to give agents progressive disclosure. The limitation is obvious: the agent needs a shell, which not every environment provides and which introduces a much broader attack surface than a sandboxed isolate.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Dynamic tool search&lt;/b&gt;, as used by &lt;a href=\&quot;https://x.com/trq212/status/2011523109871108570\&quot;&gt;&lt;u&gt;Anthropic in Claude Code&lt;/u&gt;&lt;/a&gt;, surfaces a smaller set of tools hopefully relevant to the current task. It shrinks context use but now requires a search function that must be maintained and evaluated, and each matched tool still uses tokens.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5FPxVAuJggv7A08DbPsksb/aacb9087a79d08a1430ea87bb6960ad3/images_BLOG-3184_5.png\&quot; alt=\&quot;images/BLOG-3184 5\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;1966\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;Each approach solves a real problem. But for MCP servers specifically, server-side Code Mode combines their strengths: fixed token cost regardless of API size, no modifications needed on the agent side, progressive discovery built in, and safe execution inside a sandboxed isolate. The agent just calls two tools with code. Everything else happens on the server.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;get-started-today\&quot;&gt;Get started today&lt;/h3&gt;\n      &lt;a href=\&quot;#get-started-today\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;The Cloudflare MCP server is available now. Point your MCP client at the server URL and you&amp;#39;ll be redirected to Cloudflare to authorize and select the permissions to grant to your agent. Add this config to your MCP client: &lt;/p&gt;\n            &lt;pre class=\&quot;language-javascript\&quot;&gt;&lt;code class=\&quot;language-javascript\&quot;&gt;{\n  &amp;quot;mcpServers&amp;quot;: {\n    &amp;quot;cloudflare-api&amp;quot;: {\n      &amp;quot;url&amp;quot;: &amp;quot;https://mcp.cloudflare.com/mcp&amp;quot;\n    }\n  }\n}\n&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;For CI/CD, automation, or if you prefer managing tokens yourself, create a Cloudflare API token with the permissions you need. Both user tokens and account tokens are supported and can be passed as bearer tokens in the &lt;code&gt;Authorization&lt;/code&gt; header.&lt;/p&gt;&lt;p&gt;More information on different MCP setup configurations can be found at the &lt;a href=\&quot;https://github.com/cloudflare/mcp\&quot;&gt;&lt;u&gt;Cloudflare MCP repository&lt;/u&gt;&lt;/a&gt;.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;looking-forward\&quot;&gt;Looking forward&lt;/h3&gt;\n      &lt;a href=\&quot;#looking-forward\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Code Mode solves context costs for a single API. But agents rarely talk to one service. A developer&amp;#39;s agent might need the Cloudflare API alongside GitHub, a database, and an internal docs server. Each additional MCP server brings the same context window pressure we started with.&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;https://blog.cloudflare.com/zero-trust-mcp-server-portals/\&quot;&gt;&lt;u&gt;Cloudflare MCP Server Portals&lt;/u&gt;&lt;/a&gt; let you compose multiple MCP servers behind a single gateway with unified auth and access control. We are building a first-class Code Mode integration for all your MCP servers, and exposing them to agents with built-in progressive discovery and the same fixed-token footprint, regardless of how many services sit behind the gateway.&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2026-02-20T14:00+00:00&quot;],&quot;updated_at&quot;:[0,&quot;2026-02-28T21:34:17.836Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6YAHY3FwNCFMGMYtIDuri7/139b77ff4e1b71ca706af22064222f67/images_BLOG-3184_1.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;4HIPcb68qM0e26fIxyfzwQ&quot;],&quot;name&quot;:[0,&quot;Developers&quot;],&quot;slug&quot;:[0,&quot;developers&quot;]}],[0,{&quot;id&quot;:[0,&quot;3JAY3z7p7An94s6ScuSQPf&quot;],&quot;name&quot;:[0,&quot;Developer Platform&quot;],&quot;slug&quot;:[0,&quot;developer-platform&quot;]}],[0,{&quot;id&quot;:[0,&quot;6Foe3R8of95cWVnQwe5Toi&quot;],&quot;name&quot;:[0,&quot;AI&quot;],&quot;slug&quot;:[0,&quot;ai&quot;]}],[0,{&quot;id&quot;:[0,&quot;1Wf1Dpb2AFicG44jpRT29y&quot;],&quot;name&quot;:[0,&quot;Workers AI&quot;],&quot;slug&quot;:[0,&quot;workers-ai&quot;]}],[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;2kPXcZlQ7I9S1hKI5tRYxl&quot;],&quot;name&quot;:[0,&quot;Optimization&quot;],&quot;slug&quot;:[0,&quot;optimization&quot;]}],[0,{&quot;id&quot;:[0,&quot;3txfsA7N73yBL9g3VPBLL0&quot;],&quot;name&quot;:[0,&quot;Open Source&quot;],&quot;slug&quot;:[0,&quot;open-source&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;Matt Carey&quot;],&quot;slug&quot;:[0,&quot;matt-carey&quot;],&quot;bio&quot;:[0],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3tQWp2cSHTttrxFseVLgH9/e468b31725cc9f8c61dae5e87b8da6a0/91c78ad4-3d50-4256-872b-ec4398e8f7f1_224x224.png&quot;],&quot;location&quot;:[0,&quot;London&quot;],&quot;website&quot;:[0],&quot;twitter&quot;:[0,&quot;mattzcarey&quot;],&quot;facebook&quot;:[0],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;The Cloudflare API has over 2,500 endpoints. Exposing each one as an MCP tool would consume over 2 million tokens. With Code Mode, we collapsed all of it into two tools and roughly 1,000 tokens of context.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;LOC: Code Mode: give agents an entire API in 1,000 tokens&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;No Page for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;Translated for Locale&quot;],&quot;koKR&quot;:[0,&quot;Translated for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/code-mode-mcp&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;Code Mode: give agents an entire API in 1,000 tokens&quot;],&quot;description&quot;:[0,&quot;The Cloudflare API has over 2,500 endpoints. Exposing each one as an MCP tool would consume over 2 million tokens. With Code Mode, we collapsed all of it into two tools and roughly 1,000 tokens of context.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2080o6v9LBfIFbLUW8elRE/3cfaeb0dc0fa56bcbe4c332b1942a167/Code_Mode-_give_agents_an_entire_API_in_1_000_tokens-OG.png&quot;]}],&quot;publicly_index&quot;:[0,true]}],[0,{&quot;id&quot;:[0,&quot;2u7SNZ4BZcQYHZYKqmdEaM&quot;],&quot;title&quot;:[0,&quot;Building vertical microfrontends on Cloudflare’s platform&quot;],&quot;slug&quot;:[0,&quot;vertical-microfrontends&quot;],&quot;excerpt&quot;:[0,&quot;Deploy multiple Workers under a single domain with the ability to make them feel like single-page applications. We take a look at how service bindings enable URL path routing to multiple projects.&quot;],&quot;featured&quot;:[0,false],&quot;html&quot;:[0,&quot;&lt;p&gt;&lt;i&gt;Updated at 6:55 a.m. PT&lt;/i&gt;&lt;/p&gt;&lt;p&gt;Today, we’re introducing a new Worker template for Vertical Microfrontends (VMFE). &lt;a href=\&quot;https://dash.cloudflare.com/?to=/:account/workers-and-pages/create?type=vmfe\&quot;&gt;&lt;u&gt;This template&lt;/u&gt;&lt;/a&gt; allows you to map multiple independent &lt;a href=\&quot;https://workers.cloudflare.com/\&quot;&gt;&lt;u&gt;Cloudflare Workers&lt;/u&gt;&lt;/a&gt; to a single domain, enabling teams to work in complete silos — shipping marketing, docs, and dashboards independently — while presenting a single, seamless application to the user.&lt;/p&gt;&lt;a href=\&quot;https://dash.cloudflare.com/?to=/:account/workers-and-pages/create?type=vmfe\&quot;&gt;&lt;img src=\&quot;https://deploy.workers.cloudflare.com/button\&quot; alt=\&quot;Deploy to Cloudflare\&quot;/&gt;&lt;/a&gt;\n&lt;p&gt;&lt;p&gt;Most microfrontend architectures are &amp;quot;horizontal&amp;quot;, meaning different &lt;i&gt;parts&lt;/i&gt; of a single page are fetched from different services. Vertical microfrontends take a different approach by splitting the application by URL path. In this model, a team owning the `/blog` path doesn&amp;#39;t &lt;i&gt;just&lt;/i&gt; own a component; they own the entire vertical stack for that route – framework, library choice, CI/CD and more. Owning the entire stack of a path, or set of paths, allows teams to have true ownership of their work and ship with confidence.&lt;/p&gt;&lt;p&gt;Teams face problems as they grow, where different frameworks serve varying use cases. A marketing website could be better utilized with Astro, for example, while a dashboard might be better with React. Or say you have a monolithic code base where many teams ship as a collective. An update to add new features from several teams can get frustratingly rolled back because a single team introduced a regression. How do we solve the problem of obscuring the technical implementation details away from the user and letting teams ship a cohesive user experience with full autonomy and control of their domains?&lt;/p&gt;&lt;p&gt;Vertical microfrontends can be the answer. Let’s dive in and explore how they solve developer pain points together.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;what-are-vertical-microfrontends\&quot;&gt;What are vertical microfrontends?&lt;/h2&gt;\n      &lt;a href=\&quot;#what-are-vertical-microfrontends\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;A vertical microfrontend is an architectural pattern where a single independent team owns an entire slice of the application’s functionality, from the user interface all the way down to the &lt;a href=\&quot;https://www.cloudflare.com/learning/serverless/glossary/what-is-ci-cd/\&quot;&gt;CI/CD pipeline&lt;/a&gt;. These slices are defined by paths on a domain where you can associate individual Workers with specific paths:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Rust\&quot;&gt;&lt;code class=\&quot;language-Rust\&quot;&gt;/      = Marketing\n/docs  = Documentation\n/blog  = Blog\n/dash  = Dashboard&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;We could take it a step further and focus on more granular sub-path Worker associations, too, such as a dashboard. Within a dashboard, you likely segment out various features or products by adding depth to your URL path (e.g. &lt;code&gt;/dash/product-a&lt;/code&gt;) and navigating between two products could mean two entirely different code bases. &lt;/p&gt;&lt;p&gt;Now with vertical microfrontends, we could also have the following:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Rust\&quot;&gt;&lt;code class=\&quot;language-Rust\&quot;&gt;/dash/product-a  = WorkerA\n/dash/product-b  = WorkerB&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Each of the above paths are their own frontend project with zero shared code between them. The &lt;code&gt;product-a&lt;/code&gt; and &lt;code&gt;product-b&lt;/code&gt; routes map to separately deployed frontend applications that have their own frameworks, libraries, CI/CD pipelines defined and owned by their own teams. FINALLY.&lt;/p&gt;&lt;p&gt;You can now own your own code from end to end. But now we need to find a way to stitch these separate projects together, and even more so, make them feel as if they are a unified experience.&lt;/p&gt;&lt;p&gt;We experience this pain point ourselves here at Cloudflare, as the dashboard has many individual teams owning their own products. Teams must contend with the fact that changes made outside their control impact how users experience their product. &lt;/p&gt;&lt;p&gt;Internally, we are now using a similar strategy for our own dashboard. When users navigate from the core dashboard into our ZeroTrust product, in reality they are two entirely separate projects and the user is simply being routed to that project by its path &lt;code&gt;/:accountId/one&lt;/code&gt;.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;visually-unified-experiences\&quot;&gt;Visually unified experiences&lt;/h2&gt;\n      &lt;a href=\&quot;#visually-unified-experiences\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Stitching these individual projects together to make them feel like a unified experience isn’t as difficult as you might think: It only takes a few lines of CSS magic. What we &lt;i&gt;absolutely do not want&lt;/i&gt; to happen is to leak our implementation details and internal decisions to our users. If we fail to make this user experience feel like one cohesive frontend, then we’ve done a grave injustice to our users. &lt;/p&gt;&lt;p&gt;To accomplish this sleight of hand, let us take a little trip in understanding how view transitions and document preloading come into play.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;view-transitions\&quot;&gt;View transitions&lt;/h3&gt;\n      &lt;a href=\&quot;#view-transitions\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;When we want to seamlessly navigate between two distinct pages while making it feel smooth to the end user, &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API\&quot;&gt;&lt;u&gt;view transitions&lt;/u&gt;&lt;/a&gt; are quite useful. Defining specific &lt;a href=\&quot;https://www.w3schools.com/jsref/dom_obj_all.asp\&quot;&gt;&lt;u&gt;DOM elements&lt;/u&gt;&lt;/a&gt; on our page to stick around until the next page is visible, and defining how any changes are handled, make for quite the powerful quilt-stitching tool for multi-page applications.&lt;/p&gt;&lt;p&gt;There may be, however, instances where making the various vertical microfrontends feel different is more than acceptable. Perhaps our marketing website, documentation, and dashboard are each uniquely defined, for instance. A user would not expect all three of those to feel cohesive as you navigate between the three parts. But… if you decide to introduce vertical slices to an individual experience such as the dashboard (e.g. &lt;code&gt;/dash/product-a&lt;/code&gt; &amp;amp; &lt;code&gt;/dash/product-b&lt;/code&gt;), then users should &lt;b&gt;never&lt;/b&gt; know they are two different repositories/workers/projects underneath.&lt;/p&gt;&lt;p&gt;Okay, enough talk — let’s get to work. I mentioned it was low-effort to make two separate projects feel as if they were one to a user, and if you have yet to hear about &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API\&quot;&gt;&lt;u&gt;CSS View Transitions&lt;/u&gt;&lt;/a&gt; then I’m about to blow your mind.&lt;/p&gt;&lt;p&gt;What if I told you that you could make animated transitions between different views  — single-page app (SPA) or multi-page app (MPA) — feel as if they were one? Before any view transitions are added, if we navigate between pages owned by two different Workers, the interstitial loading state would be the white blank screen in our browser for some few hundred milliseconds until the full next page began rendering. Pages would not feel cohesive, and it certainly would not feel like a single-page application.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4vw1Am7gYUQPtmFFCRcsu1/774b881dff7ce1c26db88f30623dfc13/image3.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;877\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;&lt;sup&gt;Appears as multiple navigation elements between each site.&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;If we want elements to stick around, rather than seeing a white blank page, we can achieve that by defining CSS View Transitions. With the code below, we’re telling our current document page that when a view transition event is about to happen, keep the &lt;code&gt;nav&lt;/code&gt; DOM element on the screen, and if any delta in appearance exists between our existing page and our destination page, then we’ll animate that with an &lt;code&gt;ease-in-out&lt;/code&gt; transition.&lt;/p&gt;&lt;p&gt;All of a sudden, two different Workers feel like one.&lt;/p&gt;\n            &lt;pre class=\&quot;language-CSS\&quot;&gt;&lt;code class=\&quot;language-CSS\&quot;&gt;@supports (view-transition-name: none) {\n  ::view-transition-old(root),\n  ::view-transition-new(root) {\n    animation-duration: 0.3s;\n    animation-timing-function: ease-in-out;\n  }\n  nav { view-transition-name: navigation; }\n}&lt;/pre&gt;&lt;/code&gt;\n            \n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4h6Eh5LSX4552QJDvV1l7o/a5a43ee0e6e011bca58ecc2d74902744/image1.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;877\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;&lt;sup&gt;Appears as a single navigation element between three distinct sites.&lt;/sup&gt;&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;preloading\&quot;&gt;Preloading&lt;/h3&gt;\n      &lt;a href=\&quot;#preloading\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Transitioning between two pages makes it &lt;i&gt;look&lt;/i&gt; seamless — and we also want it to &lt;i&gt;feel&lt;/i&gt; as instant as a client-side SPA. While currently Firefox and Safari do not support &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API\&quot;&gt;&lt;u&gt;Speculation Rules&lt;/u&gt;&lt;/a&gt;, Chrome/Edge/Opera do support the more recent newcomer. The speculation rules API is designed to improve performance for future navigations, particularly for document URLs, making multi-page applications feel more like single-page applications.&lt;/p&gt;&lt;p&gt;Breaking it down into code, what we need to define is a script rule in a specific format that tells the supporting browsers how to prefetch the other vertical slices that are connected to our web application — likely linked through some shared navigation.&lt;/p&gt;\n            &lt;pre class=\&quot;language-JavaScript\&quot;&gt;&lt;code class=\&quot;language-JavaScript\&quot;&gt;&amp;lt;script type=&amp;quot;speculationrules&amp;quot;&amp;gt;\n  {\n    &amp;quot;prefetch&amp;quot;: [\n      {\n        &amp;quot;urls&amp;quot;: [&amp;quot;https://product-a.com&amp;quot;, &amp;quot;https://product-b.com&amp;quot;],\n        &amp;quot;requires&amp;quot;: [&amp;quot;anonymous-client-ip-when-cross-origin&amp;quot;],\n        &amp;quot;referrer_policy&amp;quot;: &amp;quot;no-referrer&amp;quot;\n      }\n    ]\n  }\n&amp;lt;/script&amp;gt;&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;With that, our application prefetches our other microfrontends and holds them in our in-memory cache, so if we were to navigate to those pages it would feel nearly instant.&lt;/p&gt;&lt;p&gt;You likely won’t require this for clearly discernible vertical slices (marketing, docs, dashboard) because users would expect a slight load between them. However, it is highly encouraged to use when vertical slices are defined within a specific visible experience (e.g. within dashboard pages).&lt;/p&gt;&lt;p&gt;Between &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API\&quot;&gt;&lt;u&gt;View Transitions&lt;/u&gt;&lt;/a&gt; and &lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API\&quot;&gt;&lt;u&gt;Speculation Rules&lt;/u&gt;&lt;/a&gt;, we are able to tie together entirely different code repositories to feel as if they were served from a single-page application. Wild if you ask me.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;zero-config-request-routing\&quot;&gt;Zero-config request routing&lt;/h2&gt;\n      &lt;a href=\&quot;#zero-config-request-routing\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Now we need a mechanism to host multiple applications, and a method to stitch them together as requests stream in. Defining a single Cloudflare Worker as the “Router” allows a single logical point (at the edge) to handle network requests and then forward them to whichever vertical microfrontend is responsible for that URL path. Plus it doesn’t hurt that then we can map a single domain to that router Worker and the rest “just works.”&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;service-bindings\&quot;&gt;Service bindings&lt;/h3&gt;\n      &lt;a href=\&quot;#service-bindings\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;If you have yet to explore Cloudflare Worker &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings/\&quot;&gt;&lt;u&gt;service bindings&lt;/u&gt;&lt;/a&gt;, then it is worth taking a moment to do so. &lt;/p&gt;&lt;p&gt;Service bindings allow one Worker to call into another, without going through a publicly-accessible URL. A Service binding allows Worker A to call a method on Worker B, or to forward a request from Worker A to Worker. Breaking it down further, the Router Worker can call into each vertical microfrontend Worker that has been defined (e.g. marketing, docs, dashboard), assuming each of them were Cloudflare Workers.&lt;/p&gt;&lt;p&gt;Why is this important? This is precisely the mechanism that “stitches” these vertical slices together. We’ll dig into how the request routing is handling the traffic split in the next section. But to define each of these microfrontends, we’ll need to update our Router Worker’s wrangler definition, so it knows which frontends it’s allowed to call into.\n&lt;/p&gt;\n            &lt;pre class=\&quot;language-JSON\&quot;&gt;&lt;code class=\&quot;language-JSON\&quot;&gt;{\n  &amp;quot;$schema&amp;quot;: &amp;quot;./node_modules/wrangler/config-schema.json&amp;quot;,\n  &amp;quot;name&amp;quot;: &amp;quot;router&amp;quot;,\n  &amp;quot;main&amp;quot;: &amp;quot;./src/router.js&amp;quot;,\n  &amp;quot;services&amp;quot;: [\n    {\n      &amp;quot;binding&amp;quot;: &amp;quot;HOME&amp;quot;,\n      &amp;quot;service&amp;quot;: &amp;quot;worker_marketing&amp;quot;\n    },\n    {\n      &amp;quot;binding&amp;quot;: &amp;quot;DOCS&amp;quot;,\n      &amp;quot;service&amp;quot;: &amp;quot;worker_docs&amp;quot;\n    },\n    {\n      &amp;quot;binding&amp;quot;: &amp;quot;DASH&amp;quot;,\n      &amp;quot;service&amp;quot;: &amp;quot;worker_dash&amp;quot;\n    },\n  ]\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Our above sample definition is defined in our Router Worker, which then tells us that we are permitted to make requests into three separate additional Workers (marketing, docs, and dash). Granting permissions is as simple as that, but let’s tumble into some of the more complex logic with request routing and HTML rewriting network responses.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;request-routing\&quot;&gt;Request routing&lt;/h3&gt;\n      &lt;a href=\&quot;#request-routing\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;With knowledge of the various other Workers we are able to call into if needed, now we need some logic in place to know where to direct network requests when. Since the Router Worker is assigned to our custom domain, all incoming requests hit it first at the network edge. It then determines which Worker should handle the request and manages the resulting response. &lt;/p&gt;&lt;p&gt;The first step is to map URL paths to associated Workers. When a certain request URL is received, we need to know where it needs to be forwarded. We do this by defining rules. While we support wildcard routes, dynamic paths, and parameter constraints, we are going to stay focused on the basics — literal path prefixes — as it illustrates the point more clearly. &lt;/p&gt;&lt;p&gt; In this example, we have three microfrontends:&lt;/p&gt;\n            &lt;pre class=\&quot;language-Rust\&quot;&gt;&lt;code class=\&quot;language-Rust\&quot;&gt;/      = Marketing\n/docs  = Documentation\n/dash  = Dashboard&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Each of the above paths need to be mapped to an actual Worker (see our wrangler definition for services in the section above). For our Router Worker, we define an additional variable with the following data, so we can know which paths should map to which service bindings. We now know where to route users as requests come in! Define a wrangler variable with the name ROUTES and the following contents:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JSON\&quot;&gt;&lt;code class=\&quot;language-JSON\&quot;&gt;{\n  &amp;quot;routes&amp;quot;:[\n    {&amp;quot;binding&amp;quot;: &amp;quot;HOME&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/&amp;quot;},\n    {&amp;quot;binding&amp;quot;: &amp;quot;DOCS&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/docs&amp;quot;},\n    {&amp;quot;binding&amp;quot;: &amp;quot;DASH&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/dash&amp;quot;}\n  ]\n}&lt;/pre&gt;&lt;/code&gt;\n            &lt;p&gt;Let’s envision a user visiting our website path &lt;code&gt;/docs/installation&lt;/code&gt;. Under the hood, what happens is the request first reaches our Router Worker which is in charge of understanding what URL paths map to which individual Workers. It understands that the &lt;code&gt;/docs&lt;/code&gt; path prefix is mapped to our &lt;code&gt;DOCS&lt;/code&gt; service binding which referencing our wrangler file points us at our &lt;code&gt;worker_docs&lt;/code&gt; project. Our Router Worker, knowing that &lt;code&gt;/docs&lt;/code&gt; is defined as a vertical microfrontend route, removes the &lt;code&gt;/docs&lt;/code&gt; prefix from the path and forwards the request to our &lt;code&gt;worker_docs&lt;/code&gt; Worker to handle the request and then finally returns whatever response we get.&lt;/p&gt;&lt;p&gt;Why does it drop the &lt;code&gt;/docs&lt;/code&gt; path, though? This was an implementation detail choice that was made so that when the Worker is accessed via the Router Worker, it can clean up the URL to handle the request &lt;i&gt;as if &lt;/i&gt;it were called from outside our Router Worker. Like any Cloudflare Worker, our &lt;code&gt;worker_docs&lt;/code&gt; service might have its own individual URL where it can be accessed. We decided we wanted that service URL to continue to work independently. When it’s attached to our new Router Worker, it would automatically handle removing the prefix, so the service could be accessible from its own defined URL or through our Router Worker… either place, doesn’t matter.&lt;/p&gt;\n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h3 id=\&quot;htmlrewriter\&quot;&gt;HTMLRewriter&lt;/h3&gt;\n      &lt;a href=\&quot;#htmlrewriter\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;Splitting our various frontend services with URL paths (e.g. &lt;code&gt;/docs&lt;/code&gt; or &lt;code&gt;/dash&lt;/code&gt;) makes it easy for us to forward a request, but when our response contains HTML that doesn’t know it’s being reverse proxied through a path component… well, that causes problems. &lt;/p&gt;&lt;p&gt;Say our documentation website has an image tag in the response &lt;code&gt;&amp;lt;img src=&amp;quot;./logo.png&amp;quot; /&amp;gt;&lt;/code&gt;. If our user was visiting this page at &lt;code&gt;https://website.com/docs/&lt;/code&gt;, then loading the &lt;code&gt;logo.png&lt;/code&gt; file would likely fail because our &lt;code&gt;/docs&lt;/code&gt; path is somewhat artificially defined only by our Router Worker.&lt;/p&gt;&lt;p&gt;Only when our services are accessed through our Router Worker do we need to do some HTML rewriting of absolute paths so our returned browser response references valid assets. In practice what happens is that when a request passes through our Router Worker, we pass the request to the correct Service Binding, and we receive the response from that. Before we pass that back to the client, we have an opportunity to rewrite the DOM — so where we see absolute paths, we go ahead and prepend that with the proxied path. Where previously our HTML was returning our image tag with &lt;code&gt;&amp;lt;img src=&amp;quot;./logo.png&amp;quot; /&amp;gt;&lt;/code&gt; we now modify it before returning to the client browser to &lt;code&gt;&amp;lt;img src=&amp;quot;./docs/logo.png&amp;quot; /&amp;gt;&lt;/code&gt;.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/10jKx6qt2YcarpDyEsFNYV/3b0f11f56e3c9b2deef59934cf8efa7f/image2.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;1338\&quot; height=\&quot;674\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;Let’s return for a moment to the magic of CSS view transitions and document preloading. We could of course manually place that code into our projects and have it work, but this Router Worker will &lt;i&gt;automatically&lt;/i&gt; handle that logic for us by also using &lt;a href=\&quot;https://developers.cloudflare.com/workers/runtime-apis/html-rewriter/\&quot;&gt;&lt;u&gt;HTMLRewriter&lt;/u&gt;&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;In your Router Worker &lt;code&gt;ROUTES&lt;/code&gt; variable, if you set &lt;code&gt;smoothTransitions&lt;/code&gt; to &lt;code&gt;true&lt;/code&gt; at the root level, then the CSS transition views code will be added automatically. Additionally, if you set the &lt;code&gt;preload&lt;/code&gt; key within a route to &lt;code&gt;true&lt;/code&gt;, then the script code speculation rules for that route will automatically be added as well. &lt;/p&gt;&lt;p&gt;Below is an example of both in action:&lt;/p&gt;\n            &lt;pre class=\&quot;language-JSON\&quot;&gt;&lt;code class=\&quot;language-JSON\&quot;&gt;{\n  &amp;quot;smoothTransitions&amp;quot;:true, \n  &amp;quot;routes&amp;quot;:[\n    {&amp;quot;binding&amp;quot;: &amp;quot;APP1&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/app1&amp;quot;, &amp;quot;preload&amp;quot;: true},\n    {&amp;quot;binding&amp;quot;: &amp;quot;APP2&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/app2&amp;quot;, &amp;quot;preload&amp;quot;: true}\n  ]\n}&lt;/pre&gt;&lt;/code&gt;\n            \n    &lt;div class=\&quot;flex anchor relative\&quot;&gt;\n      &lt;h2 id=\&quot;get-started\&quot;&gt;Get started&lt;/h2&gt;\n      &lt;a href=\&quot;#get-started\&quot; aria-hidden=\&quot;true\&quot; class=\&quot;relative sm:absolute sm:-start-5\&quot;&gt;\n        &lt;svg width=\&quot;16\&quot; height=\&quot;16\&quot; viewBox=\&quot;0 0 24 24\&quot;&gt;&lt;path fill=\&quot;currentcolor\&quot; d=\&quot;m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;p&gt;You can start building with the Vertical Microfrontend template today.&lt;/p&gt;&lt;p&gt;Visit the Cloudflare Dashboard &lt;a href=\&quot;https://dash.cloudflare.com/?to=/:account/workers-and-pages/create?type=vmfe\&quot;&gt;&lt;u&gt;deeplink here&lt;/u&gt;&lt;/a&gt; or go to “Workers &amp;amp; Pages” and click the “Create application” button to get started. From there, click “Select a template” and then “Create microfrontend” and you can begin configuring your setup.&lt;/p&gt;\n          &lt;figure class=\&quot;kg-card kg-image-card\&quot;&gt;\n          &lt;Image src=\&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/1teTcTNHzQH3yCvbTz3xyU/8f9a4b2ef3ec1c6ed13cbdc51d6b13c5/image5.png\&quot; alt=\&quot;\&quot; class=\&quot;kg-image\&quot; width=\&quot;1999\&quot; height=\&quot;1569\&quot; loading=\&quot;lazy\&quot;/&gt;\n          &lt;/figure&gt;&lt;p&gt;\nCheck out the &lt;a href=\&quot;https://developers.cloudflare.com/workers/framework-guides/web-apps/microfrontends\&quot;&gt;&lt;u&gt;documentation&lt;/u&gt;&lt;/a&gt; to see how to map your existing Workers and enable View Transitions. We can&amp;#39;t wait to see what complex, multi-team applications you build on the edge!&lt;/p&gt;&quot;],&quot;published_at&quot;:[0,&quot;2026-01-30T14:00+00:00&quot;],&quot;updated_at&quot;:[0,&quot;2026-02-26T06:23:45.374Z&quot;],&quot;feature_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3LGvFjshhIGn4Qfcfmx2eu/28d86446d5f5b0a2d45fdba8f5d6d991/BLOG-3015_1.png&quot;],&quot;tags&quot;:[1,[[0,{&quot;id&quot;:[0,&quot;6hbkItfupogJP3aRDAq6v8&quot;],&quot;name&quot;:[0,&quot;Cloudflare Workers&quot;],&quot;slug&quot;:[0,&quot;workers&quot;]}],[0,{&quot;id&quot;:[0,&quot;3JAY3z7p7An94s6ScuSQPf&quot;],&quot;name&quot;:[0,&quot;Developer Platform&quot;],&quot;slug&quot;:[0,&quot;developer-platform&quot;]}],[0,{&quot;id&quot;:[0,&quot;4HIPcb68qM0e26fIxyfzwQ&quot;],&quot;name&quot;:[0,&quot;Developers&quot;],&quot;slug&quot;:[0,&quot;developers&quot;]}],[0,{&quot;id&quot;:[0,&quot;uegedi11MDlivX9pYn2ri&quot;],&quot;name&quot;:[0,&quot;Dashboard&quot;],&quot;slug&quot;:[0,&quot;dashboard-tag&quot;]}],[0,{&quot;id&quot;:[0,&quot;7zEmuPybEdq3jhbDEc1fQN&quot;],&quot;name&quot;:[0,&quot;Front End&quot;],&quot;slug&quot;:[0,&quot;front-end&quot;]}],[0,{&quot;id&quot;:[0,&quot;7aCmhopZM6Wjggr7YnTxHZ&quot;],&quot;name&quot;:[0,&quot;Micro-frontends&quot;],&quot;slug&quot;:[0,&quot;micro-frontends&quot;]}]]],&quot;relatedTags&quot;:[0],&quot;authors&quot;:[1,[[0,{&quot;name&quot;:[0,&quot;Brayden Wilmoth&quot;],&quot;slug&quot;:[0,&quot;brayden-wilmoth&quot;],&quot;bio&quot;:[0],&quot;profile_image&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2zY0YXlz7kiE7MbcPoqyy8/bb530238dcbf983352bb7d5943b2a620/eddfc8de-1418-4a5f-979e-1af00843950a_224x224.png&quot;],&quot;location&quot;:[0],&quot;website&quot;:[0],&quot;twitter&quot;:[0],&quot;facebook&quot;:[0],&quot;publiclyIndex&quot;:[0,true]}]]],&quot;meta_description&quot;:[0,&quot;Deploy multiple Workers under a single domain with the ability to make them feel like single-page applications. We take a look at how service bindings enable URL path routing to multiple projects.&quot;],&quot;primary_author&quot;:[0,{}],&quot;localeList&quot;:[0,{&quot;name&quot;:[0,&quot;LOC: Building vertical microfrontends on Cloudflare’s platform&quot;],&quot;enUS&quot;:[0,&quot;English for Locale&quot;],&quot;zhCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhHansCN&quot;:[0,&quot;No Page for Locale&quot;],&quot;zhTW&quot;:[0,&quot;No Page for Locale&quot;],&quot;frFR&quot;:[0,&quot;No Page for Locale&quot;],&quot;deDE&quot;:[0,&quot;No Page for Locale&quot;],&quot;itIT&quot;:[0,&quot;No Page for Locale&quot;],&quot;jaJP&quot;:[0,&quot;Translated for Locale&quot;],&quot;koKR&quot;:[0,&quot;Translated for Locale&quot;],&quot;ptBR&quot;:[0,&quot;No Page for Locale&quot;],&quot;esLA&quot;:[0,&quot;No Page for Locale&quot;],&quot;esES&quot;:[0,&quot;No Page for Locale&quot;],&quot;enAU&quot;:[0,&quot;No Page for Locale&quot;],&quot;enCA&quot;:[0,&quot;No Page for Locale&quot;],&quot;enIN&quot;:[0,&quot;No Page for Locale&quot;],&quot;enGB&quot;:[0,&quot;No Page for Locale&quot;],&quot;idID&quot;:[0,&quot;No Page for Locale&quot;],&quot;ruRU&quot;:[0,&quot;No Page for Locale&quot;],&quot;svSE&quot;:[0,&quot;No Page for Locale&quot;],&quot;viVN&quot;:[0,&quot;No Page for Locale&quot;],&quot;plPL&quot;:[0,&quot;No Page for Locale&quot;],&quot;arAR&quot;:[0,&quot;No Page for Locale&quot;],&quot;nlNL&quot;:[0,&quot;No Page for Locale&quot;],&quot;thTH&quot;:[0,&quot;No Page for Locale&quot;],&quot;trTR&quot;:[0,&quot;No Page for Locale&quot;],&quot;heIL&quot;:[0,&quot;No Page for Locale&quot;],&quot;lvLV&quot;:[0,&quot;No Page for Locale&quot;],&quot;etEE&quot;:[0,&quot;No Page for Locale&quot;],&quot;ltLT&quot;:[0,&quot;No Page for Locale&quot;]}],&quot;url&quot;:[0,&quot;https://blog.cloudflare.com/vertical-microfrontends&quot;],&quot;metadata&quot;:[0,{&quot;title&quot;:[0,&quot;Building vertical microfrontends on Cloudflare’s platform&quot;],&quot;description&quot;:[0,&quot;Deploy multiple Workers under a single domain with the ability to make them feel like single-page applications. We take a look at how service bindings enable URL path routing to multiple projects.&quot;],&quot;imgPreview&quot;:[0,&quot;https://cf-assets.www.cloudflare.com/zkvhlag99gkb/7mHabLtgvBHUu0U5r7Zn9U/f10ec30a75c6ea4d73ffa9f6840c010b/BLOG-3015_OG.png&quot;]}],&quot;publicly_index&quot;:[0,true]}]]],&quot;locale&quot;:[0,&quot;en-us&quot;],&quot;translations&quot;:[0,{&quot;posts.by&quot;:[0,&quot;By&quot;],&quot;footer.gdpr&quot;:[0,&quot;GDPR&quot;],&quot;lang_blurb1&quot;:[0,&quot;This post is also available in {lang1}.&quot;],&quot;lang_blurb2&quot;:[0,&quot;This post is also available in {lang1} and {lang2}.&quot;],&quot;lang_blurb3&quot;:[0,&quot;This post is also available in {lang1}, {lang2} and {lang3}.&quot;],&quot;footer.press&quot;:[0,&quot;Press&quot;],&quot;header.title&quot;:[0,&quot;The Cloudflare Blog&quot;],&quot;search.clear&quot;:[0,&quot;Clear&quot;],&quot;search.filter&quot;:[0,&quot;Filter&quot;],&quot;search.source&quot;:[0,&quot;Source&quot;],&quot;footer.careers&quot;:[0,&quot;Careers&quot;],&quot;footer.company&quot;:[0,&quot;Company&quot;],&quot;footer.support&quot;:[0,&quot;Support&quot;],&quot;footer.the_net&quot;:[0,&quot;theNet&quot;],&quot;search.filters&quot;:[0,&quot;Filters&quot;],&quot;footer.our_team&quot;:[0,&quot;Our team&quot;],&quot;footer.webinars&quot;:[0,&quot;Webinars&quot;],&quot;page.more_posts&quot;:[0,&quot;More posts&quot;],&quot;posts.time_read&quot;:[0,&quot;{time} min read&quot;],&quot;search.language&quot;:[0,&quot;Language&quot;],&quot;footer.community&quot;:[0,&quot;Community&quot;],&quot;footer.resources&quot;:[0,&quot;Resources&quot;],&quot;footer.solutions&quot;:[0,&quot;Solutions&quot;],&quot;footer.trademark&quot;:[0,&quot;Trademark&quot;],&quot;header.subscribe&quot;:[0,&quot;Subscribe&quot;],&quot;footer.compliance&quot;:[0,&quot;Compliance&quot;],&quot;footer.free_plans&quot;:[0,&quot;Free plans&quot;],&quot;footer.impact_ESG&quot;:[0,&quot;Impact/ESG&quot;],&quot;posts.follow_on_X&quot;:[0,&quot;Follow on X&quot;],&quot;footer.help_center&quot;:[0,&quot;Help center&quot;],&quot;footer.network_map&quot;:[0,&quot;Network Map&quot;],&quot;header.please_wait&quot;:[0,&quot;Please Wait&quot;],&quot;page.related_posts&quot;:[0,&quot;Related posts&quot;],&quot;search.result_stat&quot;:[0,&quot;Results &lt;strong&gt;{search_range}&lt;/strong&gt; of &lt;strong&gt;{search_total}&lt;/strong&gt; for &lt;strong&gt;{search_keyword}&lt;/strong&gt;&quot;],&quot;footer.case_studies&quot;:[0,&quot;Case Studies&quot;],&quot;footer.connect_2024&quot;:[0,&quot;Connect 2024&quot;],&quot;footer.terms_of_use&quot;:[0,&quot;Terms of Use&quot;],&quot;footer.white_papers&quot;:[0,&quot;White Papers&quot;],&quot;footer.cloudflare_tv&quot;:[0,&quot;Cloudflare TV&quot;],&quot;footer.community_hub&quot;:[0,&quot;Community Hub&quot;],&quot;footer.compare_plans&quot;:[0,&quot;Compare plans&quot;],&quot;footer.contact_sales&quot;:[0,&quot;Contact Sales&quot;],&quot;header.contact_sales&quot;:[0,&quot;Contact Sales&quot;],&quot;header.email_address&quot;:[0,&quot;Email Address&quot;],&quot;page.error.not_found&quot;:[0,&quot;Page not found&quot;],&quot;footer.developer_docs&quot;:[0,&quot;Developer docs&quot;],&quot;footer.privacy_policy&quot;:[0,&quot;Privacy Policy&quot;],&quot;footer.request_a_demo&quot;:[0,&quot;Request a demo&quot;],&quot;page.continue_reading&quot;:[0,&quot;Continue reading&quot;],&quot;footer.analysts_report&quot;:[0,&quot;Analyst reports&quot;],&quot;footer.for_enterprises&quot;:[0,&quot;For enterprises&quot;],&quot;footer.getting_started&quot;:[0,&quot;Getting Started&quot;],&quot;footer.learning_center&quot;:[0,&quot;Learning Center&quot;],&quot;footer.project_galileo&quot;:[0,&quot;Project Galileo&quot;],&quot;pagination.newer_posts&quot;:[0,&quot;Newer Posts&quot;],&quot;pagination.older_posts&quot;:[0,&quot;Older Posts&quot;],&quot;posts.social_buttons.x&quot;:[0,&quot;Discuss on X&quot;],&quot;search.icon_aria_label&quot;:[0,&quot;Search&quot;],&quot;search.source_location&quot;:[0,&quot;Source/Location&quot;],&quot;footer.about_cloudflare&quot;:[0,&quot;About Cloudflare&quot;],&quot;footer.athenian_project&quot;:[0,&quot;Athenian Project&quot;],&quot;footer.become_a_partner&quot;:[0,&quot;Become a partner&quot;],&quot;footer.cloudflare_radar&quot;:[0,&quot;Cloudflare Radar&quot;],&quot;footer.network_services&quot;:[0,&quot;Network services&quot;],&quot;footer.trust_and_safety&quot;:[0,&quot;Trust &amp; Safety&quot;],&quot;header.get_started_free&quot;:[0,&quot;Get Started Free&quot;],&quot;page.search.placeholder&quot;:[0,&quot;Search Cloudflare&quot;],&quot;footer.cloudflare_status&quot;:[0,&quot;Cloudflare Status&quot;],&quot;footer.cookie_preference&quot;:[0,&quot;Cookie Preferences&quot;],&quot;header.valid_email_error&quot;:[0,&quot;Must be valid email.&quot;],&quot;search.result_stat_empty&quot;:[0,&quot;Results &lt;strong&gt;{search_range}&lt;/strong&gt; of &lt;strong&gt;{search_total}&lt;/strong&gt;&quot;],&quot;footer.connectivity_cloud&quot;:[0,&quot;Connectivity cloud&quot;],&quot;footer.developer_services&quot;:[0,&quot;Developer services&quot;],&quot;footer.investor_relations&quot;:[0,&quot;Investor relations&quot;],&quot;page.not_found.error_code&quot;:[0,&quot;Error Code: 404&quot;],&quot;search.autocomplete_title&quot;:[0,&quot;Insert a query. Press enter to send&quot;],&quot;footer.logos_and_press_kit&quot;:[0,&quot;Logos &amp; press kit&quot;],&quot;footer.application_services&quot;:[0,&quot;Application services&quot;],&quot;footer.get_a_recommendation&quot;:[0,&quot;Get a recommendation&quot;],&quot;posts.social_buttons.reddit&quot;:[0,&quot;Discuss on Reddit&quot;],&quot;footer.sse_and_sase_services&quot;:[0,&quot;SSE and SASE services&quot;],&quot;page.not_found.outdated_link&quot;:[0,&quot;You may have used an outdated link, or you may have typed the address incorrectly.&quot;],&quot;footer.report_security_issues&quot;:[0,&quot;Report Security Issues&quot;],&quot;page.error.error_message_page&quot;:[0,&quot;Sorry, we can&#39;t find the page you are looking for.&quot;],&quot;header.subscribe_notifications&quot;:[0,&quot;Subscribe to receive notifications of new posts:&quot;],&quot;footer.cloudflare_for_campaigns&quot;:[0,&quot;Cloudflare for Campaigns&quot;],&quot;header.subscription_confimation&quot;:[0,&quot;Subscription confirmed. Thank you for subscribing!&quot;],&quot;posts.social_buttons.hackernews&quot;:[0,&quot;Discuss on Hacker News&quot;],&quot;footer.diversity_equity_inclusion&quot;:[0,&quot;Diversity, equity &amp; inclusion&quot;],&quot;footer.critical_infrastructure_defense_project&quot;:[0,&quot;Critical Infrastructure Defense Project&quot;]}],&quot;localesAvailable&quot;:[1,[[0,&quot;zh-cn&quot;],[0,&quot;zh-tw&quot;],[0,&quot;ja-jp&quot;],[0,&quot;ko-kr&quot;]]],&quot;footerBlurb&quot;:[0,&quot;Cloudflare&#39;s connectivity cloud protects &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/network-services/&#39; rel=&#39;noreferrer&#39;&gt;entire corporate networks&lt;/a&gt;, helps customers build &lt;a target=&#39;_blank&#39; href=&#39;https://workers.cloudflare.com/&#39; rel=&#39;noreferrer&#39;&gt;Internet-scale applications efficiently&lt;/a&gt;, accelerates any &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/performance/accelerate-internet-applications/&#39; rel=&#39;noreferrer&#39;&gt;website or Internet application&lt;/a&gt;, &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/ddos/&#39; rel=&#39;noreferrer&#39;&gt;wards off DDoS attacks&lt;/a&gt;, keeps &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/application-security/&#39; rel=&#39;noreferrer&#39;&gt;hackers at bay&lt;/a&gt;, and can help you on &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/products/zero-trust/&#39; rel=&#39;noreferrer&#39;&gt;your journey to Zero Trust&lt;/a&gt;.&lt;br/&gt;&lt;br/&gt;Visit &lt;a target=&#39;_blank&#39; href=&#39;https://one.one.one.one/&#39; rel=&#39;noreferrer&#39;&gt;1.1.1.1&lt;/a&gt; from any device to get started with our free app that makes your Internet faster and safer.&lt;br/&gt;&lt;br/&gt;To learn more about our mission to help build a better Internet, &lt;a target=&#39;_blank&#39; href=&#39;https://www.cloudflare.com/learning/what-is-cloudflare/&#39; rel=&#39;noreferrer&#39;&gt;start here&lt;/a&gt;. If you&amp;apos;re looking for a new career direction, check out &lt;a target=&#39;_blank&#39; href=&#39;http://www.cloudflare.com/careers&#39; rel=&#39;noreferrer&#39;&gt;our open positions&lt;/a&gt;.&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;Post&quot;,&quot;value&quot;:true}" await-children><main id="post" class="flex flex-row flex-wrap items-center justify-center pt2 pt4-l"><article class="post-full mw-100 ph3 ph0-l fs-20px"><h1 class="f6 f7-l fw4 gray1 pt1 pt3-l mb1">Python Workers redux: fast cold starts, packages, and a uv-first workflow</h1><p class="f3 fw5 gray5 db di-l mt2">2025-12-08</p><ul class="author-lists flex pl0 mt4"><li class="list flex items-center pr2 mb1-ns"><a href="/author/dominik/" class="static-avatar pr1"><img class="author-profile-image br-100 mr2" src="https://blog.cloudflare.com/cdn-cgi/image/format=auto,dpr=3,width=64,height=64,gravity=face,fit=crop,zoom=0.5/https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4NQ8NXOh8kIeqTdhVt29Y0/f10eccb58f426dd53a2623dd2d290bff/dominik.jpg" alt="Dominik Picheta" width="62" height="62"/></a><div class="author-name-tooltip"><a href="/author/dominik/" class="fw4 f3 no-underline black mr3">Dominik Picheta</a></div></li><li class="list flex items-center pr2 mb1-ns"><a href="/author/hood/" class="static-avatar pr1"><img class="author-profile-image br-100 mr2" src="https://blog.cloudflare.com/cdn-cgi/image/format=auto,dpr=3,width=64,height=64,gravity=face,fit=crop,zoom=0.5/https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5NdWrndYBFiQedDDrsFkey/1d7b25517af6f36b842ee4a94a2d4d84/hood.png" alt="Hood Chatham" width="62" height="62"/></a><div class="author-name-tooltip"><a href="/author/hood/" class="fw4 f3 no-underline black mr3">Hood Chatham</a></div></li><li class="list flex items-center pr2 mb1-ns"><a href="/author/mike-nomitch/" class="static-avatar pr1"><img class="author-profile-image br-100 mr2" src="https://blog.cloudflare.com/cdn-cgi/image/format=auto,dpr=3,width=64,height=64,gravity=face,fit=crop,zoom=0.5/https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3Ub221L51x1p3FZJbnblyn/23b50473b99404db0baf42921edd269c/_tmp_mini_magick20240415-2-6izqhi.jpg" alt="Mike Nomitch" width="62" height="62"/></a><div class="author-name-tooltip"><a href="/author/mike-nomitch/" class="fw4 f3 no-underline black mr3">Mike Nomitch</a></div></li></ul><section class="post-full-content"><div class="mb2 gray5">9 min read</div><div class="mt4">This post is also available in <a href="/zh-cn/python-workers-advancements">简体中文</a>, <a href="/ja-jp/python-workers-advancements">日本語</a>, <a href="/ko-kr/python-workers-advancements">한국어</a> and <a href="/zh-tw/python-workers-advancements">繁體中文</a>.</div><img class="mr2" src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4Wu87IZkO6g7IBGyjMqYcQ/4658c65f65a28d9636ee0f2bdd3a433c/image3.png" alt=""/><div class="post-content lh-copy gray1"><p><sup><i>Note: This post was updated with additional details regarding AWS Lambda.</i></sup></p><p>Last year we announced <a href="https://blog.cloudflare.com/python-workers/"><u>basic support for Python Workers</u></a>, allowing Python developers to ship Python to region: Earth in a single command and take advantage of the <a href="https://workers.cloudflare.com/"><u>Workers platform</u></a>.</p><p>Since then, we’ve been hard at work making the <a href="https://developers.cloudflare.com/workers/languages/python/"><u>Python experience on Workers</u></a> feel great. We’ve focused on bringing package support to the platform, a reality that’s now here — with exceptionally fast cold starts and a Python-native developer experience.</p><p>This means a change in how packages are incorporated into a Python Worker. Instead of offering a limited set of built-in packages, we now support any <a href="https://pyodide.org/en/stable/usage/packages-in-pyodide.html"><u>package supported by Pyodide</u></a>, the WebAssembly runtime powering Python Workers. This includes all pure Python packages, as well as many packages that rely on dynamic libraries. We also built tooling around <a href="https://docs.astral.sh/uv/"><u>uv</u></a> to make package installation easy.</p><p>We’ve also implemented dedicated memory snapshots to reduce cold start times. These snapshots result in serious speed improvements over other serverless Python vendors. In cold start tests using common packages, Cloudflare Workers start over <b>2.4x faster than AWS Lambda</b> <b>without SnapStart </b>and <b>3x faster than Google Cloud Run</b>.</p><p>In this blog post, we’ll explain what makes Python Workers unique and share some of the technical details of how we’ve achieved the wins described above. But first, for those who may not be familiar with Workers or serverless platforms – and especially those coming from a Python background — let us share why you might want to use Workers at all.</p>
    <div class="flex anchor relative">
      <h3 id="deploying-python-globally-in-2-minutes">Deploying Python globally in 2 minutes</h3>
      <a href="#deploying-python-globally-in-2-minutes" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>Part of the magic of Workers is simple code and easy global deployments. Let&#39;s start by showing how you can deploy a FastAPI app across the world with fast cold starts in less than two minutes.</p><p>A simple Worker using FastAPI can be implemented in a handful of lines:</p>
            <pre class="language-Rust"><code class="language-Rust">from fastapi import FastAPI
from workers import WorkerEntrypoint
import asgi

app = FastAPI()

@app.get(&quot;/&quot;)
async def root():
   return {&quot;message&quot;: &quot;This is FastAPI on Workers&quot;}

class Default(WorkerEntrypoint):
   async def fetch(self, request):
       return await asgi.fetch(app, request.js_object, self.env)</pre></code>
            <p>To deploy something similar, just make sure you have <code>uv</code> and <code>npm</code> installed, then run the following:</p>
            <pre class="language-Shell"><code class="language-Shell">$ uv tool install workers-py
$ pywrangler init --template \
    https://github.com/cloudflare/python-workers-examples/03-fastapi
$ pywrangler deploy</pre></code>
            <p>With just a little code and a <code>pywrangler deploy</code>, you’ve now deployed your application across Cloudflare’s edge network that extends to <a href="https://www.cloudflare.com/network/"><u>330 locations across 125 countries</u></a>. No worrying about infrastructure or scaling.</p><p>And for many use cases, Python Workers are completely free. Our free tier offers 100,000 requests per day and 10ms CPU time per invocation. For more information, check out the <a href="https://developers.cloudflare.com/workers/platform/pricing/"><u>pricing page in our documentation</u></a>.</p><p>For more examples, <a href="https://github.com/cloudflare/python-workers-examples"><u>check out the repo in GitHub</u></a>. And read on to find out more about Python Workers.</p>
    <div class="flex anchor relative">
      <h3 id="so-what-can-you-do-with-python-workers">So what can you do with Python Workers?</h3>
      <a href="#so-what-can-you-do-with-python-workers" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>Now that you’ve got a Worker, just about anything is possible. You write the code, so you get to decide. Your Python Worker receives HTTP requests and can make requests to any server on the public Internet.</p><p>You can set up cron triggers, so your Worker runs on a regular schedule. Plus, if you have more complex requirements, you can make use of <a href="https://blog.cloudflare.com/python-workflows/"><u>Workflows for Python Workers</u></a>, or even long-running WebSocket servers and clients <a href="https://developers.cloudflare.com/durable-objects/get-started/"><u>using Durable Objects</u></a>.</p><p>Here are more examples of the sorts of things you can do using Python Workers:</p><ul><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/03-fastapi"><u>Render HTML templates on the edge, with a library like Jinja, while fetching dynamic content directly from your server</u></a></p></li><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/11-opengraph"><u>Modify the response from your server — for example, you can inject opengraph tags into your HTML dynamically, based on the content requested</u></a></p></li><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/15-chatroom"><u>Build a chat room using Durable Objects and WebSockets</u></a></p></li><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/14-websocket-stream-consumer"><u>Consume data from WebSocket connections, like the Bluesky firehose</u></a></p></li><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/12-image-gen"><u>Generate images using the Pillow Python package</u></a></p></li><li><p><a href="https://github.com/cloudflare/python-workers-examples/tree/main/13-js-api-pygments"><u>Write a small Python Worker that exposes the API of a Python package, and then access it from your JavaScript Worker using RPC</u></a></p></li></ul>
    <div class="flex anchor relative">
      <h3 id="faster-package-cold-starts">Faster package cold starts</h3>
      <a href="#faster-package-cold-starts" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>Serverless platforms like Workers save you money by only running your code when it’s necessary to do so. This means that if your Worker isn’t receiving requests, it may be shut down and will need to be restarted once a new request comes in. This typically incurs a resource overhead we refer to as the “cold start.” It’s important to keep these as short as possible to minimize latency for end users.</p><p>In standard Python, booting the runtime is expensive, and our initial implementation of Python Workers focused on making the <i>runtime</i> boot fast. However, we quickly realized that this wasn’t enough. Even if the Python runtime boots quickly, in real-world scenarios the initial startup usually includes loading modules from packages, and unfortunately, in Python many popular packages can take several seconds to load.</p><p>We set out to make cold starts fast, regardless of whether packages were loaded.</p><p>To measure realistic cold start performance, we set up a benchmark that imports common packages, as well as a benchmark running a “hello world” using a bare Python runtime. Standard Lambda is able to <a href="https://cold.picheta.me/#bare"><u>start just the runtime</u></a> quickly, but once you need to import packages, the cold start times shoot up. In order to optimize for faster cold starts with packages, you can use SnapStart on Lambda (which we will be adding to the linked benchmarks shortly). This incurs a cost to store the snapshot and an additional cost on every restore. Python Workers will automatically apply memory snapshots for free for every Python Worker.</p><p>Here are the average cold start times when loading three common packages (<a href="https://www.python-httpx.org/"><u>httpx</u></a>, <a href="https://fastapi.tiangolo.com/"><u>fastapi</u></a> and <a href="https://docs.pydantic.dev/latest/"><u>pydantic</u></a>):</p><table><tr><td><p><b>Platform</b></p></td><td><p><b>Mean Cold Start (secs)</b></p></td></tr><tr><td><p>Cloudflare Python Workers</p></td><td><p>1.027</p></td></tr><tr><td><p>AWS Lambda (without SnapStart)</p></td><td><p>2.502</p></td></tr><tr><td><p>Google Cloud Run</p></td><td><p>3.069</p></td></tr></table><p>In this case, <b>Cloudflare Python Workers have 2.4x faster cold starts than AWS Lambda without SnapStart and 3x faster cold starts than Google Cloud Run</b>. We achieved these low cold start numbers by using memory snapshots, and in a later section we explain how we did so.</p><p>We are regularly running these benchmarks. Go <a href="https://cold.picheta.me/#bare"><u>here</u></a> for up-to-date data and more info on our testing methodology.</p><p>We’re architecturally different from these other platforms — namely, <a href="https://developers.cloudflare.com/workers/reference/how-workers-works/"><u>Workers is isolate-based</u></a>. Because of that, our aims are high, and we are planning for a zero cold start future.</p>
    <div class="flex anchor relative">
      <h3 id="package-tooling-integrated-with-uv">Package tooling integrated with uv</h3>
      <a href="#package-tooling-integrated-with-uv" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>The diverse package ecosystem is a large part of what makes Python so amazing. That’s why we’ve been hard at work ensuring that using packages in Workers is as easy as possible.</p><p>We realised that working with the existing Python tooling is the best path towards a great development experience. So we picked the <code>uv</code> package and project manager, as it’s fast, mature, and gaining momentum in the Python ecosystem.</p><p>We built our own tooling around <code>uv</code> called <a href="https://github.com/cloudflare/workers-py#pywrangler"><u>pywrangler</u></a>. This tool essentially performs the following actions:</p><ul><li><p>Reads your Worker’s pyproject.toml file to determine the dependencies specified in it</p></li><li><p>Includes your dependencies in a <code>python_modules</code> folder that lives in your Worker</p></li></ul><p>Pywrangler calls out to <code>uv</code> to install the dependencies in a way that is compatible with Python Workers, and calls out to <code>wrangler</code> when developing locally or deploying Workers. </p><p>Effectively this means that you just need to run <code>pywrangler dev</code> and <code>pywrangler</code> <code>deploy</code> to test your Worker locally and deploy it. </p>
    <div class="flex anchor relative">
      <h3 id="type-hints">Type hints</h3>
      <a href="#type-hints" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>You can generate type hints for all of the <a href="https://developers.cloudflare.com/workers/runtime-apis/bindings/"><u>bindings</u></a> defined in your wrangler config using <code>pywrangler types</code>. These type hints will work with <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance"><u>Pylance</u></a> or with recent versions of <a href="https://mypy-lang.org/"><u>mypy</u></a>.</p><p>To generate the types, we use <a href="https://developers.cloudflare.com/workers/wrangler/commands/#types"><u>wrangler types</u></a> to create typescript type hints, then we use the typescript compiler to generate an abstract syntax tree for the types. Finally, we use the TypeScript hints — such as whether a JS object has an iterator field — to generate <code>mypy</code> type hints that work with the Pyodide foreign function interface.</p>
    <div class="flex anchor relative">
      <h3 id="decreasing-cold-start-duration-using-snapshots">Decreasing cold start duration using snapshots</h3>
      <a href="#decreasing-cold-start-duration-using-snapshots" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>Python startup is generally quite slow and importing a Python module can trigger a large amount of work. We avoid running Python startup during a cold start using memory snapshots.</p><p>When a Worker is deployed, we execute the Worker’s top-level scope and then take a memory snapshot and store it alongside your Worker. Whenever we are starting a new isolate for the Worker, we restore the memory snapshot and the Worker is ready to handle requests, with no need to execute any Python code in preparation. This improves cold start times considerably. For instance, starting a Worker that imports <code>fastapi</code>, <code>httpx</code> and <code>pydantic</code> without snapshots takes around 10 seconds. With snapshots, it takes 1 second.</p><p>The fact that Pyodide is built on WebAssembly enables this. We can easily capture the full linear memory of the runtime and restore it. </p>
    <div class="flex anchor relative">
      <h4 id="memory-snapshots-and-entropy">Memory snapshots and Entropy</h4>
      <a href="#memory-snapshots-and-entropy" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>WebAssembly runtimes do not require features like address space layout randomization for security, so most of the difficulties with memory snapshots on a modern operating system do not arise. Just like with native memory snapshots, we still have to carefully handle entropy at startup to avoid using the <a href="https://xkcd.com/221/"><u>XKCD random number generator</u></a> (we’re <a href="https://www.cloudflare.com/learning/ssl/lava-lamp-encryption/"><u>very into actual randomness</u></a>).</p>
          <figure class="kg-card kg-image-card">
          <Image src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2Q2LYb3LZhfC2q3vQCFr1R/ff8f229715a0d37484585664c61908dc/image1.png" alt="" class="kg-image" width="400" height="144" loading="lazy"/>
          </figure><p>By snapshotting memory, we might inadvertently lock in a seed value for randomness. In this case, future calls for “random” numbers would consistently return the same sequence of values across many requests.</p><p>Avoiding this is particularly challenging because Python uses a lot of entropy at startup. These include the libc functions <code>getentropy()</code> and <code>getrandom()</code> and also reading from <code>/dev/random</code> and <code>/dev/urandom</code>. All of these functions share the same implementation in terms of the JavaScript <code>crypto.getRandomValues()</code> function.</p><p>In Cloudflare Workers, <code>crypto.getRandomValues()</code> has always been disabled at startup in order to allow us to switch to using memory snapshots in the future. Unfortunately, the Python interpreter cannot bootstrap without calling this function. And many packages also require entropy at startup time. There are essentially two purposes for this entropy:</p><ul><li><p>Hash seeds for hash randomization</p></li><li><p>Seeds for pseudorandom number generators</p></li></ul><p>Hash randomization we do at startup time and accept the cost that each specific Worker has a fixed hash seed. Python has no mechanism to allow replacing the hash seed after startup.</p><p>For pseudorandom number generators (PRNG), we take the following approach:</p><p>At deploy time:</p><ol><li><p>Seed the PRNG with a fixed “poison seed”, then record the PRNG state.</p></li><li><p>Replace all APIs that call into the PRNG with an overlay that fails the deployment with a user error.</p></li><li><p>Execute the top level scope of user code.</p></li><li><p>Capture the snapshot.</p></li></ol><p>At run time:</p><ol><li><p>Assert that the PRNG state is unchanged. If it changed, we forgot the overlay for some method. Fail the deployment with an internal error.</p></li><li><p>After restoring the snapshot, reseed the random number generator before executing any handlers.</p></li></ol><p>With this, we can ensure that PRNGs can be used while the Worker is running, but stop Workers from using them during initialization and pre-snapshot.</p>
    <div class="flex anchor relative">
      <h4 id="memory-snapshots-and-webassembly-state">Memory snapshots and WebAssembly state</h4>
      <a href="#memory-snapshots-and-webassembly-state" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>An additional difficulty arises when creating memory snapshots on WebAssembly: The memory snapshot we are saving consists only of the WebAssembly linear memory, but the full state of the Pyodide WebAssembly instance is not contained in the linear memory. </p><p>There are two tables outside of this memory.</p><p>One table holds the values of function pointers. Traditional computers use a “Von Neumann” architecture, which means that code exists in the same memory space as data, so that calling a function pointer is a jump to some memory address. WebAssembly has a “Harvard architecture” where code lives in a separate address space. This is key to most of the security guarantees of WebAssembly and in particular why WebAssembly does not need address space layout randomization. A function pointer in WebAssembly is an index into the function pointer table.</p><p>A second table holds all JavaScript objects referenced from Python. JavaScript objects cannot be directly stored into memory because the JavaScript virtual machine forbids directly obtaining a pointer to a JavaScript object. Instead, they are stored into a table and represented in WebAssembly as an index into the table.</p><p>We need to ensure that both of these tables are in exactly the same state after we restore a snapshot as they were when we captured the snapshot.</p><p>The function pointer table is always in the same state when the WebAssembly instance is initialized and is updated by the dynamic loader when we load dynamic libraries — native Python packages like numpy. </p><p>To handle dynamic loading:</p><ol><li><p>When taking the snapshot, we patch the loader to record the load order of dynamic libraries, the address in memory where the metadata for each library is allocated, and the function pointer table base address for relocations. </p></li><li><p>When restoring the snapshot, we reload the dynamic libraries in the same order, and we use a patched memory allocator to place the metadata in the same locations. We assert that the current size of the function pointer table matches the function pointer table base we recorded for the dynamic library.</p></li></ol><p>All of this ensures that each function pointer has the same meaning after we’ve restored the snapshot as it had when we took the snapshot.</p><p>To handle the JavaScript references, we implemented a fairly limited system. If a JavaScript object is accessible from globalThis by a series of property accesses, we record those property accesses and replay them when restoring the snapshot. If any reference exists to a JavaScript object that is not accessible in this way, we fail deployment of the Worker. This is good enough to deal with all the existing Python packages with Pyodide support, which do top level imports like:</p>
            <pre class="language-Python"><code class="language-Python">from js import fetch</pre></code>
            
    <div class="flex anchor relative">
      <h3 id="reducing-cold-start-frequency-using-sharding">Reducing cold start frequency using sharding</h3>
      <a href="#reducing-cold-start-frequency-using-sharding" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>Another important characteristic of our performance strategy for Python Workers is sharding. There is a very detailed description of what went into its implementation <a href="https://blog.cloudflare.com/eliminating-cold-starts-2-shard-and-conquer/"><u>here</u></a>. In short, we now route requests to existing Worker instances, whereas before we might have chosen to start a new instance.</p><p>Sharding was actually enabled for Python Workers first and proved to be a great test bed for it. A cold start is far more expensive in Python than in JavaScript, so ensuring requests are routed to an already-running isolate is especially important.</p>
    <div class="flex anchor relative">
      <h3 id="where-do-we-go-from-here">Where do we go from here?</h3>
      <a href="#where-do-we-go-from-here" aria-hidden="true" class="relative sm:absolute sm:-start-5">
        <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg>
      </a>
    </div>
    <p>This is just the start. We have many plans to make Python Workers better:</p><ul><li><p>More developer-friendly tooling</p></li><li><p>Even faster cold starts by utilising our isolate architecture</p></li><li><p>Support for more packages</p></li><li><p>Support for native TCP sockets, native WebSockets, and more bindings</p></li></ul><p>To learn more about Python Workers, check out the documentation available <a href="https://developers.cloudflare.com/workers/languages/python/"><u>here</u></a>. To get help, be sure to join our <a href="https://discord.cloudflare.com/"><u>Discord</u></a>.</p></div></section><section class="post-full-content flex flex-row flex-wrap mw7 center mb4"><div class="post-content lh-copy w-100 gray1 bt b--gray8 pt4">Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href="https://www.cloudflare.com/careers" rel='noreferrer'>our open positions</a>.</div></section><astro-slot> <!--[if astro]>server-island-start<![endif]--><script type="module" data-astro-rerun data-island-id="46fb1f58-ca7e-49b0-87e3-cabf6067efd2">const headers = new Headers({});
let response = await fetch('/_server-islands/SocialLinks?e=default&p=&s=FD7B2908949DA0A4ED722CF8E43h91RtSw%2FCzrHdIUlQvjzChxTiUjt5Gc7BbXPyVZEThNF9slq3V9Jvrq8z4g%2FHMRNI1VlhYAEeA%2FoLauXCAeMEiXm6dpvajjTV7%2FvrzvrMTYn5yLyyJj3NC4kOYgPZUeLOcm1ZvWQKeBbwwGOrlxyNMfaInIeba5PQi97wLMK%2BU9gCh19%2FDZ34RKnYDYkdz0KttbI85SJnxoCNW0SrtgQ0s8WzliUXokT5AnK2Lnhww091ftgKXZEy%2Fu5b47sYL6M1JX2xWX9BOLqlVkJpLysuhcUxN1EF6blMwaarzp6mONEihVnprCvzePNmLa03w%2F3qFsV17kGwj00KIgD5sFrhh5FGeeDtrYcXMnMhHW7q0rHLHGKn7Y%2BV8AWg%2Fwa%2BCWmttuzp0CYa66I3HqkfhZ9exNZ20ZIYwyqG2yOag3I3uWYJQ%2FMXBKAEAspCL8ooKTivTc%2BAmt4gtCYYxwOICc9FoGNTbHpkpuKFZ7AaKbhmDzcTrY%2BSsZenWjrcW4e4JNYSMcz038HbUF9t4NwSdWO0jCKa8DbqfNwN7PPhEzIc0Tszyd42p7tHkmYvKf7YCOqmTWQYMGsM0t0A9aG3AomNJX3LPK2rqkSIM0KZh00HFrGslHFwka6qf48xkPYqKoNKA5XZya7P9oTsWzFKLiMxGLGsB4vP0SHJ1iPNDG6hhoT%2BP%2FBGcDf1qF4VBi4wKWVRYhy4O90GIp4daTIELgqR0gnaUbo0mqlSBre7u9b6jN%2BASkAtHLO1eW1sgoy6%2FDKSXjjP39kbli5dnrTDpQeJVmJElQ5l8w2KXWtELhLbdHn1pMCSF4WZBb%2FYGYahZXQ1%2Bl0mUr68zR5p2yYWn%2FML8%2F6gtp6xMxP72Rjzhn8RzFYP00FwYSB7XS5Lw4Q%2F8LWY2CRx4utQZ9oidhNjEASTKKe%2FBarxiUA7WXsjnKQhpSLKKOA4M5llq7UNQ45bXL3SOpnLzjot%2FVY2Igm2uAIU%2FJ0a4IGfYw%2Bv8gY%2BQ5KGzugrNrqrZWjQvpIlZnFQPPsmwxVVCK8OKLQQplsW7ED29DXmdpRgqqqZs%2FwidcT89G7NBG1AcRvfANlKSOOL7Ac9JIn34FDtRwLPhZbDfkL1DF20Ljh%2BWW3SHywxLu%2FUJXGqU8fqgzzfvvDzeXVj1TbOzrlWkbeavWic2NrR94EWnd4WODegzSdvesWHAbW5P6LkiXOkhLnG65b6CNaGbJztYPa0Qf6zsRMqUAefCVxWSAdcQczi0aP7Ckhdtlt1eLWYmDlA6bS8SixDqopRjN7vyPAh2UnyTkD7kHx4rkWQWkWiPJdj9fhobCLTXIwE54LlwH2zGlW1tAZ36TOi1BNijnGGqNHRkMXOr5YnXVZwv6RrbA%2Fr1gNudkrJBqo5GtsbDrbeLX8%3D', { headers });replaceServerIsland('46fb1f58-ca7e-49b0-87e3-cabf6067efd2', response);</script> </astro-slot><iframe sandbox="allow-scripts allow-popups allow-popups-to-escape-sandbox" title="cloudflare-tv-live-link" id="cloudflare-tv-embed" src="https://cloudflare.tv/embed/live.html" loading="lazy"></iframe><a href="/tag/workers/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2 mr1">Cloudflare Workers</a><a href="/tag/python/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2 mr1">Python</a></article></main><div class="ph3 pv3"><div class=" flex flex-row flex-wrap mw7 center"><div class="w-100 bt b--gray8"><p class="black fw5 f4 mt4">Follow on X</p></div><div class="w-100 pb2"><span>Dominik Picheta</span><span class="ph1">|</span><a href="https://x.com/@d0m96" class="no-underline">@d0m96</a></div><div class="w-100 pb2"><span>Cloudflare</span><span class="ph2">|</span><a href="https://x.com/@cloudflare" class="no-underline">@cloudflare</a></div></div></div><div data-testid="related-posts-section" class="pv4 ph3 ph0-l flex flex-row flex-wrap mw7 center"><div class="w-100 bt b--gray8"><p class="orange fw5 f4 mt4 ttu">Related posts</p></div><article data-testid="related-posts-article" class="w-100 w-100-m w-50-l ph3 mb4"><p data-testid="related-posts-article-date" class="f3 fw5 gray5" data-iso-date="2026-02-27T14:00+08:00">February 27, 2026  6:00 AM</p><a data-testid="related-posts-article-title" href="/a-better-web-streams-api/" class="no-underline gray1 f4 fw5"><h2 class="gray1 f4 fw5 mt2">We deserve a better streams API for JavaScript</h2></a><p data-testid="related-posts-article-excerpt" class="gray1 lh-copy">The Web streams API has become ubiquitous in JavaScript runtimes but was designed for a different era. Here&#x27;s what a modern streaming API could (should?) look like.<!-- -->...</p><ul class="flex pl0 fw6 f2 mb3 flex flex-wrap"><span>By<!-- --> </span><li class="list flex items-center" style="white-space:nowrap"><div class="author-name-tooltip"><a href="/author/jasnell/" class="fw5 f2 black no-underline">James M Snell</a></div></li></ul><div data-testid="related-posts-article-tags" class="flex flex-row flex-wrap"><span><a href="/tag/standards/" class="no-underline f1 fw2 blue3 underline-hover">Standards<!-- -->,</a> </span><span><a href="/tag/javascript/" class="no-underline f1 fw2 blue3 underline-hover">JavaScript<!-- -->,</a> </span><span><a href="/tag/typescript/" class="no-underline f1 fw2 blue3 underline-hover">TypeScript<!-- -->,</a> </span><span><a href="/tag/open-source/" class="no-underline f1 fw2 blue3 underline-hover">Open Source<!-- -->,</a> </span><span><a href="/tag/workers/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Workers<!-- -->,</a> </span><span><a href="/tag/node-js/" class="no-underline f1 fw2 blue3 underline-hover">Node.js<!-- -->,</a> </span><span><a href="/tag/performance/" class="no-underline f1 fw2 blue3 underline-hover">Performance<!-- -->,</a> </span><span><a href="/tag/api/" class="no-underline f1 fw2 blue3 underline-hover">API</a> </span></div></article><article data-testid="related-posts-article" class="w-100 w-100-m w-50-l ph3 mb4"><p data-testid="related-posts-article-date" class="f3 fw5 gray5" data-iso-date="2026-02-24T20:00:00.899Z">February 24, 2026  8:00 PM</p><a data-testid="related-posts-article-title" href="/vinext/" class="no-underline gray1 f4 fw5"><h2 class="gray1 f4 fw5 mt2">How we rebuilt Next.js with AI in one week</h2></a><p data-testid="related-posts-article-excerpt" class="gray1 lh-copy">One engineer used AI to rebuild Next.js on Vite in a week. vinext builds up to 4x faster, produces 57% smaller bundles, and deploys to Cloudflare Workers with a single command.<!-- -->...</p><ul class="flex pl0 fw6 f2 mb3 flex flex-wrap"><span>By<!-- --> </span><li class="list flex items-center" style="white-space:nowrap"><div class="author-name-tooltip"><a href="/author/steve-faulkner/" class="fw5 f2 black no-underline">Steve Faulkner</a></div></li></ul><div data-testid="related-posts-article-tags" class="flex flex-row flex-wrap"><span><a href="/tag/ai/" class="no-underline f1 fw2 blue3 underline-hover">AI<!-- -->,</a> </span><span><a href="/tag/workers/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Workers<!-- -->,</a> </span><span><a href="/tag/workers-ai/" class="no-underline f1 fw2 blue3 underline-hover">Workers AI<!-- -->,</a> </span><span><a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers<!-- -->,</a> </span><span><a href="/tag/developer-platform/" class="no-underline f1 fw2 blue3 underline-hover">Developer Platform<!-- -->,</a> </span><span><a href="/tag/javascript/" class="no-underline f1 fw2 blue3 underline-hover">JavaScript<!-- -->,</a> </span><span><a href="/tag/open-source/" class="no-underline f1 fw2 blue3 underline-hover">Open Source<!-- -->,</a> </span><span><a href="/tag/performance/" class="no-underline f1 fw2 blue3 underline-hover">Performance</a> </span></div></article><article data-testid="related-posts-article" class="w-100 w-100-m w-50-l ph3 mb4"><p data-testid="related-posts-article-date" class="f3 fw5 gray5" data-iso-date="2026-02-20T14:00+00:00">February 20, 2026  2:00 PM</p><a data-testid="related-posts-article-title" href="/code-mode-mcp/" class="no-underline gray1 f4 fw5"><h2 class="gray1 f4 fw5 mt2">Code Mode: give agents an entire API in 1,000 tokens</h2></a><p data-testid="related-posts-article-excerpt" class="gray1 lh-copy">The Cloudflare API has over 2,500 endpoints. Exposing each one as an MCP tool would consume over 2 million tokens. With Code Mode, we collapsed all of it into two tools and roughly 1,000 tokens of context.<!-- -->...</p><ul class="flex pl0 fw6 f2 mb3 flex flex-wrap"><span>By<!-- --> </span><li class="list flex items-center" style="white-space:nowrap"><div class="author-name-tooltip"><a href="/author/matt-carey/" class="fw5 f2 black no-underline">Matt Carey</a></div></li></ul><div data-testid="related-posts-article-tags" class="flex flex-row flex-wrap"><span><a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers<!-- -->,</a> </span><span><a href="/tag/developer-platform/" class="no-underline f1 fw2 blue3 underline-hover">Developer Platform<!-- -->,</a> </span><span><a href="/tag/ai/" class="no-underline f1 fw2 blue3 underline-hover">AI<!-- -->,</a> </span><span><a href="/tag/workers-ai/" class="no-underline f1 fw2 blue3 underline-hover">Workers AI<!-- -->,</a> </span><span><a href="/tag/workers/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Workers<!-- -->,</a> </span><span><a href="/tag/optimization/" class="no-underline f1 fw2 blue3 underline-hover">Optimization<!-- -->,</a> </span><span><a href="/tag/open-source/" class="no-underline f1 fw2 blue3 underline-hover">Open Source</a> </span></div></article><article data-testid="related-posts-article" class="w-100 w-100-m w-50-l ph3 mb4"><p data-testid="related-posts-article-date" class="f3 fw5 gray5" data-iso-date="2026-01-30T14:00+00:00">January 30, 2026  2:00 PM</p><a data-testid="related-posts-article-title" href="/vertical-microfrontends/" class="no-underline gray1 f4 fw5"><h2 class="gray1 f4 fw5 mt2">Building vertical microfrontends on Cloudflare’s platform</h2></a><p data-testid="related-posts-article-excerpt" class="gray1 lh-copy">Deploy multiple Workers under a single domain with the ability to make them feel like single-page applications. We take a look at how service bindings enable URL path routing to multiple projects.<!-- -->...</p><ul class="flex pl0 fw6 f2 mb3 flex flex-wrap"><span>By<!-- --> </span><li class="list flex items-center" style="white-space:nowrap"><div class="author-name-tooltip"><a href="/author/brayden-wilmoth/" class="fw5 f2 black no-underline">Brayden Wilmoth</a></div></li></ul><div data-testid="related-posts-article-tags" class="flex flex-row flex-wrap"><span><a href="/tag/workers/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Workers<!-- -->,</a> </span><span><a href="/tag/developer-platform/" class="no-underline f1 fw2 blue3 underline-hover">Developer Platform<!-- -->,</a> </span><span><a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers<!-- -->,</a> </span><span><a href="/tag/dashboard-tag/" class="no-underline f1 fw2 blue3 underline-hover">Dashboard<!-- -->,</a> </span><span><a href="/tag/front-end/" class="no-underline f1 fw2 blue3 underline-hover">Front End<!-- -->,</a> </span><span><a href="/tag/micro-frontends/" class="no-underline f1 fw2 blue3 underline-hover">Micro-frontends</a> </span></div></article></div><!--astro:end--></astro-island><footer class="pt4 pb4 pl1 pr1 main-footer"><div class="mw8 center dn db-l ph3"><div class="flex flex-row justify-between"><div class="main-footer__menu-group"><ul id="getting-started-menu" class="list pl0"><li class="pt1 pb1 f1 main-footer__menu-group__header js-toggle-footer-group" data-submenu="getting-started-menu">Getting Started<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/plans/free/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="free-plans" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Free plans</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/enterprise/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="enterprise" class="f1 blue3 no-underline underline-hover" rel="noreferrer">For enterprises</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/plans/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="compare-plans" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Compare plans</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/about-your-website/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="get-a-recommendation" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Get a recommendation</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/plans/enterprise/demo/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="request-a-demo" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Request a demo</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/plans/enterprise/contact/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="contact-sales" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Contact Sales</a></li></ul></div><div class="main-footer__menu-group"><ul id="company-menu" class="list pl0"><li class="pt1 pb1 f1" data-submenu="company-menu">Resources<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/learning/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="learning-center" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Learning Center</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/analysts/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="analysts-report" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Analyst reports</a></li><li class="pt1 pb1"><a href="https://radar.cloudflare.com/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="overview" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Cloudflare Radar</a></li><li class="pt1 pb1"><a href="https://cloudflare.tv/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="tv" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Cloudflare TV</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/case-studies/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="case-studies" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Case Studies</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/resource-hub/?resourcetype=Webinar" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="webinars" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Webinars</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/resource-hub/?resourcetype=Whitepaper" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="white-papers" class="f1 blue3 no-underline underline-hover" rel="noreferrer">White Papers</a></li><li class="pt1 pb1"><a href="https://developers.cloudflare.com" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="developer-docs" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Developer docs</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/the-net/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="theNet" class="f1 blue3 no-underline underline-hover" rel="noreferrer">theNet</a></li></ul></div><div class="main-footer__menu-group"><ul id="sales-menu" class="list pl0"><li class="pt1 pb1 f1 main-footer__menu-group__header js-toggle-footer-group" data-submenu="sales-menu">Solutions<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/connectivity-cloud/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="connectivity-cloud" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Connectivity cloud</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/zero-trust/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="zero-trust" class="f1 blue3 no-underline underline-hover" rel="noreferrer">SSE and SASE services</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/application-services/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="application-services" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Application services</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/network-services/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="network-services" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Network services</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/developer-platform/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="developer-services" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Developer services</a></li></ul></div><div class="main-footer__menu-group"><ul id="community-menu" class="list pl0"><li class="pt1 pb1 f1 main-footer__menu-group__header js-toggle-footer-group" data-submenu="community-menu">Community<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://community.cloudflare.com" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="community_hub" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Community Hub</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/galileo/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="galileo" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Project Galileo</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/athenian/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="athenian" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Athenian Project</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/campaigns/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="cloudflare-for-campaigns" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Cloudflare for Campaigns</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/connect2024/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="connect-2024" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Connect 2024</a></li></ul></div><div class="main-footer__menu-group"><ul id="support-menu" class="list pl0"><li class="pt1 pb1 f1 main-footer__menu-group__header js-toggle-footer-group" data-submenu="support-menu">Support<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://support.cloudflare.com" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="help-center" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Help center</a></li><li class="pt1 pb1"><a href="https://www.cloudflarestatus.com" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="status" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Cloudflare Status</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/compliance/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="compliance" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Compliance</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/gdpr/introduction/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="gdpr" class="f1 blue3 no-underline underline-hover" rel="noreferrer">GDPR</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/trust-hub/abuse-approach/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="trust-and-safety" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Trust &amp; Safety</a></li></ul></div><div class="main-footer__menu-group"><ul id="company-menu" class="list pl0"><li class="pt1 pb1 f1 main-footer__menu-group__header js-toggle-footer-group" data-submenu="company-menu">Company<i class="icon-caret-down"></i></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/about-overview/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="overview" class="f1 blue3 no-underline underline-hover" rel="noreferrer">About Cloudflare</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/people/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="our_team" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Our team</a></li><li class="pt1 pb1"><a href="https://cloudflare.net/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="investor-relations" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Investor relations</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/press/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="press" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Press</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/careers/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="careers" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Careers</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/diversity-equity-and-inclusion/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="diversity-equity-inclusion" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Diversity, equity &amp; inclusion</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/impact/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="impact-ESG" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Impact/ESG</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/network/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="network_map" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Network Map</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/press-kit/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="press-kit" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Logos &amp; press kit</a></li><li class="pt1 pb1"><a href="https://www.cloudflare.com/partners/" target="_blank" data-tracking-category="footer" data-tracking-action="click" data-tracking-label="partners" class="f1 blue3 no-underline underline-hover" rel="noreferrer">Become a partner</a></li></ul></div></div></div><div class="mw8 center ph3"><div class="flex flex-row flex-wrap justify-center md:justify-between items-center pt4"><div class="flex flex-row space-x-4 items-start w-25-l pb4 pb0-l"><a target="_blank" rel="noreferrer" href="https://www.facebook.com/Cloudflare/" class="w-8"><img class="w-8" src="https://www.cloudflare.com/img/footer/facebook.svg" alt="facebook"/></a><a target=" _blank" rel="noreferrer" href="https://x.com/Cloudflare" class="w-8"><img class="w-8" src="https://www.cloudflare.com/img/footer/twitter.svg" alt="X"/></a><a target="_blank" rel="noreferrer" href="https://www.linkedin.com/company/cloudflare" class="w-8"><img class="w-8" src="https://www.cloudflare.com/img/footer/linkedin.svg" alt="linkedin"/></a><a target="_blank" rel="noreferrer" href="https://www.youtube.com/cloudflare" class="w-8"><img class="w-8" src="https://www.cloudflare.com/img/footer/youtube.svg" alt="youtube"/></a><a target="_blank" rel="noreferrer" href="https://www.instagram.com/cloudflare" class="w-8"><img class="w-8" src="https://www.cloudflare.com/img/footer/instagram.svg" alt="instagram"/></a></div><div class="w-70-l tr-l tl-ns"><div><span class="main-footer__copyright f1">© <!-- -->2026<!-- --> Cloudflare, Inc.<!-- --> </span><span class="main-footer__copyright f1">|</span><a href="https://www.cloudflare.com/privacypolicy/" target="_blank" class="main-footer__copyright f1 no-underline underline-hover" rel="noreferrer"> <!-- -->Privacy Policy<!-- --> </a><span class="main-footer__copyright f1">|</span><a href="https://www.cloudflare.com/website-terms/" target="_blank" class="main-footer__copyright f1 no-underline underline-hover" rel="noreferrer"> <!-- -->Terms of Use<!-- --> </a><span class="main-footer__copyright f1">|</span><a href="https://www.cloudflare.com/disclosure/" target="_blank" class="main-footer__copyright f1 no-underline underline-hover" rel="noreferrer"> <!-- -->Report Security Issues<!-- --> </a><span class="main-footer__copyright f1">|</span><img class="mw2 ph1" src="/images/privacy-options.svg" alt="Privacy Options"/><a href="#cookie-settings" id="ot-sdk-btn" class="ot-sdk-show-settings main-footer__copyright f1 no-underline underline-hover"><span class="brandGray5">Cookie Preferences</span> </a><span class="main-footer__copyright f1">|</span><a href="https://www.cloudflare.com/trademark/" target="_blank" class="main-footer__copyright f1 no-underline underline-hover" rel="noreferrer"> <!-- -->Trademark<!-- --> </a></div></div></div></div></footer></html><script defer src="https://static.cloudflareinsights.com/beacon.min.js/v67327c56f0bb4ef8b305cae61679db8f1769101564043" integrity="sha512-rdcWY47ByXd76cbCFzznIcEaCN71jqkWBBqlwhF1SY7KubdLKZiEGeP7AyieKZlGP9hbY/MhGrwXzJC/HulNyg==" data-cf-beacon='{"version":"2024.11.0","token":"2bc156e5f250476cb274d269511ffb57","server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
