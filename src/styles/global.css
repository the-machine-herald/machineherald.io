@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;0,8..60,700;1,8..60,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-surface: 250 250 249;
    --color-text-primary: 24 24 27;
    --color-text-secondary: 82 82 91;
    --color-text-muted: 113 113 122;
    --color-border: 228 228 231;
    --color-accent: 37 99 235;
    --color-accent-hover: 29 78 216;
  }

  .dark {
    --color-surface: 10 10 11;
    --color-text-primary: 250 250 250;
    --color-text-secondary: 161 161 170;
    --color-text-muted: 113 113 122;
    --color-border: 39 39 42;
  }

  html {
    @apply scroll-smooth antialiased;
  }

  body {
    @apply bg-surface-light text-text-primary-light;
    @apply dark:bg-surface-dark dark:text-text-primary-dark;
    @apply font-sans;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  ::selection {
    @apply bg-accent/20;
  }

  /* Focus styles */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-accent;
  }
}

@layer components {
  .container-wide {
    @apply mx-auto max-w-container px-4 sm:px-6 lg:px-8;
  }

  .container-reading {
    @apply mx-auto max-w-reading px-4 sm:px-6;
  }

  .link-underline {
    @apply border-b border-transparent transition-colors duration-150;
    @apply hover:border-accent;
  }

  .card {
    @apply rounded-lg border border-border-light bg-white/50;
    @apply dark:border-border-dark dark:bg-white/5;
    @apply transition-shadow duration-200;
    @apply hover:shadow-md dark:hover:shadow-black/20;
  }

  .signal-pill {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5;
    @apply text-xs font-medium;
    @apply bg-zinc-100 text-zinc-700;
    @apply dark:bg-zinc-800 dark:text-zinc-300;
    @apply transition-colors duration-150;
    @apply hover:bg-zinc-200 dark:hover:bg-zinc-700;
  }

  .status-pill {
    @apply inline-flex items-center gap-1.5 rounded-full px-2.5 py-1;
    @apply text-2xs font-mono font-medium uppercase tracking-wider;
    @apply bg-emerald-50 text-emerald-700;
    @apply dark:bg-emerald-900/30 dark:text-emerald-400;
  }

  .status-dot {
    @apply h-1.5 w-1.5 rounded-full bg-current;
    animation: pulse-dot 2s ease-in-out infinite;
  }

  .provenance-badge {
    @apply flex flex-wrap md:flex-nowrap items-center gap-x-3 gap-y-2 rounded-lg border px-4 py-3 md:py-2;
    @apply border-border-light bg-zinc-50;
    @apply dark:border-border-dark dark:bg-zinc-900/50;
    @apply font-mono text-xs;
  }

  .provenance-badge .separator {
    @apply hidden md:inline text-border-light dark:text-border-dark;
  }

  .audit-card {
    @apply rounded-lg border border-border-light bg-white p-6;
    @apply dark:border-border-dark dark:bg-zinc-900;
    @apply font-mono text-sm;
  }

  .audit-row {
    @apply flex flex-col gap-1 border-b border-border-light py-3;
    @apply dark:border-border-dark;
    @apply last:border-0;
  }

  .audit-label {
    @apply text-xs uppercase tracking-wider text-text-muted-light;
    @apply dark:text-text-muted-dark;
  }

  .audit-value {
    @apply break-all text-text-primary-light;
    @apply dark:text-text-primary-dark;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .font-feature-numeric {
    font-feature-settings: 'tnum', 'lnum';
  }
}

@keyframes pulse-dot {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Pagefind UI theming – scoped to #pagefind-container so our vars
   always beat pagefind-ui.css's :root declarations (ID specificity). */
#pagefind-container {
  --pagefind-ui-scale: 0.9;
  --pagefind-ui-primary: #2563EB;
  --pagefind-ui-text: #18181B;
  --pagefind-ui-background: #FAFAF9;
  --pagefind-ui-border: #E4E4E7;
  --pagefind-ui-tag: #F4F4F5;
  --pagefind-ui-border-width: 1px;
  --pagefind-ui-border-radius: 0.5rem;
  --pagefind-ui-image-border-radius: 0.5rem;
  --pagefind-ui-image-box-ratio: 3 / 2;
  --pagefind-ui-font: 'Inter', system-ui, sans-serif;
}

html.dark #pagefind-container {
  --pagefind-ui-primary: #60A5FA;
  --pagefind-ui-text: #E4E4E7;
  --pagefind-ui-background: #18181B;
  --pagefind-ui-border: #3F3F46;
  --pagefind-ui-tag: #27272A;
}

/* Search input – explicit override for dark mode */
html.dark .pagefind-ui__search-input {
  background-color: #18181B;
  color: #E4E4E7;
}

html.dark .pagefind-ui__search-clear {
  color: #A1A1AA;
}

html.dark .pagefind-ui__search-clear:focus {
  outline-color: #60A5FA;
}

/* Pagefind result title links */
#pagefind-container .pagefind-ui__result-link {
  font-family: 'Source Serif 4', Georgia, serif;
  font-weight: 600;
}

html.dark #pagefind-container .pagefind-ui__result-link {
  color: #FAFAFA;
}

/* Pagefind search highlight marks */
#pagefind-container mark {
  background: #DBEAFE;
  color: #1E3A5F;
  border-radius: 2px;
  padding: 0 2px;
}

html.dark #pagefind-container mark {
  background: rgba(59, 130, 246, 0.3);
  color: #BFDBFE;
}

/* Pagefind sub-result titles */
html.dark #pagefind-container .pagefind-ui__result-nested .pagefind-ui__result-link {
  color: #D4D4D8;
}

/* Pagefind metadata tags */
html.dark #pagefind-container .pagefind-ui__result-tag {
  color: #A1A1AA;
}

/* Pagefind result excerpt text */
html.dark #pagefind-container .pagefind-ui__result-excerpt {
  color: #A1A1AA;
}

/* Pagefind message (e.g. "5 results for nvidia") */
html.dark #pagefind-container .pagefind-ui__message {
  color: #71717A;
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }

  body {
    @apply bg-white text-black;
  }

  .card {
    @apply border-gray-300 shadow-none;
  }
}
